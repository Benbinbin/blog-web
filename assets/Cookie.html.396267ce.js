import{r as p,a as e,b as n,d as t,w as o,F as c,e as s,c as l,o as i}from"./app.43fe0c63.js";import{_ as u}from"./plugin-vue_export-helper.21dcd24c.js";const r={},k=n("h1",{id:"cookie",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#cookie","aria-hidden":"true"},"#"),s(" Cookie")],-1),d=n("h2",{id:"\u6D4F\u89C8\u5668\u8BFB\u53D6\u4E0E\u5199\u5165",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u6D4F\u89C8\u5668\u8BFB\u53D6\u4E0E\u5199\u5165","aria-hidden":"true"},"#"),s(" \u6D4F\u89C8\u5668\u8BFB\u53D6\u4E0E\u5199\u5165")],-1),m=s("\u53C2\u8003\uFF1A"),b=s("Cookie.md"),h=l(`<h2 id="\u670D\u52A1\u5668\u7AEF\u8BFB\u53D6\u4E0E\u5199\u5165" tabindex="-1"><a class="header-anchor" href="#\u670D\u52A1\u5668\u7AEF\u8BFB\u53D6\u4E0E\u5199\u5165" aria-hidden="true">#</a> \u670D\u52A1\u5668\u7AEF\u8BFB\u53D6\u4E0E\u5199\u5165</h2><h3 id="\u4F7F\u7528-node-js" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-node-js" aria-hidden="true">#</a> \u4F7F\u7528 Node.js</h3><ul><li>\u8BFB\u53D6 Client \u7AEF\u53D1\u9001\u7684\u8BF7\u6C42\u4E2D\u7684 cookie</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token comment">// \u8BFB\u53D6\u8BF7\u6C42\u4E2D\u7684 cookie</span>
    <span class="token keyword">const</span> cookieStr <span class="token operator">=</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>cookie<span class="token punctuation">;</span>
    <span class="token comment">// \u89E3\u6790 cookie\uFF0C\u8F6C\u6362\u4E3A\u5BF9\u8C61\u6DFB\u52A0\u5230 req.cookie \u4E2D\uFF0C\u4EE5 key: value \u7684\u5F62\u5F0F\u8868\u793A</span>
    req<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    cookieStr<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> arr <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;=&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> key <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> val <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      req<span class="token punctuation">.</span>cookie<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>\u5C06 cookie \u5199\u5165\u5230 Server \u7AEF\u7684\u54CD\u5E94\u4E2D</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    <span class="token comment">// \u5C06 cookie \u5199\u5165\u5230\u54CD\u5E94\u4E2D</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Set-Cookie&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;username=Ben;path=/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="\u4F7F\u7528-express-\u548C-cookie-parser" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-express-\u548C-cookie-parser" aria-hidden="true">#</a> \u4F7F\u7528 Express \u548C cookie-parser</h3><p>\u9700\u8981\u5148\u5B89\u88C5\u89E3\u6790 Cookie \u7684\u76F8\u5173\u6A21\u5757</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> cookie-parser
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>\u8BFB\u53D6 Client \u7AEF\u53D1\u9001\u7684\u8BF7\u6C42\u4E2D\u7684 cookie</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ...</span>
req<span class="token punctuation">.</span>cookies<span class="token punctuation">.</span>yourCookieName<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>\u5C06 cookie \u5199\u5165\u5230 Server \u7AEF\u7684\u54CD\u5E94\u4E2D</p><p>Express \u5199\u5165 cookie \u5E76\u8BBE\u7F6E<a href="http://expressjs.com/en/5x/api.html#res.cookie" target="_blank" rel="noopener noreferrer">\u76F8\u5173\u53C2\u6570</a></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> cookieParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;cookie-parser&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cookieParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
res<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u5E38\u7528\u53C2\u6570 option \u8BBE\u7F6E\uFF1A</p><ul><li><code>maxAge</code> Cookie \u7684\u6709\u6548\u671F\uFF0C\u4EE5\u6BEB\u79D2\u8BA1\u7B97</li><li><code>httpOnly</code> \u4EC5\u53EF\u4EE5\u901A\u8FC7 http \u4F20\u8F93\uFF0C\u5E03\u5C14\u503C</li></ul></li></ul>`,12);function v(f,g){const a=p("RouterLink");return i(),e(c,null,[k,d,n("p",null,[m,t(a,{to:"/frontend/JavaScript/%E6%93%8D%E4%BD%9C%E6%B5%8F%E8%A7%88%E5%99%A8/Cookie.html"},{default:o(()=>[b]),_:1})]),h],64)}var j=u(r,[["render",v]]);export{j as default};

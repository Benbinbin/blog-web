import{c as n}from"./app.43fe0c63.js";import{_ as s}from"./plugin-vue_export-helper.21dcd24c.js";const a={},p=n(`<h1 id="express-\u8DEF\u7531" tabindex="-1"><a class="header-anchor" href="#express-\u8DEF\u7531" aria-hidden="true">#</a> Express \u8DEF\u7531</h1><p>\u53C2\u8003\uFF1A</p><ul><li><a href="http://expressjs.com/zh-cn/starter/basic-routing.html" target="_blank" rel="noopener noreferrer">\u57FA\u672C\u8DEF\u7531</a></li><li><a href="http://expressjs.com/zh-cn/guide/routing.html" target="_blank" rel="noopener noreferrer">\u8DEF\u7531</a></li><li><a href="http://expressjs.com/zh-cn/4x/api.html#router" target="_blank" rel="noopener noreferrer">Router</a> | Express 4.x - API \u53C2\u8003</li><li><a href="https://www.jianguoyun.com/p/DYeMblkQjNDGBxj6vuID" target="_blank" rel="noopener noreferrer">\u7DB2\u5740\u898F\u5247</a></li></ul><p>\u8DEF\u7531\u7528\u4E8E\u786E\u5B9A\u5E94\u7528\u7A0B\u5E8F\u5982\u4F55\u54CD\u5E94\u5BF9\u7279\u5B9A\u7AEF\u70B9\uFF08\u8DEF\u5F84\uFF09\u7684\u8BF7\u6C42\uFF0C\u5305\u542B\u4E00\u4E2A URI\uFF08\u6216\u8DEF\u5F84\uFF09\u548C\u4E00\u4E2A\u7279\u5B9A\u7684 HTTP \u8BF7\u6C42\u65B9\u6CD5\uFF08GET\u3001POST \u7B49\uFF09\u3002</p><p>\u6BCF\u4E2A\u8DEF\u7531\u53EF\u4EE5\u5177\u6709\u4E00\u4E2A\u6216\u591A\u4E2A\u5904\u7406\u7A0B\u5E8F\u51FD\u6570\uFF0C\u8FD9\u4E9B\u51FD\u6570\u5728\u8DEF\u7531\u5339\u914D\u65F6\u6267\u884C\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">(</span><span class="token constant">PATH</span><span class="token punctuation">,</span> <span class="token constant">HANDLER</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u5176\u4E2D\uFF1A</p><ul><li><code>app</code> \u662F <code>express</code> \u7684\u5B9E\u4F8B\u3002</li><li><code>METHOD</code> \u662F <a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol" target="_blank" rel="noopener noreferrer">HTTP \u8BF7\u6C42\u65B9\u6CD5</a>\u3002</li><li><code>PATH</code> \u662F\u670D\u52A1\u5668\u4E0A\u7684\u8DEF\u5F84\u3002</li><li><code>HANDLER</code> \u662F\u5728\u8DEF\u7531\u5339\u914D\u65F6\u6267\u884C\u7684\u51FD\u6570\u3002</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u5BF9 /user \u8DEF\u7531\u7684 PUT \u8BF7\u6C42\u8FDB\u884C\u54CD\u5E94</span>
app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&#39;/user&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;Got a PUT request at /user&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="\u90E8\u5206\u8DEF\u5F84-params" tabindex="-1"><a class="header-anchor" href="#\u90E8\u5206\u8DEF\u5F84-params" aria-hidden="true">#</a> \u90E8\u5206\u8DEF\u5F84 params</h2><p>\u5982\u679C\u5E0C\u671B\u4F7F\u7528\u8DEF\u7531 URL \u90E8\u5206\u8DEF\u5F84\uFF0C\u53EF\u4EE5\u5728 <code>path</code> \u4E2D\u4F7F\u7528\u8DEF\u7531\u53C2\u6570 Route parameters <code>:param</code> \u4EE5\u6355\u83B7 URL \u76F8\u5E94\u4F4D\u7F6E\u7684\u503C\uFF0C\u5E76\u5728\u5904\u7406\u7A0B\u5E8F\u51FD\u6570\uFF08\u56DE\u8C03\u51FD\u6570\uFF09\u8BF7\u6C42\u5BF9\u8C61 <code>req</code> \u4E2D\u4F7F\u7528\u5C5E\u6027 <code>params</code> \u6765\u8BBF\u95EE\uFF0C\u5B83\u662F\u4E00\u4E2A\u5305\u542B <strong>\u8DEF\u7531 URL \u8DEF\u5F84\u53C2\u6570</strong> \u7684\u5BF9\u8C61\uFF1A</p><ul><li>\u8BF7\u6C42 URL\uFF1A<code>http://localhost:3000/users/34/books/8989</code></li><li>\u8DEF\u7531\u5339\u914D\u8DEF\u5F84\uFF1A<code>/users/:userId/books/:bookId</code></li><li>\u56DE\u8C03\u51FD\u6570\u7684 <code>req</code> \u53C2\u6570 <code>params</code>\uFF1A<code>req.params: { &quot;userId&quot;: &quot;34&quot;, &quot;bookId&quot;: &quot;8989&quot; }</code></li></ul><p>\u8FD4\u56DE\u5BA2\u6237\u7AEF\u8BF7\u6C42\u8DEF\u5F84\u4E2D\u7684 <code>userId</code> \u503C</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/users/:userId&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>userId<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="\u67E5\u8BE2\u53C2\u6570-query" tabindex="-1"><a class="header-anchor" href="#\u67E5\u8BE2\u53C2\u6570-query" aria-hidden="true">#</a> \u67E5\u8BE2\u53C2\u6570 query</h2><p>\u5728\u8DEF\u7531 URL \u4E2D\u53EF\u80FD\u5B58\u5728\u67E5\u8BE2\u53C2\u6570\uFF0C\u5373 URL \u4E2D\u5728 <code>?</code> \u540E\u7684\u53C2\u6570\uFF0C\u53EF\u4EE5\u6709\u591A\u4E2A\u67E5\u8BE2\u53C2\u6570\u4EE5 <code>&amp;</code> \u5206\u9694\u3002\u5982\u679C\u5E0C\u671B\u4F7F\u7528\u8DEF\u7531 URL \u7684\u67E5\u8BE2\u53C2\u6570\uFF0C\u5728\u5904\u7406\u7A0B\u5E8F\u51FD\u6570\uFF08\u56DE\u8C03\u51FD\u6570\uFF09\u8BF7\u6C42\u5BF9\u8C61 <code>req</code> \u4E2D\u4F7F\u7528\u5C5E\u6027 <code>query</code> \u6765\u8BBF\u95EE\uFF0C\u5B83\u662F\u4E00\u4E2A\u5305\u542B <strong>\u8DEF\u7531 URL \u67E5\u8BE2\u53C2\u6570</strong> \u7684\u5BF9\u8C61</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/user/:name/&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> name <span class="token operator">=</span> req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token keyword">let</span> limit <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>limit<span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>name <span class="token operator">+</span><span class="token string">&#39; want to get &#39;</span> <span class="token operator">+</span> limit<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u6D4F\u89C8\u5668\u8F93\u5165 URL</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>http://127.0.0.1:3000/user/Ben?limit=5
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>\u9875\u9762\u8F93\u51FA</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>Ben want to get 5
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="\u6A21\u5757\u5316\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#\u6A21\u5757\u5316\u7BA1\u7406" aria-hidden="true">#</a> \u6A21\u5757\u5316\u7BA1\u7406</h2><p>\u5982\u679C\u7F51\u7AD9\u9700\u8981\u914D\u7F6E\u5927\u91CF\u8DEF\u7531\uFF0C\u53EF\u4EE5\u4F7F\u7528 Express \u5185\u7F6E\u65B9\u6CD5 <code>express.Router()</code> \u7BA1\u7406\u5B9E\u73B0\u6A21\u5757\u5316\u3002</p><p>\u5982\u5BF9\u4E8E\u7528\u6237 <code>user</code> \u8DEF\u5F84\u4E0B\u6709\u591A\u4E2A\u5B50\u8DEF\u7531\uFF0C\u53EF\u4EE5\u4F7F\u7528 <code>user.js</code> \u6765\u7BA1\u7406\u8FD9\u4E9B\u8DEF\u7531\u5904\u7406\u7A0B\u5E8F</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u{1F4C1} routers/user.js</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// \u4F7F\u7528 express.Router() \u7BA1\u7406\u8DEF\u7531</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u8DEF\u7531\u5904\u7406\u7A0B\u5E8F\u7684 path \u90FD\u662F\u9488\u5BF9\u7236\u76EE\u5F55 /user \u800C\u8A00\u7684</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/edit-profile&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;profile&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/photo&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;photo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u5BFC\u51FA\u8DEF\u7531\u5904\u7406\u7A0B\u5E8F</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u{1F4C1} app.js</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u5F15\u5165\u76F8\u5173\u8DEF\u7531\u5904\u7406\u7A0B\u5E8F</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./routers/user&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// \u8BBE\u7F6E\u4E2D\u95F4\u4EF6\u51FD\u6570\u300C\u6355\u83B7\u300DURL \u542B\u6709 user \u8DEF\u5F84\u7684\u8BF7\u6C42\uFF0C\u5E76\u8C03\u7528 user \u8FDB\u884C\u6B21\u7EA7\u8DEF\u7531\u7684\u5339\u914D\u5904\u7406</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&#39;/user&#39;</span><span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3000</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div>`,26);function e(t,o){return p}var l=s(a,[["render",e]]);export{l as default};

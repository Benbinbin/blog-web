import{c as n}from"./app.43fe0c63.js";import{_ as s}from"./plugin-vue_export-helper.21dcd24c.js";const a={},p=n(`<h1 id="\u6D88\u606F\u901A\u8BAF" tabindex="-1"><a class="header-anchor" href="#\u6D88\u606F\u901A\u8BAF" aria-hidden="true">#</a> \u6D88\u606F\u901A\u8BAF</h1><p>\u53C2\u8003\uFF1A</p><ul><li><a href="https://developer.chrome.com/extensions/messaging" target="_blank" rel="noopener noreferrer">Message Passing</a></li><li><a href="https://github.com/sxei/chrome-plugin-demo#%E6%B6%88%E6%81%AF%E9%80%9A%E4%BF%A1" target="_blank" rel="noopener noreferrer">\u6D88\u606F\u901A\u4FE1</a></li></ul><p>\u4E0D\u540C\u7684 JavaScript \u6587\u6863\uFF08\u4E00\u822C\u6307 content scripts\u3001background \u8FD0\u884C\u7684 scripts\u3001popup \u9875\u9762\u6240\u5F15\u7528\u7684 scripts\uFF09\u662F\u5728\u4E0D\u540C\u7684\u4F5C\u7528\u57DF\u4E2D\uFF0C\u5B83\u4EEC\u4E4B\u95F4\u901A\u8FC7 Chrome \u63D0\u4F9B\u7684 <a href="https://developer.chrome.com/extensions/api_index" target="_blank" rel="noopener noreferrer">API</a> \u8FDB\u884C\u4E8B\u4EF6\u89E6\u53D1\u548C\u76D1\u542C\u4EE5\u5B9E\u73B0\u6570\u636E\u4F20\u9012\u548C<a href="https://developer.chrome.com/extensions/messaging" target="_blank" rel="noopener noreferrer">\u6D88\u606F\u901A\u4FE1</a>\u3002</p><h2 id="background-\u4E0E-content-script" tabindex="-1"><a class="header-anchor" href="#background-\u4E0E-content-script" aria-hidden="true">#</a> background \u4E0E content script</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u{1F4C1} background.js</span>
<span class="token comment">// \u8BBE\u7F6E\u4E00\u4E2A browser action \u7684\u76D1\u542C\u5668\uFF0C\u76D1\u542C onClicked \u4E8B\u4EF6</span>
chrome<span class="token punctuation">.</span>browserAction<span class="token punctuation">.</span>onClicked<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>buttonClicked<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">buttonClicked</span><span class="token punctuation">(</span><span class="token parameter">tab</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u5F53\u7528\u6237\u70B9\u51FB\u6D4F\u89C8\u5668\u53F3\u4E0A\u89D2\u7684\u63D2\u4EF6\u56FE\u6807\u65F6\u4F1A\u6267\u884C\u8BE5\u51FD\u6570</span>
  <span class="token comment">// \u53C2\u6570 tab \u662F\u4E00\u4E2A\u5173\u4E8E\u5F53\u524D\u7F51\u9875\u6807\u7B7E\u7684\u4FE1\u606F\u7684\u5BF9\u8C61</span>
  <span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token punctuation">{</span>
    message<span class="token operator">:</span> <span class="token string">&quot;user clicked!&quot;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// \u4F20\u9012\u6D88\u606F</span>
  chrome<span class="token punctuation">.</span>tabs<span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span>tab<span class="token punctuation">.</span>id<span class="token punctuation">,</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u{1F4C1} content.js</span>
<span class="token comment">// \u5728 content script \u76D1\u542C\u6D88\u606F</span>
chrome<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>onMessage<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">receiver</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> sender<span class="token punctuation">,</span> sendResponse</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// \u5F53\u63A5\u53D7\u5230\u6D88\u606F\u540E\u6267\u884C\u8BE5\u56DE\u8C03\u51FD\u6570</span>
  <span class="token comment">// \u7B2C\u4E00\u4E2A\u53C2\u6570 request \u662F\u6240\u63A5\u6536\u5230\u7684\u6D88\u606F</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">&quot;user clicked!&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do something!</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="popup-\u8BFB\u53D6-background-\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#popup-\u8BFB\u53D6-background-\u6570\u636E" aria-hidden="true">#</a> popup \u8BFB\u53D6 background \u6570\u636E</h2><p>popup script \u53EF\u4EE5\u76F4\u63A5\u8C03\u7528 background script \u4E2D\u7684\u65B9\u6CD5\u548C\u53D8\u91CF\uFF0C\u4E5F\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE background page \u7684 DOM</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u{1F4C1} background.js</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;\u6211\u662F background&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u{1F4C1} popup.js</span>
<span class="token keyword">var</span> bg <span class="token operator">=</span> chrome<span class="token punctuation">.</span>extension<span class="token punctuation">.</span><span class="token function">getBackgroundPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u8BBF\u95EEbg\u7684\u51FD\u6570</span>
<span class="token function">alert</span><span class="token punctuation">(</span>bg<span class="token punctuation">.</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u8BBF\u95EE bg \u7684DOM</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div>`,11);function e(t,c){return p}var l=s(a,[["render",e]]);export{l as default};

<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/blog-web/images/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.css"><title>集合 | Blog</title><meta name="description" content="A blog and knowledge management system about web.">
    <link rel="modulepreload" href="/blog-web/assets/app.43fe0c63.js"><link rel="modulepreload" href="/blog-web/assets/集合.html.072caede.js"><link rel="modulepreload" href="/blog-web/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/blog-web/assets/集合.html.321153cc.js">
    <link rel="stylesheet" href="/blog-web/assets/style.b42fd117.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="min-h-screen flex flex-col"><nav class="px-4 sm:px-8 py-2 flex justify-between items-center sticky top-0 z-30 bg-white"><div class="left flex items-center space-x-0.5"><!--[--><button class="text-gray-400 hover:bg-gray-100 catelog-btn p-2 select-none text-sm font-bold hover:text-gray-900 rounded-md lg:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></svg></button><!--]--><a class="avatar p-2 hover:bg-gray-100 rounded-md" href="/blog-web/#"><img src="/blog-web/images/avatar.png" alt="avatar" class="w-10 h-10 rounded-full"></a></div><div class="right hidden sm:flex items-center space-x-0.5"><!--[--><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">All</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Network</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Frontend</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Backend</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Project</button><!--]--><!--[--><button class="text-gray-900 bg-gray-100 hover:bg-gray-200 p-2 select-none text-sm font-bold hover:text-gray-900 rounded-md hidden lg:block"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></svg></button><!--]--></div><div class="more-container sm:hidden relative"><button style="" class="p-2 select-none hover:bg-gray-100 rounded-md text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"></path></svg></button><button style="display:none;" class="p-2 select-none hover:bg-gray-100 rounded-md text-red-400 hover:text-red-500"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path></svg></button><div style="display:none;" class="more-modal p-2 absolute top-10 right-0 z-10 flex flex-col space-y-2 bg-gray-100 rounded-md opacity-90"><!--[--><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">All</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Network</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Frontend</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Backend</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Project</button><!--]--></div></div></nav><div class="relative flex-grow"><div class="theme-container no-navbar no-sidebar"><!--[--><!----><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="集合" tabindex="-1"><a class="header-anchor" href="#集合" aria-hidden="true">#</a> 集合</h1><p>集合 <code>Set</code> 是 ES6 中新增的内置对象，它是一些值的集合，其中每个值都是唯一不重复的，这和数学意义上的集合相同。使用起来类似于数组，但 <code>Set</code> 与数组之间的最大区别是：</p><ul><li>集合不基于索引，<strong>不能</strong>根据集合中的条目在集合中的位置引用这些条目</li><li>条目不能单独被访问，但可创建迭代器循环访问 <code>Set</code></li><li>元素是唯一的</li></ul><p>使用构造函数 <code>Set(iterable)</code> 根据可迭代对象创建集合，通常是传递一个数组，将会从数组里面复制元素到 set 中，其中的元素数据类型可以不同，但重复的元素会自动移除</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> games <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;Super Mario Bros.&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Banjo-Kazooie&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Mario Kart&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Super Mario Bros.&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在创建 Set 时，会自动移除重复的条目</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>games<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Set {&#39;Super Mario Bros.&#39;, &#39;Banjo-Kazooie&#39;, &#39;Mario Kart&#39;}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="修改集合" tabindex="-1"><a class="header-anchor" href="#修改集合" aria-hidden="true">#</a> 修改集合</h2><ul><li>方法 <code>.add(value)</code> 向集合添加条目，返回对象本身。如果尝试向集合添加重复的条目，系统不会报错，但是该条目不会添加到集合中，避免了数据的冗余。</li><li>方法 <code>.delete(value)</code> 从集合中删除条目，返回一个布尔值，如果该元素存在，返回 <code>true</code>，否则返回 <code>false</code></li><li>方法 <code>.clear()</code> 清空集合，删除集合中的所有元素</li></ul><h2 id="集合长度" tabindex="-1"><a class="header-anchor" href="#集合长度" aria-hidden="true">#</a> 集合长度</h2><p>属性 <code>.size</code> 返回集合中的条目数</p><p>⚠️ 不能像数组那样通过索引访问 Set，因此要使用 <code>.size</code> 属性，而不是 <code>.length</code> 属性获取集合的大小</p><h2 id="检查值" tabindex="-1"><a class="header-anchor" href="#检查值" aria-hidden="true">#</a> 检查值</h2><p>使用方法 <code>.has(value)</code> 检查集合中是否有 <code>value</code> 值。如果集合中有该值，则返回 <code>true</code>；如果不存在就返回 <code>false</code></p><p>💡 类似于数组方法 <code>arr.find(value)</code> 在每次插入值时检查是否重复，但是这样性能会很差，因为这个方法会遍历整个数组来检查每个元素。Set 内部对唯一性检查进行了更好的优化。</p><h2 id="迭代" tabindex="-1"><a class="header-anchor" href="#迭代" aria-hidden="true">#</a> 迭代</h2><p>集合 <code>set</code> 是一个 JavaScript 内置的可迭代对象（默认迭代器与 <code>set.values()</code> 生成的迭代器相同），结合 for-of 循环结构遍历所有元素。</p><p>💡 集合 <code>set</code> 与映射 <code>map</code> 类似，也有三种方法生成迭代器，这是为了与 Map 兼容。</p><ul><li><code>set.keys()</code> 返回一个<strong>值</strong>的迭代器（与 <code>set.values()</code> 作用相同，这是为了兼容 Map），可遍历并返回所有的值</li><li><code>set.values()</code> 返回一个值的迭代器，遍历并返回所有的值</li><li><code>set.entries()</code> 返回一个<strong>值</strong>的迭代器，遍历并返回所有的实体，它的存在也是为了兼容 <code>map</code></li></ul><p>💡 集合与数组类似，提供了内置方法 <code>.forEach( function(value, valueAgain, set) )</code> 对集合的每个元素执行一次回调函数处理。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> set <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;oranges&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;apples&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bananas&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> set<span class="token punctuation">)</span> <span class="token function">alert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// orange, apples, bananas</span>

<span class="token comment">// 与 forEach 相同：</span>
set<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> valueAgain<span class="token punctuation">,</span> <span class="token keyword">set</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>但注意一件有趣的设置<code>forEach(callback)</code> 的回调函数有三个参数，一个 <code>value</code>，然后是 <strong>同一个值</strong> <code>valueAgain</code>，最后是目标对象，这是为了与 Map 兼容，</p><p>💡 迭代器除了可以用于 for-of 循环结构中，还可以使用方法 <code>next()</code> 手动遍历每一项</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> months <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;January&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;February&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;March&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;April&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;May&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;June&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;July&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;August&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;September&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;October&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;November&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;December&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 生成迭代器，使用方法 next() 手动循环访问元素</span>
<span class="token keyword">const</span> iterator <span class="token operator">=</span> months<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Object {value: &#39;January&#39;, done: false}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>⚠️ 在 Set 中迭代总是按照值插入的顺序进行的，所以我们不能说这些集合是无序的，但是我们不能对元素进行重新排序，也不能直接按其编号来获取元素。</p><h2 id="弱集合" tabindex="-1"><a class="header-anchor" href="#弱集合" aria-hidden="true">#</a> 弱集合</h2><p>根据 <a href="/blog-web/frontend/JavaScript/%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6.html" class="">垃圾回收</a> 规则可知 JavaScript 引擎在值可访问（并可能被使用）时将其存储在内存中，并不会将空间进行回收，⚠️ 通常当对象、数组这类数据结构在内存中时，它们的子元素，如对象的属性、数组的元素都是可以访问的（<strong>即使相应的变量/主存储器已经被覆盖</strong>），这会造成回收清理很麻烦。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;John&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>   <span class="token comment">// 该对象能被访问，john 是它的引用</span>
<span class="token comment">// 覆盖引用</span>
john <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>   <span class="token comment">// 该对象将会被从内存中清除</span>

<span class="token comment">// 当对象引用在数组结构中</span>
<span class="token keyword">let</span> Ben <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Ben&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span> Ben <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 覆盖引用</span>
Ben <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token comment">// john 被存储在数组里, 所以它不会被垃圾回收机制回收</span>
array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">// {name: &quot;Ben&quot;} 仍然可以通过 array[0] 来获取它</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>如果使用对象作为 Set 元素，那么当 Set 存在时，该对象也将存在（即使引用该对象的变量已经被重置，该内存空间也不会被回收），这会造成无用资源占用内存的问题，可以使用另一种称为 <code>WeakSet</code> 弱集合的数据结构代替，以解决垃圾回收的问题。</p><p><code>WeakSet</code>与 <code>set</code> 很像，最根本的不同是<strong>它不会阻止垃圾回收机制回收对象以释放内存空间</strong>。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> Thomson <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Thomson&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> weakSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
weakSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>Thomson<span class="token punctuation">)</span><span class="token punctuation">;</span>

Thomson <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>   <span class="token comment">// 覆盖引用，对象 { name: &quot;Thomson&quot; } 被回收</span>
weakSet<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>Thomson<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// false</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>此外它还有以下关键区别：</p><ul><li>只能向 <code>WeakSet</code> 添加对象（而不能是原始值），如果你尝试添加对象以外的内容系统将报错</li><li>对象只有在其它某个（些）地方能被访问的时候（主存储器未被覆盖），才能留在弱集合中。</li><li><code>WeakSet</code> 支持方法 <code>.add()</code>、<code>.has()</code>、<code>.delete()</code> 但无法迭代（即不支持方法 <code>.keys()</code>、<code>.values()</code> 等生成迭代器）</li><li>不支持 <code>size</code> 属性，没有 <code>.clear()</code> 方法</li></ul><p>💡 弱集合 <code>WeakSet</code> 不支持引用所有键或其计数的方法和属性，仅允许单个操作。这种限制是由其工作原理决定的，如果一个对象丢失了其它所有引用（像上面示例中对象 <code>{ name: &quot;Ben&quot; }</code> 唯一引用是变量 <code>Ben</code>，被重置为 <code>null</code>），那么它就会被垃圾回收机制自动回收。但是在从技术的角度并不能准确知道 <strong>何时会被回收</strong>，这由 JavaScript 引擎决定的。因此，<strong>从技术上讲 <code>WeakMap</code> 的当前元素的数量是未知的</strong>。JavaScript 引擎可能清理了其中的垃圾，可能没清理，也可能清理了一部分。因此暂不支持访问 <code>WeakMap</code> 的所有键/值的方法。</p><p>弱集合 <code>WeakSet</code> 一般充当额外的存储空间，存储与对象相关的「是/否」信息的事实，即当对象相关的信息为真时，该对象会存储在弱集合种；而当主存储器被覆盖（对象引用被「移除」）对象也会从弱集合中回收，表示对象相关信息为否。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 使用弱集合记录追踪访问过网站的用户</span>
<span class="token keyword">let</span> visitedSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> john <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;John&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> pete <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Pete&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> mary <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;Mary&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

visitedSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>john<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// John 访问了我们</span>
visitedSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pete<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 然后是 Pete</span>
visitedSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>john<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// John 再次访问</span>

<span class="token comment">// visitedSet 现在有两个用户了</span>

<span class="token comment">// 检查 John 是否来访过？</span>
<span class="token function">alert</span><span class="token punctuation">(</span>visitedSet<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>john<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token comment">// 检查 Mary 是否来访过？</span>
<span class="token function">alert</span><span class="token punctuation">(</span>visitedSet<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>mary<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

john <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>   <span class="token comment">// 同时 { name: &quot;John&quot; } 对象引用会从弱集合中回收移除</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>💡 WeakSet 一般被用作「主要」对象存储之外的「辅助」数据结构。一旦将对象从主存储器（变量引用被重置）中删除，如果该对象仅被用作 WeakSet 元素，那么它将被自动清除。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">更新时间: </span><span class="meta-item-info">2021/10/14 上午9:14:13</span></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><div style="width:0px;" class="catalog-container absolute top-0 right-0 h-full hidden lg:block"><div class="headings-container sticky top-36" data-v-c28348e0><ul class="max-w-max m-2 pl-7 xl:pl-16 2xl:pl-20 py-4 opacity-50 hover:opacity-100 transition-all duration-300" data-v-c28348e0><!--[--><!--]--></ul></div></div><div style="display:none;" tabindex="0" class="sidebar-container fixed inset-y-0 left-0 z-20 lg:hidden opacity-10 hover:opacity-95"><div class="headings-container px-2 space-y-2 transition-all duration-300 py-20" data-v-6eed9461><!--[--><!--]--></div></div></div><footer class="bg-gray-200 p-8 grid grid-cols-1 md:grid-cols-3 gap-4 items-center"><div class="flex justify-center md:justify-start items-center"><a class="p-2 hover:bg-gray-300 rounded-md" href="https://benbinbin.github.io/" target="_blank"><img src="/blog-web/images/avatar.png" alt="avatar" class="w-10 h-10 rounded-full"></a></div><div class="text-center space-y-0.5"><p class="text-sm text-gray-600"> ©2021 <span class="author">Benbinbin</span>. All Right Reserved. </p><p class="text-xs text-center text-gray-400"> 除特殊说明外，本站的文章遵循 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" target="_blank" class="text-blue-400">CC-BY-SA-4.0</a> 协议 </p><p class="text-xs text-center text-gray-400"> 网站主题采用 <a href="https://github.com/Benbinbin/two-dishes-one-fish" target="_blank" class="text-blue-400">Two Dishes One Fish</a></p></div><div class="btn-container flex justify-center md:justify-end items-center space-x-0.5"><!--[--><a class="p-2 hover:bg-gray-300 rounded-md" href="mailto:benthomsonbin@gmail.com" target=""><img src="/blog-web/images/icons/email.svg" alt="email" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://github.com/Benbinbin" target="_blank"><img src="/blog-web/images/icons/github.svg" alt="github" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://juejin.cn/user/3175045314389278/posts" target="_blank"><img src="/blog-web/images/icons/juejin.svg" alt="juejin" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://dribbble.com/BinBinDesign" target="_blank"><img src="/blog-web/images/icons/dribbble.svg" alt="dribbble" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://twitter.com/Benbinbin_fun" target="_blank"><img src="/blog-web/images/icons/twitter.svg" alt="twitter" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://weibo.com/binbindesign" target="_blank"><img src="/blog-web/images/icons/weibo.svg" alt="weibo" class="w-auto h-6"></a><!--]--></div></footer></div><!--]--></div>
    <script type="module" src="/blog-web/assets/app.43fe0c63.js" defer></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/blog-web/images/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.css"><title>正则表达式 | Blog</title><meta name="description" content="A blog and knowledge management system about web.">
    <link rel="modulepreload" href="/blog-web/assets/app.43fe0c63.js"><link rel="modulepreload" href="/blog-web/assets/正则表达式.html.7670121f.js"><link rel="modulepreload" href="/blog-web/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/blog-web/assets/正则表达式.html.3129b5a0.js">
    <link rel="stylesheet" href="/blog-web/assets/style.b42fd117.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="min-h-screen flex flex-col"><nav class="px-4 sm:px-8 py-2 flex justify-between items-center sticky top-0 z-30 bg-white"><div class="left flex items-center space-x-0.5"><!--[--><button class="text-gray-400 hover:bg-gray-100 catelog-btn p-2 select-none text-sm font-bold hover:text-gray-900 rounded-md lg:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></svg></button><!--]--><a class="avatar p-2 hover:bg-gray-100 rounded-md" href="/blog-web/#"><img src="/blog-web/images/avatar.png" alt="avatar" class="w-10 h-10 rounded-full"></a></div><div class="right hidden sm:flex items-center space-x-0.5"><!--[--><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">All</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Network</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Frontend</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Backend</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Project</button><!--]--><!--[--><button class="text-gray-900 bg-gray-100 hover:bg-gray-200 p-2 select-none text-sm font-bold hover:text-gray-900 rounded-md hidden lg:block"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></svg></button><!--]--></div><div class="more-container sm:hidden relative"><button style="" class="p-2 select-none hover:bg-gray-100 rounded-md text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"></path></svg></button><button style="display:none;" class="p-2 select-none hover:bg-gray-100 rounded-md text-red-400 hover:text-red-500"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path></svg></button><div style="display:none;" class="more-modal p-2 absolute top-10 right-0 z-10 flex flex-col space-y-2 bg-gray-100 rounded-md opacity-90"><!--[--><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">All</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Network</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Frontend</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Backend</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Project</button><!--]--></div></div></nav><div class="relative flex-grow"><div class="theme-container no-navbar no-sidebar"><!--[--><!----><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="正则表达式" tabindex="-1"><a class="header-anchor" href="#正则表达式" aria-hidden="true">#</a> 正则表达式</h1><p>参考：</p><ul><li><a href="https://zh.javascript.info/regular-expressions" target="_blank" rel="noopener noreferrer">正则表达式 | javascript.info</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener noreferrer">正则表达式 - JavaScript | MDN</a></li><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp#character-classes" target="_blank" rel="noopener noreferrer">RegExp - JavaScript | MDN</a></li><li><a href="https://juejin.im/post/5965943ff265da6c30653879" target="_blank" rel="noopener noreferrer">JS正则表达式完整教程（略长）</a> | <a href="./attachments/JavaScript%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BF%B7%E4%BD%A0%E4%B9%A6%EF%BC%881.1%E7%89%88%EF%BC%89.pdf">pdf</a></li></ul><p>正则表达式 regexp, reg 使用普通字符或普通字符与特殊字符组成的文字模式，它包含 <strong>模式</strong> 和可选的 <strong>修饰符</strong>，该模式用于查找匹配字符串中字符组合，它是一个<strong>查找和替换字符串的强有力的工具</strong>。</p><p>💡 在 JavaScript中，正则表达式也是对象。</p><h2 id="创建正则表达式" tabindex="-1"><a class="header-anchor" href="#创建正则表达式" aria-hidden="true">#</a> 创建正则表达式</h2><p>创建一个正则表达式对象有两种语法。</p><ul><li>方法一：正则表达式字面量</li></ul><p>使用一个正则表达式字面量创建正则表达式，其由包含在斜杠 <code>//</code> 之间的模式组成，斜杠 <code>/</code> 会告诉 JavaScript 我们正在创建一个正则表达式，它的作用类似于字符串的引号。</p><p>💡 通常我们使用的都是简短语法 <code>/reg/</code>但是它<strong>不接受任何变量插入</strong>，所以我们必须在写代码的时候就知道确切的 regexp，因此当正则表达式保持不变时，使用此方法可获得更好的性能。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">ab+c</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>方法二：构造函数 <code>RegExp()</code></li></ul><p>调用 RegExp 对象的构造函数 <code>RegExp()</code> 创建正则表达式。以字符串形式（使用双引号 <code>&quot;&quot;</code> 输入）。</p><p>💡 该方法可以动态地构造模式，当正则表达式的模式将会改变，或者不知道模式需要从其他来源获取它，如用户输入，可使用该方法。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> search <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">&quot;What you want to search:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="用法" tabindex="-1"><a class="header-anchor" href="#用法" aria-hidden="true">#</a> 用法</h2><p>正则表达式有多种<a href="https://zh.javascript.info/regexp-methods" target="_blank" rel="noopener noreferrer">方法</a>。</p><h3 id="search" tabindex="-1"><a class="header-anchor" href="#search" aria-hidden="true">#</a> search()</h3><p>如果要获取匹配项的<strong>索引</strong>，可以使用 <a href="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/String/search" target="_blank" rel="noopener noreferrer"><code>str.search(regexp)</code> 方法</a> ，返回匹配项在字符串中的索引（第一个匹配项）；如果没有匹配项就返回 <code>-1</code>。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;I love JavaScript!&quot;</span><span class="token punctuation">;</span>   <span class="token comment">// 将在这里搜索</span>

<span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">love</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> str<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 2</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="match" tabindex="-1"><a class="header-anchor" href="#match" aria-hidden="true">#</a> match()</h3><p>如果要获取匹配的<strong>字符串</strong>，可以使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/match" target="_blank" rel="noopener noreferrer"><code>str.match(regexp)</code> 方法</a>，返回返回一个数组；如果没有匹配项，我们得到的不是一个空数组，而是 <code>null</code>。</p><ul><li>如果正则表达式尾部有 <code>g</code> 标志会返回与完整正则表达式匹配的所有结果，但不会返回<strong>捕获组</strong></li><li>如果正则表达式尾部没有使用 <code>g</code> 标志就会返回第一个完整匹配（作为数组的第 <code>0</code> 项）及其相关的捕获组（作为数组的第 <code>1</code> 及第 <code>1+</code> 项）</li></ul><p>💡 这些方法都需要传入正则表达式对象作为参数，如果传入一个非正则表达式对象，则会隐式地使用 <code>new RegExp()</code> 将其转换为一个 RegExp。</p><h3 id="test" tabindex="-1"><a class="header-anchor" href="#test" aria-hidden="true">#</a> test()</h3><p>如果希望基于字符串中是否有匹配项返回一个<strong>布尔值</strong>，可以使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test" target="_blank" rel="noopener noreferrer"><code>regexp.test(str)</code> 方法</a>，如果正则表达式与指定的字符串匹配 ，返回 <code>true</code>；否则<code>false</code>。</p><p>⚠️ 相同的全局正则表达式在不同的源字符串上测试可能会失败，因为 <code>regexp.test</code> 的调用会增加 <code>regexp.lastIndex</code> 属性值，因此在另一个字符串中的搜索可能是从非 0 位置开始的。如要解决这个问题，我们可以在每次搜索之前设置 <code>regexp.lastIndex = 0</code>。或者，不调用正则表达式的方法，而是使用字符串方法 <code>str.match/search/...</code>，这些方法不用 <code>lastIndex</code>。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">javascript</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>  <span class="token comment">// （新建 regexp：regexp.lastIndex=0)</span>

<span class="token comment">// 在同一文本上调用 regexp.test 两次</span>
<span class="token function">alert</span><span class="token punctuation">(</span> regexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;javascript&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true（现在 regexp.lastIndex=10）</span>
<span class="token comment">// 在第二个测试中 regexp.lastIndex 不为零</span>
<span class="token function">alert</span><span class="token punctuation">(</span> regexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;javascript&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false`</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="replace" tabindex="-1"><a class="header-anchor" href="#replace" aria-hidden="true">#</a> replace()</h3><p>字符串方法 <code>str.replace(regexp, replacement)</code> 用第二个参数 <code>replacement</code> 替换 <code>str</code> 中匹配 <code>regexp</code> 的捕获组，其中参数 <code>replacement</code> 可以使用 <code>$n</code> 来反向引用相应的捕获组，其中 <code>n</code> 是组号（索引）。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;John Bull&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\w+) (\w+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regexp<span class="token punctuation">,</span> <span class="token string">&#39;$2, $1&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Bull, John</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>: 有一个陷阱：当 <code>replace</code> 的第一个参数是字符串时，它仅替换第一个匹配项。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 用冒号替换连字符</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;12-34-56&#39;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 12:34-56</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如要找到<strong>所有</strong>的连字符，不应该用字符串 <code>&quot;-&quot;</code>，而应使用<strong>带 <code>g</code> 修饰符</strong>的正则表达式 <code>/-/g</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 将连字符替换为冒号</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&#39;12-34-56&#39;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">-</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;:&quot;</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>  <span class="token comment">// 12:34:56</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>⚠️ 另一个陷阱：当 <code>replace</code> 的第二个参数是字符串，仅替换第一个匹配项，应该使用回调函数（一个用来创建新子字符串的函数）可以对每次匹配都调用。</p><p>⚠️ 原字符串不变，而是返回修改了的匹配字符。</p><h2 id="模式修饰符" tabindex="-1"><a class="header-anchor" href="#模式修饰符" aria-hidden="true">#</a> 模式修饰符</h2><p>正则表达式的修饰符可能会影响搜索结果。如果不使用修饰符和特殊标志，正则表达式的搜索就等同于单纯的子字符串查找；而使用了修饰符后可以「扩展」正则表达式的匹配范围。</p><p>在 JavaScript 中有 5 个修饰符：</p><ul><li><code>i</code> ignoreCase 搜索时不区分大小写（搜索默认是区分大小写的）。</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;I love JavaScript!&quot;</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> str<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">LOVE</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -1（没找到）</span>
<span class="token function">alert</span><span class="token punctuation">(</span> str<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">LOVE</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><p><code>g</code> global 搜索时会查找所有的匹配项，而不只是第一个。</p></li><li><p><code>m</code> multiline 多行模式，这仅仅会影响 <code>^</code> 和 <code>$</code> 锚符的行为。在多行文本中，默认情况下锚符 <code>^</code> 仅仅匹配文本的开头，而在多行模式下，锚符 <code>^</code> 就<strong>可以匹配每一行的开头</strong>；锚符 <code>$</code> 行为也相似。</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  1st place: Winnie
  2nd place: Piglet
  33rd place: Eeyore</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 1</span>
<span class="token function">alert</span><span class="token punctuation">(</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gm</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 1, 2, 33</span>
<span class="token function">alert</span><span class="token punctuation">(</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\w+$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gim</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// Winnie,Piglet,Eeyore</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li><p><code>u</code> 开启完整的 unicode 支持。该修饰符能够修正对于<strong>代理对</strong>的处理。更详细的内容见 <a href="https://zh.javascript.info/regexp-unicode" target="_blank" rel="noopener noreferrer">Unicode：修饰符 尾部 <code>&quot;u&quot;</code> 和 <code>class \\p{...}</code></a>。</p></li><li><p><code>y</code> 粘滞模式</p></li></ul><h2 id="特殊的符号" tabindex="-1"><a class="header-anchor" href="#特殊的符号" aria-hidden="true">#</a> 特殊的符号</h2><p>一个正则表达式模式 Regexp 一般是由简单的字符和可选的特殊含义的符号（<strong>一般与符号 <code>\</code> 构成</strong>）组合而成的，这些特殊的符号用以添加额外的匹配规则。</p><h3 id="字符类" tabindex="-1"><a class="header-anchor" href="#字符类" aria-hidden="true">#</a> 字符类</h3><p>字符类 Character classes 是一个特殊的符号，匹配特定类型的符号</p><p>最常用的字符类：</p><ul><li><p><code>\d</code>（取自 digit）匹配数字：从 <code>0</code> 到 <code>9</code> 的字符。</p></li><li><p><code>\s</code>（取自 space）匹配空格符号：包括空格，制表符 <code>\t</code>、换行符 <code>\n</code> 和其他少数稀有字符（如 <code>\v</code>，<code>\f</code> 和 <code>\r</code>）。</p></li><li><p><code>\w</code>（取自 word ）匹配单个字符：拉丁字母或数字或下划线 <code>_</code>。 ⚠️ 非拉丁字母（如西里尔字母或印地文）不属于 <code>\w</code>。</p></li><li><p><code>.</code> 匹配<strong>除换行符之外</strong>的任何字符。⚠️ 点 <code>.</code> 表示任何字符，但不是「缺少字符」，即必须有一个与之匹配的字符。 💡 可以在正则表达式后使用 <strong><code>s</code> 修饰符</strong>让字符 <code>.</code> 匹配字符包括换行符，即可以匹配所有字符，⚠️ 但是这个标志浏览器兼容性较差。 💡 可以使用模式 <code>[\s\S]</code> 匹配空格字符或非空格字符，即匹配任何字符。</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;CS4&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">CS.4</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null, no match because there&#39;s no character for the dot</span>

<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;A\nB&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">A.B</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null (no match)</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;A\nB&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">A.B</span><span class="token regex-delimiter">/</span><span class="token regex-flags">s</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// A\nB (match!)</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;A\nB&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">A[\s\S]B</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// A\nB (match!)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>通过组合这些字符类可以匹配一类特定的字符串</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;I love HTML5!&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s\w\w\w\w\d</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#39; HTML5&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p><img src="data:image/png;base64,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" alt="字符类"></p><p>💡 对于每个字符类，都有一个<strong>反向类</strong>，用相同的字母表示但要以<strong>大写</strong>书写形式。「反向」表示它与相应的<strong>余下字符</strong>匹配</p><ul><li><p><code>\D</code> 匹配非数字字符：除 <code>\d</code> 以外的任何字符，如字母。</p></li><li><p><code>\S</code> 匹配非空格符号：除 <code>\s</code> 以外的任何字符，如字母。</p></li><li><p><code>\W</code> 匹配非单字字符：除 <code>\w</code> 以外的任何字符，如非拉丁字母或空格。</p></li></ul><h3 id="锚点" tabindex="-1"><a class="header-anchor" href="#锚点" aria-hidden="true">#</a> 锚点</h3><p>符号 <code>^</code> 和 <code>$</code> 称为锚点，在正则表达式中插入符号 <code>^</code> 匹配文本开头，符号 <code>$</code> 则匹配文本末尾，而不匹配字符串中间的部分。</p><p>💡 这两个锚点 <code>^regexp$</code> 放在一起常常被用于测试一个字符串是否<strong>完全匹配</strong>一个模式，如测试用户的输入是否符合正确的格式。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 测试字符串是否属于 12:34 格式的时间</span>
<span class="token keyword">let</span> goodInput <span class="token operator">=</span> <span class="token string">&quot;12:34&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> badInput <span class="token operator">=</span> <span class="token string">&quot;12:345&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d\d:\d\d$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> regexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>goodInput<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>
<span class="token function">alert</span><span class="token punctuation">(</span> regexp<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>badInput<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// false</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>⚠️ 锚点 <code>^</code> 和 <code>$</code> 属于测试，它们的<strong>宽度为零</strong>，即它们并不匹配一个具体的字符，而是让正则引擎测试所表示的条件（在文本开头/文本末尾开始匹配）。 💡 可以分别用 <code>startsWith/endsWith</code> 来代替符号 <code>^</code> 和 <code>$</code></p><h3 id="边界词" tabindex="-1"><a class="header-anchor" href="#边界词" aria-hidden="true">#</a> 边界词</h3><p>词边界 <code>\b</code> 是一种检查，就像 <code>^</code> 和 <code>$</code> 一样，它可以限定正则表达式引擎仅检查字符串的<strong>词边界</strong>，即检查位置的一侧是否匹配 <code>\w</code>，而另一侧则不匹配 <code>\w</code>。</p><p>有三种不同的位置可作为词边界：</p><ul><li>在字符串开头，如果<strong>第一个字符是单词字符 <code>\w</code></strong></li><li>在字符串中的两个字符之间，<strong>其中一个是单词字符 <code>\w</code>，另一个不是</strong></li><li>在字符串末尾，如果<strong>最后一个字符是单词字符 <code>\w</code></strong></li></ul><p>字符串 <code>Hello, Java!</code> 词边界位置如下标注</p><p><img src="data:image/png;base64,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" alt="词边界"></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;Hello, Java!&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\bHello\b</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Hello</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;Hello, Java!&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\bJava\b</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Java</span>

<span class="token comment">// 因为 l 之后没有词边界，因此 \bHell\b 没有匹配项</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;Hello, Java!&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\bHell\b</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// null (no match)</span>
<span class="token comment">// 因为感叹号不是单词 \w，所以其后没有词边界，因此 Java!\b 没有匹配项</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;Hello, Java!&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\bJava!\b</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null (no match)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>💡 <code>\b</code> 既可以用于检查单词（但不适用于其他字符，如西里尔字母 cyrillic letters 或象形文字 hieroglyphs），也可以用于数字。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 查找时间的格式为 hours:minutes 的匹配项</span>
<span class="token comment">// 其中小时和分钟都是两位数，如 09:00</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;Breakfast at 09:00 in the room 123:456.&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\b\d\d:\d\d\b</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 09:00</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="集合和范围" tabindex="-1"><a class="header-anchor" href="#集合和范围" aria-hidden="true">#</a> 集合和范围</h3><p>在方括号 <code>[…]</code> 中的几个字符或者字符类意味着「搜索给定的字符中的<strong>任意一个</strong>」。</p><p>💡 字符类是某些字符集的简写</p><ul><li><strong>\d</strong> 和 <code>[0-9]</code> 相同，</li><li><strong>\w</strong> 和 <code>[a-zA-Z0-9_]</code> 相同，</li><li><strong>\s</strong> 和 <code>[\t\n\v\f\r ]</code> 外加少量罕见的 unicode 空格字符相同。</li></ul><p>💡 如果我们需要匹配特殊字符本身，一般需要在正则表达式中对这些特殊字符进行转义。在方括号表示中绝大多数特殊字符<strong>可以在不转义的情况下使用</strong>，如查询模式 <code>[.,]</code> 将会寻找一个为点或者逗号的字符；但是如果你为了「以防万一」转义了它们，这也不会有任何问题：</p><ul><li>表示一个点符号 <code>&#39;.&#39;</code></li><li>表示一个加号 <code>&#39;+&#39;</code></li><li>表示一个括号 <code>&#39;( )&#39;</code></li><li>在开头或者结尾表示一个破折号（在这些位置该符号表示的就不是一个范围，当它位于其它字符之间有特殊含义，表示范围）<code>[-pattern]</code> 或 <code>[pattern-]</code></li><li>在不是开头的位置表示一个插入符号（在开头位置该符号表示的是排除）<code>&#39;^&#39;</code></li><li>表示一个开口的方括号符号 <code>&#39;[&#39;</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 并不需要转义</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[-().^+]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;1 + 2 - 3&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 匹配 +，-</span>

<span class="token comment">//转义其中的所有字符</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[\-\(\)\.\^\+]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;1 + 2 - 3&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 仍能正常工作：+，-</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="集合" tabindex="-1"><a class="header-anchor" href="#集合" aria-hidden="true">#</a> 集合</h4><p>方括号 <code>[…]</code> 罗列多个需要匹配的字符集合，但它们在匹配中只会对应其中的一个。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 查找 [t 或者 m]（不区分大小写），然后再匹配 &quot;op&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;Mop top&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[tm]op</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Mop&quot;, &quot;top&quot;</span>

<span class="token comment">// 查找 &quot;V&quot;，然后匹配 [o 或者 i]，之后再匹配 &quot;la&quot;</span>
<span class="token comment">// 由于只匹配集合中的一个字符就跳出集合，o 匹配上了，然后正则表达式的 l 和字符串之后的 i 就不匹配了</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;Voila&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">V[oi]la</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// null，并没有匹配上</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>💡 可以在 <code>[…]</code> 里面使用字符类，如想要查找单词字符 <code>\w</code> 或连字符 <code>-</code>，则该集合为 <code>[\w-]</code></p><h4 id="范围" tabindex="-1"><a class="header-anchor" href="#范围" aria-hidden="true">#</a> 范围</h4><p>方括号 <code>[…]</code> 中可以是字符的（多个）范围，如 <code>[a-z]</code> 会匹配从 <code>a</code> 到 <code>z</code> 范围内的字母；<code>[0-5]</code> 表示从 <code>0</code> 到 <code>5</code> 的数字。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 首先匹配 &quot;x&quot; 字符</span>
<span class="token comment">// 再匹配两个数字或者位于 A 到 F 范围内的字符</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;Exception 0xAF&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">x[0-9A-F][0-9A-F]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// xAF</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>💡 <code>[0-9A-F]</code> 表示两个范围，但它搜索（匹配）一个字符，满足数字 <code>0</code> 到 <code>9</code> 或字母 <code>A</code> 到 <code>F</code>；如果还想查找小写字母，则可以添加范围 <code>a-f</code>（即 <code>[0-9A-Fa-f]</code>）或添加修饰符 <code>i</code>。</p><p>由于字符类 <code>\w</code> 是简写的 <code>[a-zA-Z0-9_]</code>，因此无法找到中文象形文字，西里尔字母等。可以使用集合编写一个更通用的模式，该模式可以查找任何语言中的文字字符，使用 <a href="https://zh.javascript.info/regexp-character-sets-and-ranges#shi-li-duo-yu-yan-w" target="_blank" rel="noopener noreferrer">Unicode 属性</a>：<code>[\p{Alpha}\p{M}\p{Nd}\p{Pc}\p{Join_C}]</code></p><p>💡 除了普通的范围匹配，还可以在匹配查询集合或范围的<strong>开头添加符号 <code>^</code> 来表示排除给定字符</strong>之外的任意字符的匹配。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 匹配除了数字、空格、字母 A 到 Z 或 a 到 z之外的字符</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;alice15@gmail.com&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[^\d\sA-Z]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// @ 和 .</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="量词" tabindex="-1"><a class="header-anchor" href="#量词" aria-hidden="true">#</a> 量词</h3><p>在正则表达式中量词是用来形容所需要匹配的数量的词，在一个字符（或一个字符类等）后跟着一个量词以指出我们具体需要的数量，最常见的量词是 <code>{n}</code>；也可以将限制范围的数字放入括号中（可以省略上限），表示匹配在一定数量范围的中的词。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \d{5} 表示 5 位的数字，如同 \d\d\d\d\d</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;I&#39;m 12345 years old&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d{5}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  &quot;12345&quot;</span>
<span class="token comment">// 查找位数为 3 至 5 位的数字</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;I&#39;m not 12, but 1234 years old&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d{3,5}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;1234&quot;</span>
<span class="token comment">// 查找位数大于或等于 3 的数字</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;I&#39;m not 12, but 345678 years old&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d{3,}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;345678&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>💡 大多数常用的量词都可以有缩写</p><ul><li>符号 <code>+</code> 是 <code>{1,}</code> 的缩写，代表匹配数量为<strong>一个或多个</strong>的词。</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \d+ 用来查找所有数字</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;+7(903)-123-45-67&quot;</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7,903,123,45,67</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>符号 <code>?</code> 是 <code>{0,1}</code> 的缩写，代表匹配数量为<strong>零个或一个</strong>的词，即它使得符号变得可选。</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;Should I write color or colour?&quot;</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">colou?r</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// color, colour</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>符号 <code>*</code> 是 <code>{0,}</code> 的缩写，代表匹配数量为<strong>零个或多个</strong>的词，即这个字符可以多次出现或不出现。</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;100 10 1&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d0*</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100, 10, 1</span>
 <span class="token comment">// 与 &#39;+&#39;（一个或多个）作比较</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;100 10 1&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d0+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100, 10</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>💡 量词有<strong>贪婪模式</strong>和<strong>懒惰模式</strong><a href="https://zh.javascript.info/regexp-greedy-and-lazy" target="_blank" rel="noopener noreferrer">两种工作模式</a>，特别在使用符号 <code>*</code> 和 <code>+</code> 进行匹配多个（无限）数量的字符时，这两种不同匹配行为的模式会得到的结果：</p><ul><li><p>贪婪模式：默认情况下，正则表达式引擎会尝试尽可能多地重复量词。如 <code>\d+</code> 检测所有可能的字符。当不可能检测更多（没有更多的字符或到达字符串末尾）时，然后它再匹配模式的剩余部分。如果没有匹配，则减少重复的次数（<strong><a href="https://zh.javascript.info/regexp-greedy-and-lazy#tan-lan-sou-suo" target="_blank" rel="noopener noreferrer">回溯</a></strong>），并再次尝试。</p></li><li><p>懒惰模式：在每次重复量词之前，引擎<a href="https://zh.javascript.info/regexp-greedy-and-lazy#lan-duo-mo-shi" target="_blank" rel="noopener noreferrer">会先去尝试匹配模式的剩余部分</a>，通过在量词后添加问号 <code>?</code> 来启用该模式。。</p></li></ul><h3 id="选择" tabindex="-1"><a class="header-anchor" href="#选择" aria-hidden="true">#</a> 选择 |</h3><p>选择 OR 是正则表达式中的一个术语，实际上是一个简单的「或」操作，在正则表达式中用竖线 <code>|</code> 表示。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 找出编程语言：HTML、PHP、Java 或 JavaScript</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">html|php|css|java(script)?</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;First HTML appeared, then CSS, then JavaScript&quot;</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#39;HTML&#39;, &#39;CSS&#39;, &#39;JavaScript&#39;`</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>💡 集合具有相似的功能，如 <code>gr[ae]y</code> 匹配 <code>gray</code> 或 <code>grey</code>；但不同的是选择符号 <code>|</code> 并非在字符级别生效，而是在表达式级别，如 <code>gr(a|e)y</code> 严格等同 <code>gr[ae]y</code>，而 <code>gra|ey</code> 则匹配 <code>gra</code> 或 <code>ey</code>。因此通常<strong>用圆括号把模式中的选择部分括起来</strong> <code>before(XXX|YYY)after</code>。</p><h2 id="特殊字符转义" tabindex="-1"><a class="header-anchor" href="#特殊字符转义" aria-hidden="true">#</a> 特殊字符转义</h2><p>正则表达式中字符 <code>[ \ ^ $ . | ? * + ( )</code> 表示特殊含义，以使正则表达式可以实现更强大的搜索功能（匹配更多模式的字符串）</p><p>但是如果我们需要在字符串中匹配这些特殊符号，即在 RegExp 中将这些字符作为<strong>常规字符</strong>使用时，需要在它前面加个反斜杠 <code>\</code>，以实现转义一个字符。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 正则表达式中点号意味着「除了换行符以外的任意字符」，但如果我们只需要将点号作为模板匹配其本身来使用时</span>
<span class="token comment">// 即真正表示对「一个点号」查询的时候，可以在点号前加一个反斜杠，将其转义作为普通字符</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token string">&quot;Chapter 5.1&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d\.\d</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 5.1</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>💡 斜杠符号 <code>&#39;/&#39;</code> 虽然并不是一个特殊符号，但是它被用于在 Javascript 中作为开启和关闭正则表达式<code>/...pattern.../</code> 的标志，所以我们也应该转义它。但如果使用另一种创建正则表达式的方式 <code>new RegExp()</code> 则不需要转义斜杠</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// &#39;/&#39;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// &#39;/&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>⚠️ <strong>如果我们使用 <code>new RegExp()</code> 创建一个正则表达式实例，而其中使用了符号 <code>\</code> 时，需要对其做一些额外的转义，需要双斜杠 <code>\\</code></strong>。原因就在于字符串转义规则，反斜杠表示转义或者类似 <code>\n</code> 这种只能在字符串中使用的特殊字符，当调用 <code>new RegExp()</code> 创建一个正则表达式实例，在解析时会造成 <strong>「消费」反斜杠</strong> 获得一个没有反斜杠的字符串：</p><ul><li><code>\n</code> 变成一个换行字符</li><li><code>\u1234</code> 变成包含该码位的 Unicode 字符</li><li>其它有些并没有特殊的含义，就像 <code>\d</code> 或者 <code>\z</code>，碰到这种情况的话会把反斜杠移除</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 不成功</span>
<span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;\d\.\d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;\d\.\d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// d.d，解析时会造成「消费」反斜杠</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;Chapter 5.1&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// null</span>

<span class="token comment">// 通过使用双斜杠进行再一次额外转义，即可成功</span>
<span class="token keyword">let</span> regStr <span class="token operator">=</span> <span class="token string">&quot;\\d\\.\\d&quot;</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>regStr<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// \d\.\d (correct now)</span>
<span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>regStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&quot;Chapter 5.1&quot;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 5.1</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="捕获组" tabindex="-1"><a class="header-anchor" href="#捕获组" aria-hidden="true">#</a> 捕获组</h2><p>正则表达式中的一部分可以用括号括起来 <code>(...)</code> 称为<strong>捕获组 capturing group</strong>，会有两个影响：</p><ul><li><p>如果我们将量词放在括号后，则它将括号视为一个整体</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 不带括号，模式 go+ 匹配 g 字符后 o 重复一次或多次，如 goooo</span>
<span class="token comment">// 带括号将字符组合，模式 (go)+ 匹配 go，gogo，gogogo 等</span>
<span class="token function">alert</span><span class="token punctuation">(</span> <span class="token string">&#39;Gogogo now!&#39;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(go)+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;Gogogo&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p><strong>如果正则表达式没有添加修饰符 <code>g</code></strong>，则使用 <code>str.match(regexp)</code> 返回的是一个数组，其中第一个元素是包括完全匹配的内容，余下的元素是括号（捕获组）在字符串所匹配的内容（如果有多个捕获组，括号从左到右编号，依次对应于数组的元素），这样便于我们反向引用匹配的一部分。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\d{4})-(\d{2})-(\d{2})</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017-06-12&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 方法 replace 实现对字符串的替换，其 $1、$2、$3 指代相应的分组</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> <span class="token string">&quot;$2/$3/$1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;06/12/2017&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>⚠️ 如果正则表达式添加了修饰符 <code>g</code>，则 <code>str.match(regexp)</code> 返回的也是一个数组，但元素不再是捕获组的内容，而元素都是完全匹配的内容。如果希望使用修饰符 <code>g</code> 也返回所有组，可以使用 <code>matchAll</code> 💡 但 <code>matchAll</code> 是一个新方法，可能需要使用 <a href="https://github.com/ljharb/String.prototype.matchAll" target="_blank" rel="noopener noreferrer">polyfill</a>，它返回包含匹配项的可迭代对象（而不是数组），可以用 <code>Array.from</code> 从中得到一个常规数组。</p></li></ul><p>正则表达式中如果有多个捕获组（可以嵌套），则依据括号从左到右编号，正则引擎会记住它们各自匹配的内容，并允许在结果中（反向引用）获得它。</p><p>方法 <code>str.match(regexp)</code>（如果 <code>regexp</code> 没有 <code>g</code> 标志），将查找第一个匹配，但是也返回一个数组：</p><ol><li>在索引 <code>0</code> 处：完全匹配的内容。</li><li>在索引 <code>1</code> 处：第一个括号（捕获组）的内容。</li><li>在索引 <code>2</code> 处：第二个括号（捕获组）的内容。</li><li>…</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;&lt;h1&gt;Hello, world!&lt;/h1&gt;&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> tag <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;(.*?)&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 由于有一个括号，所以返回的数组元素有两个</span>

<span class="token function">alert</span><span class="token punctuation">(</span> tag<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;h1&gt;，完全匹配</span>
<span class="token function">alert</span><span class="token punctuation">(</span> tag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// h1，捕获组</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>💡 如果捕获组是可选的并且在匹配项中不存在（如具有数量词 <code>(...)?</code>），则返回的数组依然保留相应的元素，并且等于 <code>undefined</code>。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> match <span class="token operator">=</span> <span class="token string">&#39;ac&#39;</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a(z)?(c)?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>

<span class="token function">alert</span><span class="token punctuation">(</span> match<span class="token punctuation">.</span>length <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token function">alert</span><span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ac，零索引始终保持完全匹配</span>
<span class="token function">alert</span><span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined，因为 (z)? 没匹配项</span>
<span class="token function">alert</span><span class="token punctuation">(</span> match<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// c</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>💡 括号可以嵌套，编号也从左到右，如在使用正则表达式 <code>&lt;(([a-z]+)\s*([^&gt;]*))&gt;</code> 匹配 <code>&lt;span class=&quot;my&quot;&gt;</code> 时可以提取标签不同部分：</p><ul><li>整个标签内容：<code>span class=&quot;my&quot;</code></li><li>标签名称：<code>span</code></li><li>标签属性：<code>class=&quot;my&quot;</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;&lt;span class=&quot;my&quot;&gt;&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;(([a-z]+)\s*([^&gt;]*))&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;span class=&quot;my&quot;&gt;，零索引始终保持完全匹配</span>
<span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// span class=&quot;my&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// span</span>
<span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// class=&quot;my&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="/blog-web/assets/20200918111505728_31595.45eccb29.png" alt="嵌套括号"></p><p>💡 用数字索引记录和访问命名组很麻烦，可以使用 <code>?&lt;name&gt;</code> 给组命名，然后匹配的组就在 <code>.groups</code> 属性中。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> dateRegexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;year&gt;[0-9]{4})-(?&lt;month&gt;[0-9]{2})-(?&lt;day&gt;[0-9]{2})</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;2019-04-30&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> groups <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>dateRegexp<span class="token punctuation">)</span><span class="token punctuation">.</span>groups<span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>groups<span class="token punctuation">.</span>year<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2019</span>
<span class="token function">alert</span><span class="token punctuation">(</span>groups<span class="token punctuation">.</span>month<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 04</span>
<span class="token function">alert</span><span class="token punctuation">(</span>groups<span class="token punctuation">.</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 30</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>: 有时需要括号结合量词来匹配特定的重复模式，但不希望它们的内容出现在结果中。可以通过在开头添加 <code>?:</code> 来排除组。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&quot;Gogogo John!&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// ?: 从捕获组中排除 &#39;go&#39;</span>
<span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?:go)+ (\w+)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>

<span class="token keyword">let</span> result <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Gogogo John（完全匹配）</span>
<span class="token function">alert</span><span class="token punctuation">(</span> result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// John</span>
<span class="token function">alert</span><span class="token punctuation">(</span> result<span class="token punctuation">.</span>length <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2（数组中没有更多项）</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="反向引用" tabindex="-1"><a class="header-anchor" href="#反向引用" aria-hidden="true">#</a> 反向引用</h2><p>捕获组实际是匹配结果中的一部分，便于我们反向引用。可以在返回的结果数组中以索引方式访问，或使用<a href="#replace()">方法 <code>str.replace()</code></a> 替换组时以 <code>$n</code> 方式访问，还可以在模式本身中使用它们，使用 <code>\N</code> 或 <code>\k&lt;name&gt;</code>（按名反向引用）。</p><p>其中一个应用场景是需要找到带引号的字符串，包括单引号 <code>&#39;...&#39;</code> 或双引号 <code>&quot;...&quot;</code> 两种情况。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 可以将两种引号放在集合中 [&#39;&quot;](.*?)[&#39;&quot;]</span>
<span class="token comment">// 但它会找到带有混合引号的字符串，如 &quot;...&#39; 和 &#39;...&quot;</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">He said: &quot;She&#39;s the one!&quot;.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[&#39;&quot;](.*?)[&#39;&quot;]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>

<span class="token comment">// 不是我们想要的结果</span>
<span class="token function">alert</span><span class="token punctuation">(</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;She&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 为了确保引号完全相同，可以将其包装到捕获组中，并对其进行反向引用</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">He said: &quot;She&#39;s the one!&quot;.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([&#39;&quot;])(.*?)\1</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;She&#39;s the one!&quot;``</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>正则表达式引擎会找到第一个引号 <code>([&#39;&quot;])</code> 并记住其内容（第一个捕获组），<code>\1</code> 在模式中进一步的含义是「查找与第一（捕获）分组相同的文本」，在我们的示例中为完全相同的引号。</p><p>与此类似，<code>\2</code> 表示第二（捕获）分组的内容，<code>\3</code> 第三分组，依此类推。</p><p>💡 在替换字符串中我们使用美元符号 <code>$1</code>，而在模式中使用反斜杠 <code>\1</code>。</p><p>要引用命名组，我们可以使用：<code>\k&lt;name&gt;</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">He said: &quot;She&#39;s the one!&quot;.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;quote&gt;[&#39;&quot;])(.*?)\k&lt;quote&gt;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;She&#39;s the one!&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="断言" tabindex="-1"><a class="header-anchor" href="#断言" aria-hidden="true">#</a> 断言</h2><p>当我们想<strong>根据前面/后面的上下文筛选</strong>出一些东西的时候，结合前瞻断言 look-ahead assertions 和后瞻断言 look-behind assertions（通常被称为「环视断言」）可以快速构建简单的正则表达式</p><table><thead><tr><th>模式</th><th>类型</th><th>匹配</th></tr></thead><tbody><tr><td><code>x(?=y)</code></td><td>前瞻肯定断言</td><td><code>x</code> ，仅当后面跟着 <code>y</code></td></tr><tr><td><code>x(?!y)</code></td><td>前瞻否定断言</td><td><code>x</code> ，仅当后面不跟 <code>y</code></td></tr><tr><td><code>(?&lt;=y)x</code></td><td>后瞻肯定断言</td><td><code>x</code> ，仅当跟在 <code>y</code> 后面</td></tr><tr><td><code>(?&lt;!y)x</code></td><td>后瞻否定断言</td><td><code>x</code> ，仅当不跟在 <code>y</code> 后面</td></tr></tbody></table><p>💡 一般来说，环视断言括号中（前瞻和后瞻）的内容不会成为捕获组的一部分。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">更新时间: </span><span class="meta-item-info">2021/7/6 上午2:38:22</span></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><div style="width:0px;" class="catalog-container absolute top-0 right-0 h-full hidden lg:block"><div class="headings-container sticky top-36" data-v-c28348e0><ul class="max-w-max m-2 pl-7 xl:pl-16 2xl:pl-20 py-4 opacity-50 hover:opacity-100 transition-all duration-300" data-v-c28348e0><!--[--><!--]--></ul></div></div><div style="display:none;" tabindex="0" class="sidebar-container fixed inset-y-0 left-0 z-20 lg:hidden opacity-10 hover:opacity-95"><div class="headings-container px-2 space-y-2 transition-all duration-300 py-20" data-v-6eed9461><!--[--><!--]--></div></div></div><footer class="bg-gray-200 p-8 grid grid-cols-1 md:grid-cols-3 gap-4 items-center"><div class="flex justify-center md:justify-start items-center"><a class="p-2 hover:bg-gray-300 rounded-md" href="https://benbinbin.github.io/" target="_blank"><img src="/blog-web/images/avatar.png" alt="avatar" class="w-10 h-10 rounded-full"></a></div><div class="text-center space-y-0.5"><p class="text-sm text-gray-600"> ©2021 <span class="author">Benbinbin</span>. All Right Reserved. </p><p class="text-xs text-center text-gray-400"> 除特殊说明外，本站的文章遵循 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" target="_blank" class="text-blue-400">CC-BY-SA-4.0</a> 协议 </p><p class="text-xs text-center text-gray-400"> 网站主题采用 <a href="https://github.com/Benbinbin/two-dishes-one-fish" target="_blank" class="text-blue-400">Two Dishes One Fish</a></p></div><div class="btn-container flex justify-center md:justify-end items-center space-x-0.5"><!--[--><a class="p-2 hover:bg-gray-300 rounded-md" href="mailto:benthomsonbin@gmail.com" target=""><img src="/blog-web/images/icons/email.svg" alt="email" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://github.com/Benbinbin" target="_blank"><img src="/blog-web/images/icons/github.svg" alt="github" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://juejin.cn/user/3175045314389278/posts" target="_blank"><img src="/blog-web/images/icons/juejin.svg" alt="juejin" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://dribbble.com/BinBinDesign" target="_blank"><img src="/blog-web/images/icons/dribbble.svg" alt="dribbble" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://twitter.com/Benbinbin_fun" target="_blank"><img src="/blog-web/images/icons/twitter.svg" alt="twitter" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://weibo.com/binbindesign" target="_blank"><img src="/blog-web/images/icons/weibo.svg" alt="weibo" class="w-auto h-6"></a><!--]--></div></footer></div><!--]--></div>
    <script type="module" src="/blog-web/assets/app.43fe0c63.js" defer></script>
  </body>
</html>

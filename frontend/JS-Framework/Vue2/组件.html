<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/blog-web/images/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.css"><title>Vue 2 组件 | Blog</title><meta name="description" content="A blog and knowledge management system about web.">
    <link rel="modulepreload" href="/blog-web/assets/app.43fe0c63.js"><link rel="modulepreload" href="/blog-web/assets/组件.html.e68e9a89.js"><link rel="modulepreload" href="/blog-web/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/blog-web/assets/组件.html.508a1867.js">
    <link rel="stylesheet" href="/blog-web/assets/style.b42fd117.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="min-h-screen flex flex-col"><nav class="px-4 sm:px-8 py-2 flex justify-between items-center sticky top-0 z-30 bg-white"><div class="left flex items-center space-x-0.5"><!--[--><button class="text-gray-400 hover:bg-gray-100 catelog-btn p-2 select-none text-sm font-bold hover:text-gray-900 rounded-md lg:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></svg></button><!--]--><a class="avatar p-2 hover:bg-gray-100 rounded-md" href="/blog-web/#"><img src="/blog-web/images/avatar.png" alt="avatar" class="w-10 h-10 rounded-full"></a></div><div class="right hidden sm:flex items-center space-x-0.5"><!--[--><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">All</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Network</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Frontend</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Backend</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Project</button><!--]--><!--[--><button class="text-gray-900 bg-gray-100 hover:bg-gray-200 p-2 select-none text-sm font-bold hover:text-gray-900 rounded-md hidden lg:block"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></svg></button><!--]--></div><div class="more-container sm:hidden relative"><button style="" class="p-2 select-none hover:bg-gray-100 rounded-md text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"></path></svg></button><button style="display:none;" class="p-2 select-none hover:bg-gray-100 rounded-md text-red-400 hover:text-red-500"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path></svg></button><div style="display:none;" class="more-modal p-2 absolute top-10 right-0 z-10 flex flex-col space-y-2 bg-gray-100 rounded-md opacity-90"><!--[--><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">All</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Network</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Frontend</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Backend</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Project</button><!--]--></div></div></nav><div class="relative flex-grow"><div class="theme-container no-navbar no-sidebar"><!--[--><!----><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="vue-2-组件" tabindex="-1"><a class="header-anchor" href="#vue-2-组件" aria-hidden="true">#</a> Vue 2 组件</h1><p>Vue 中的组件是页面中的一部分，通过层层拼装和复用，最终形成了一个完整的页面。</p><p>使用组件的一般场景：</p><ul><li>代码复用</li><li>功能分类管理（每个组件实现一个功能）</li></ul><p>组件必须先注册以便 Vue 应用能够识别，有两种组件的注册类型：</p><ul><li>全局注册</li><li>局部注册</li></ul><p>然后就可以使用组件，它类似标签一样，通过尖括号包裹组件名称 <code>&lt;component-name&gt;</code> 来使用组件。</p><p>💡 由于 HTML <strong>不区分</strong>大小写，如果在组件名定义时 <code>name</code> 使用驼峰式命名法，在 HTML 中使用组件时需要改为采用<strong>连字号 <code>-</code></strong>，因此建议组件名称采用全小写，对于多个单词组成的名字，使用连字符号 <code>-</code> 分隔</p><p>💡 组件的 <strong>data 选项必须是函数</strong>，从中 <code>return</code> 对象</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 定义全局组件</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;myComponent&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            name<span class="token operator">:</span> <span class="token string">&#39;Ben&#39;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 使用组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="全局组件" tabindex="-1"><a class="header-anchor" href="#全局组件" aria-hidden="true">#</a> 全局组件</h2><p>使用 Vue 原型 prototype 上的方法 <code>Vue.component()</code> 注册一个全局组件，第一个参数 <code>name</code> 是组件名称，第二个参数是一个对象包含组件相关的选项</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>Vue.component(&#39;name&#39;, {
  options,
  template: `...`
})
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>⚠️ <mark>需要在 <code>new Vue({})</code> <strong>之前</strong>进行全局组件的注册</mark>，之后它可以在任何地方（根组件或其他子组件的模板中）使用。</p><p>💡 如果有大量基础组件，同时使用 webpack 工具，可以在<a href="https://vuejs.org/v2/guide/components-registration.html#Automatic-Global-Registration-of-Base-Components" target="_blank" rel="noopener noreferrer">入口文件</a>进行配置，<strong>使用 <code>require.context</code> 实现自动引入并进行全局注册这些组件</strong>。</p><h2 id="局部组件" tabindex="-1"><a class="header-anchor" href="#局部组件" aria-hidden="true">#</a> 局部组件</h2><p>通过一个普通的 JavaScript 对象来定义组件（提供组件的 options），然后在 Vue 实例的 <code>components</code> 选项中进行注册，之后它只能在该父级组件内使用</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> ComponentA <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> ComponentB <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> ComponentC <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  el<span class="token operator">:</span> <span class="token string">&#39;#app&#39;</span><span class="token punctuation">,</span>
  components<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&#39;component-a&#39;</span><span class="token operator">:</span> ComponentA<span class="token punctuation">,</span>
    <span class="token string">&#39;component-b&#39;</span><span class="token operator">:</span> ComponentB
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>🎬 全局组件虽然可以在整个项目的所有其他组件（包括自己）中都可用，但是这可能造成构建项目时体积增大，用户下载 JavaScript 的无谓增加，因此不能滥用全局组件，视情况而定，如果组件只在特定父级中使用，应该将其注册为局部组件。</p><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/Q5xKDRdr0x8?start=1177&amp;end=1821&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><h2 id="动态组件" tabindex="-1"><a class="header-anchor" href="#动态组件" aria-hidden="true">#</a> 动态组件</h2><p>基于标签 <code>&lt;component&gt;</code> 的 <code>is</code> 属性值（组件名），动态在不同组件之间进行切换</p><p>💡 有时候为了在切换时，保存动态组件的状态，例如组件中的输入框的值，可以用<strong>标签 <code>&lt;keep-alive&gt;&lt;/keep-alive&gt;</code> 包裹动态组件</strong>。</p><p>💡 属性 <code>is</code> 还可以用于解决 HTML 元素嵌套的规则限制，将它应用到原生的 HTML 标签上，它的值就是组件名，这样原生标签实际渲染出来的内容就是组件。因为对于 <code>&lt;ul&gt;</code>、<code>&lt;ol&gt;</code>、<code>&lt;table&gt;</code> 和 <code>&lt;select&gt;</code> 这些元素，其内部允许放置的直接子元素是有严格限制的，如果嵌入其他元素会被视为无效的内容，而提升到外部造成最终渲染问题。</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 这样做是有必要的，因为组件 `&lt;my-row&gt;` 放在一个 `&lt;table&gt;` 内可能无效而被放置到外面 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-row<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>但以上限制只是在 HTML 中直接使用 Vue 模板时才会遇到，如果是在以下情况的模板中就没有这种限制：</p><ul><li>字符串，例如 <code>template: &#39;...&#39;</code></li><li>单文件组件 <code>.vue</code></li><li><code>&lt;script type=&quot;text/x-template&quot;&gt;</code></li></ul><h2 id="组件间数据传递" tabindex="-1"><a class="header-anchor" href="#组件间数据传递" aria-hidden="true">#</a> 组件间数据传递</h2><ul><li><p>父组件将需要传递的数据绑定到子组件的属性上，子组件内部通过 props 接收。</p></li><li><p>子组件可以通过抛出事件 <code>$emit(eventName, value)</code> 同时传递数据，父组件监听事件并接收数据</p></li></ul><h3 id="props" tabindex="-1"><a class="header-anchor" href="#props" aria-hidden="true">#</a> props</h3><p>props 用于接收父组件传递的数据，需要在子组件的选项 <code>props</code> 中预先设置会有哪些 prop，可以以<strong>字符串数组</strong>形式列出，也可以以<strong>对象</strong>形式列出（可指定 prop 接收的数据类型、默认值、是否必须、验证条件等）。</p><p>需要注意以下几点：</p><ul><li><p><mark>如果在父组件中传入的数据是非字符串的，需要<strong>通过绑定 <code>v-bind:propName</code> 的方式来传递</strong>（即使传递纯数字这一类的静态值）</mark>；否则<strong>直接传递数据都会转换为字符串</strong>。</p></li><li><p>🎬 如果 prop 是 Boolean 类型，但在使用组件中没有设置该 prop 时，则实例化后该组件的这个 prop 预设为 <code>false</code>；而使用组件时，设置了该 prop 但没有提供 true/false 值（no value 的情况），就会设置为 <code>true</code>。由于布尔类型不是字符串，正确传递方式是使用 <code>v-bind</code> 来传递非字符串的数据</p><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/Q5xKDRdr0x8?start=3884&amp;end=4176&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe></li><li><p>prop 应该遵循<mark>单向数据流</mark>，即<strong>不应该在子组件中修改 prop 值</strong>（因为这些数据是在父层的），如果希望从子组件触发 prop 值的修改，可以通过子组件 <code>$emit(&#39;eventName&#39;, value)</code> 抛出事件，同时传递需要更新的数据，然后在父级组件中监听事件，在回调函数中做修改。🎬 或者以 prop 值作为初始值或响应依赖：</p><ul><li>以 prop 传递来的数据作为一个初始值，在子组件接下来，拷贝到自己 data 的一个变量中</li><li>基于 prop 定义一个计算属性，实现对原始的值的转换</li></ul><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/Q5xKDRdr0x8?start=5159&amp;end=5461&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe></li></ul><p>如果希望将一个对象的所有属性「拆分」为多个 prop 分别传入，可以使用不带参数的 <code>v-bind</code>（即 <code>v-bind=&quot;obj&quot;</code>，而非 <code>v-bind:propName=&quot;obj&quot;</code>），🎬 所以可以将大量的 prop 包装进一个对象，一次绑定到组件上</p><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/Q5xKDRdr0x8?start=4633&amp;end=4896&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><p>可以对 prop 进行限制，确保传递进来的值符合要求。有多个属性可以进行设置</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ...</span>
props<span class="token operator">:</span> <span class="token punctuation">{</span>
  propA<span class="token operator">:</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> String<span class="token punctuation">,</span>
    required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&#39;abc&#39;</span><span class="token punctuation">,</span>
    validator<span class="token operator">:</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// 自定义验证函数，返回 true/false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>⚠️ prop 会在一个组件实例创建之前进行验证，所以该组件的 <code>data</code> 或 <code>computed</code> 数据在 <code>validator</code> 验证函数中无法进行访问</p><h3 id="emit" tabindex="-1"><a class="header-anchor" href="#emit" aria-hidden="true">#</a> emit</h3><p>当组件需要修改父层控管的数据（这些数据通过 props 传递进来）时，基于<strong>单向数据流原则</strong>不能在组件内进行修改，而是需要通过 <code>$emit(&#39;eventName&#39;, value)</code> 向外抛出自定义的事件，通知父层进行数据修改，其中 <code>value</code> 一般是向外传递的需要变动的数据。</p><p>💡 <strong>自定义事件名推荐使用 kebab-case 方式</strong>（🎬 小写单词之间用连字符 <code>-</code> 连接，因为与组件和 prop 名称不同，Vue 不会对事件名进行任何大小写转换），以便于 HTML 正确识别</p><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/dw2oFaLu5II?start=352&amp;end=572&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><p><mark>Vue 对于<a href="https://vuejs.org/v2/guide/components-custom-events.html#Customizing-Component-v-model" target="_blank" rel="noopener noreferrer">具有表单元素 <code>&lt;input&gt;</code> 的输入型组件</a>，支持使用 <code>v-model</code> 实现类似「双向绑定」的效果</mark>。<strong>但在该组件内部需要进行 <code>input</code> 事件监听，并手动 <code>$emit(&#39;change&#39;， $event.target.value)</code> 抛出该事件和用户输入的数据，让变量数据的修改仍在父层完成</strong>。</p><ul><li>在外部（引用该组件时，在组件的标签上）通过指令 <code>v-model</code> 双向绑定需要同步的变量，它的数据作为 prop 传递到组件内（<strong>因此记得在组件内部需要在 <code>props</code> 选项里声明 <code>value</code> 作为 prop</strong>），作为子组件内部表单元素的 <code>value</code> 属性的值</li><li>在组件内使用指令 <code>v-bind</code> 将表单元素表单元素的 <code>value</code> 属性绑定到以上声明的 prop 变量上，即 <code>v-bind:value=&quot;value&quot;</code>（这样就可以将外部传进来的值作为表单的值，实现与外部数据的「同步」）</li><li>在组件内使用指令 <code>v-on</code> 监听表单元素 <code>change</code> 输入事件，并通过抛出事件 <code>$emit(&#39;input&#39;, $event.target.value)</code> 向外传递相应的数据。这样在父组件中通过指令 <code>v-model</code> 绑定的变量就会基于抛出的数据进行改变 <strong>（即数据的修改的操作还是在父层完成）</strong></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// component</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;base-checkbox&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;value&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;input
      type=&quot;text&quot;
      v-bind:value=&quot;value&quot;
      v-on:change=&quot;$emit(&#39;input&#39;, $event.target.value)&quot;
    &gt;
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inputText<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-input</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>通过遵守这种设置,在使用输入型的组件时<strong>仅需简单地以 <code>v-model</code> 的方式</strong>，方便地实现数据从父组件传递给子组件，并将用户输入改动 <code>$emit</code> 给父组件进行修改，实现类似「双向绑定」的效果。</p><p>💡 如果输入型组件需要绑定的 <code>prop</code> 名称不是 <code>value</code>，且抛出的事件不是 <code>input</code>，🎬 可以<strong>在组件中选项 <code>model</code> 进行配置</strong>，例如表单类型为 <code>checkbox</code> 时，需要绑定的是属性是 <code>checked</code>，抛出的事件是 <code>change</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;base-checkbox&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  model<span class="token operator">:</span> <span class="token punctuation">{</span>
    prop<span class="token operator">:</span> <span class="token string">&#39;checked&#39;</span><span class="token punctuation">,</span>
    event<span class="token operator">:</span> <span class="token string">&#39;change&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    checked<span class="token operator">:</span> Boolean
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;input
      type=&quot;checkbox&quot;
      v-bind:checked=&quot;checked&quot;
      v-on:change=&quot;$emit(&#39;change&#39;, $event.target.checked)&quot;
    &gt;
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-checkbox</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lovingVue<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-checkbox</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>这里的 <code>lovingVue</code> 的值将会传入子组件，作为 prop <code>checked</code> 的值；而当 <code>&lt;base-checkbox&gt;</code> 抛出 <code>change</code> 事件并附带一个新的值时，这个所绑定的变量 <code>lovingVue</code> 将会被更新。</p><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/dw2oFaLu5II?start=733&amp;end=1800&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><h3 id="sync" tabindex="-1"><a class="header-anchor" href="#sync" aria-hidden="true">#</a> sync</h3><p>🎬 Vue 还为一般的组件<strong>提供 <code>.sync</code> 修饰符，和一个以特定前缀 <code>update</code> 命名的事件，让 prop 变量实现类似于「双向绑定」的效果</strong>，更方便地从子组件中「修改」父层传入的数据。</p><p>在使用组件设置 prop 时，<mark>如果在绑定变量时 <code>v-bind:propName.sync=&quot;variable&quot;</code> 添加 <code>.sync</code> 修饰符，<strong>就可以省略在父层设置监听事件和回调函数这一步</strong></mark>。</p><p>Vue 会自动监听子组件抛出的以特殊形式命名的事件 <code>this.$emit(&#39;update:propName&#39;, newValue)</code>（<strong>事件以特定模式 <code>update:propName</code> 命名</strong>)，然后在父层对 prop 绑定的变量进行更新。</p><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/dw2oFaLu5II?start=2235&amp;end=3261&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><p>💡 而且支持以 <code>v-bind.sync=&quot;obj&quot;</code> 的形式同时设置多个具有「双向绑定」效果的 prop，其中对象 obj 的每一个 property 都作为一个独立的 prop 传进去，然后可以在组件内部使用 <code>this.$emit(&#39;update:propName&#39;, newValue)</code> 抛出事件来更新数据。</p><h2 id="非-prop-属性" tabindex="-1"><a class="header-anchor" href="#非-prop-属性" aria-hidden="true">#</a> 非 prop 属性</h2><p>非 prop 的 attribute 是指未在组件的 <code>props</code> 选项中显式声明的，但在引用组件时传递给子组件的 attribute，🎬 这些 attribute 会默认被添加到这个组件的<strong>根元素</strong>上（即在组件的模板中作为容器的第一层的 <code>&lt;tag&gt;</code> 上。</p><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/Q5xKDRdr0x8?start=6820&amp;end=6973&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><p>如果组件的根节点 <code>&lt;tag&gt;</code> 上已有预设了相应的 attribute，🎬 该属性就会被新传入的值<strong>覆盖</strong>；如果这个 attribute 是 <code>class</code> 或 <code>style</code>，会将它们与组件根元素上的 <code>class</code> 或 <code>style</code> <strong>合并</strong>。</p><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/Q5xKDRdr0x8?start=7576&amp;end=7810&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><p>💡 如果希望 attribute 添加到组件的特定元素上，🎬 可以设定组件的选项 <code>inheritAttrs: false</code>，然后将特殊的变量 <code>$attrs</code>（这是一个包含所有非 prop 的 attribute 的对象）绑定 <code>v-bind=&quot;$attrs&quot;</code> 到指定的节点上，<strong>但 <code>class</code> 和 <code>style</code> 不能指定到组件的非根元素上</strong>。也可指定某个 attribute 绑定 <code>:attributeName=&quot;$attrs.propertyName&quot;</code></p><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/Q5xKDRdr0x8?start=6973&amp;end=7506&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><h2 id="监听事件" tabindex="-1"><a class="header-anchor" href="#监听事件" aria-hidden="true">#</a> 监听事件</h2><p>有时候希望在使用组件时才添加事件监听，这样就会将事件监听添加到组件的根元素上，🎬 <strong>但此时监听的事件都被认为是自定义事件（即监听从子组件手动 <code>$emit</code> 出来的事件）</strong>，如果希望监听 JS 预设的原生事件，如 <code>click</code>、<code>focus</code> 等，需要在其后添加 <code>.native</code> 修饰符。</p><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/dw2oFaLu5II?start=1801&amp;end=1938&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><p>如果希望在引用组件时添加事件监听，<strong>但又不是添加到组件的根元素上</strong>，而是添加到组件内的特定元素上，可以在组件中配置选项 <code>inheritAttrs: false</code>，🎬 并在模板非根元素的标签上使用 <code>v-on=&quot;$listener&quot;</code>，这样在使用组件时才设置的事件监听器，都指向该特定节点上。</p><p>Vue 提供了一个 <code>$listeners</code> property，它是一个对象，里面包含了作用在这个组件上的所有监听器。例如：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token function-variable function">focus</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span>
  <span class="token function-variable function">input</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/dw2oFaLu5II?start=1944&amp;end=2224&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><p><a href="https://vuejs.org/v2/guide/components-custom-events.html#Binding-Native-Events-to-Components" target="_blank" rel="noopener noreferrer">官方的例子</a>实现了将<strong>外部</strong>添加的事件监听器（通过 <code>$listeners</code> 获取），和<strong>内部</strong>为了配合 <code>v-model</code> 设置的 <code>input</code> <strong>事件监听器合并</strong>，再一起绑定到组件的 <code>&lt;input&gt;</code> 元素上。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;base-input&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  inheritAttrs<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;label&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">inputListeners</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> vm <span class="token operator">=</span> <span class="token keyword">this</span>
      <span class="token comment">// `Object.assign` 将所有的对象合并为一个新对象</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 从父级添加所有的监听器</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$listeners<span class="token punctuation">,</span>
        <span class="token comment">// 自定义监听器，</span>
        <span class="token comment">// 或覆写一些监听器的行为</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// 这里确保组件配合 `v-model` 的工作</span>
          <span class="token function-variable function">input</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            vm<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;input&#39;</span><span class="token punctuation">,</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;label&gt;
      {{ label }}
      &lt;input
        v-bind=&quot;$attrs&quot;
        v-bind:value=&quot;value&quot;
        v-on=&quot;inputListeners&quot;
      &gt;
    &lt;/label&gt;
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="插槽" tabindex="-1"><a class="header-anchor" href="#插槽" aria-hidden="true">#</a> 插槽</h2><p>插槽 slot 是 Vue 实现的一套<strong>内容分发</strong>的 API，一般用于组件作为布局 layout 使用。</p><p>在子组件的模板中使用标签 <code>&lt;slot&gt;</code> 作为「占位符」预留位置，在使用组件时，内嵌在组件 <code>&lt;component-name&gt;content&lt;/component-name&gt;</code> 中的内容 <code>content</code>（插入的内容可以是 HTML，也包含模板代码或其他组件） 会替代 <code>&lt;slot&gt;</code> 标签，渲染出来。</p><p>💡 可以在组件模板的插槽中设置<strong>默认内容</strong>，但是只要在使用组件时，有提供插入内容就会替换默认内容。如果组件定义模板时没有包含一个 <code>&lt;slot&gt;</code> 元素，则使用该组件时，即使组件起始标签和结束标签之间有内容，都会被抛弃。</p><h3 id="具名插槽" tabindex="-1"><a class="header-anchor" href="#具名插槽" aria-hidden="true">#</a> 具名插槽</h3><p>可以在组件定义的模板中设置多个插槽，并为它们设置属性 <code>name</code>，它们称为具名插槽 <code>&lt;slot name=&quot;slotName&quot;&gt;&lt;/slot&gt;</code>。</p><p>🎬 在使用组件时，使用 <code>&lt;template&gt;</code> 元素作为容器（该标签本身不会被渲染到页面上），并以<mark>带<strong>参数</strong>的指令 <code>v-slot:slotName</code> 的形式 <code>&lt;template v-slot:slotName&gt;content&lt;/template&gt;</code> 将提供的内容分发到相应名称的插槽</mark>。</p><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/Tn1X7jJNoL4?start=1644&amp;end=3282&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><p>💡 和其他指令一样，<code>v-slot:slotName</code> 指令有缩写形式 <code>#slotName</code></p><p>当模板中存在多个具名插槽 <code>&lt;slot&gt;</code> 时，<strong>可以有一个不具名插槽，它作为默认插槽（实际上带有隐含的名字 <code>v-slot:default</code>）</strong>。在使用组件时，任何没有被包裹在带有指令 <code>v-slot:slotName</code> 的 <code>&lt;template&gt;</code> 中的内容都会被视为默认插槽的内容。</p><h3 id="作用域插槽" tabindex="-1"><a class="header-anchor" href="#作用域插槽" aria-hidden="true">#</a> 作用域插槽</h3><p>🎬 由于使用组件时，是在父层指定插入的内容，所以<strong>这些内容现在父级作用域进行编译，它们只能访问父层的数据</strong>。</p><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/Tn1X7jJNoL4?start=1087&amp;end=1389&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><p>如果希望可以访问组件中才有的数据，🎬 需要使用作用域插槽 <code>&lt;slot v-bind:variable=&quot;value&quot;&gt;</code>，即在定义组件时，在插槽中预先将允许访问的数据绑定到变量上，这些绑定到 <code>&lt;slot&gt;</code> 的属性称为<strong>插槽 props</strong></p><p>然后在使用组件时，可以<mark>为指令 <code>v-slot</code> 设置<strong>值</strong> <code>&lt;template v-slot:slotName=&quot;objName&quot;&gt;</code>，该值是一个对象，它包含所有在组件内绑定的插槽 props</mark>，然后就可以通过 <code>objName.variable</code> 的方式来读取子作用域才有的数据。除了使用 <code>objName</code>「接收」内层抛出的所有 props，还可以使用 ES6 <strong>解构</strong>的方式直接 <code>&lt;template v-slot:slotName=&quot;{ variable }&quot;&gt;</code> 获取单个 <code>variable </code>，便于后面调用。</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 子组件 current-user 的模板 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>user</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ user.firstName}} {{ user.lastName }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 使用组件 current-user --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>current-user</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slotProps<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ slotProps.user.firstName }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>current-user</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 解构的方式接收特定的 prop --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>current-user</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ user }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  {{ user.firstName }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>current-user</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/Tn1X7jJNoL4?start=3356&amp;end=3976&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><p>💡 <strong>如果组件只有默认插槽时，组件的标签可以被当作插槽的模板来使用</strong>，即可以省略 <code>&lt;template&gt;</code> 标签，直接在组件标签上设置 <code>v-slot=&quot;objName&quot;</code> 来接收内层抛出的 props</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>current-user</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slotProps<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  {{ slotProps.user.firstName }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>current-user</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="混入" tabindex="-1"><a class="header-anchor" href="#混入" aria-hidden="true">#</a> 混入</h2><p>混入 mixin 是指将组件选项中可复用的部分「抽取」出来成为一个对象（可以包含 <code>computed</code>、<code>method</code>、<code>watch</code> 等），以供其他组件复用。🎬 然后在组件（包括根组件）的选项 <code>mixins</code> 中使用该对象即可复用。</p><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/XJKXQjihqpo?start=437&amp;end=866&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><p>在组件或 Vue 实例中添加选项 <code>mixins: [mixinName]</code> 引入预设的选项，它们将被「混合」进入该组件本身的选项。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 定义一个混入对象</span>
<span class="token keyword">var</span> myMixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">created</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hello from mixin!&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 定义一个使用混入对象的组件</span>
<span class="token keyword">var</span> Component <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mixins<span class="token operator">:</span> <span class="token punctuation">[</span>myMixin<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> component <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Component</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// =&gt; &quot;hello from mixin!&quot;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>💡 当组件和混入对象含<strong>有同名选项</strong>时，这些选项将以恰当的方式进行 🎬 「合并」：</p><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/XJKXQjihqpo?start=867&amp;end=1906&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe><ul><li><p>同名生命周期钩子函数，如 <code>created</code>、<code>mounted</code> 等，将合并为一个数组<strong>都将被调用</strong>，而且混入对象的钩子函数优先级更高，将在组件自身钩子函数<strong>之前</strong>调用。</p></li><li><p>当选项的值为对象，如 <code>methods</code>、<code>components</code>，将被合并为同一个对象。如果合并时<strong>两个对象键名冲突，取组件对象的键值对</strong></p></li><li><p>如果 🎬 希望（针对相同选项）自定义混入时合并策略，可以向 <code>Vue.config.optionMergeStrategies</code> 添加一个函数</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>optionMergeStrategies<span class="token punctuation">.</span><span class="token function-variable function">myOption</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">toVal<span class="token punctuation">,</span> fromVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 返回合并后的值</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><iframe style="width:100%;aspect-ratio:16/9;" src="https://www.youtube.com/embed/XJKXQjihqpo?start=2271&amp;end=2981&amp;modestbranding=1&amp;rel=0" allowfullscreen loading="lazy"></iframe></li></ul><p>可以通过 Vue 原型 prototype 上的方法 <code>Vue.mixin({options})</code> 设置 global mixin 全局混入，这样在所有组件中都会引入该 mixin（不需要手动以 <code>mixins: [mixinName]</code> 的方式添加）⚠️ 由于全局混入会影响每个单独创建的 Vue 实例（包括第三方组件），可能会导致一些冲突。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">更新时间: </span><span class="meta-item-info">2021/11/29 下午4:02:08</span></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><div style="width:0px;" class="catalog-container absolute top-0 right-0 h-full hidden lg:block"><div class="headings-container sticky top-36" data-v-c28348e0><ul class="max-w-max m-2 pl-7 xl:pl-16 2xl:pl-20 py-4 opacity-50 hover:opacity-100 transition-all duration-300" data-v-c28348e0><!--[--><!--]--></ul></div></div><div style="display:none;" tabindex="0" class="sidebar-container fixed inset-y-0 left-0 z-20 lg:hidden opacity-10 hover:opacity-95"><div class="headings-container px-2 space-y-2 transition-all duration-300 py-20" data-v-6eed9461><!--[--><!--]--></div></div></div><footer class="bg-gray-200 p-8 grid grid-cols-1 md:grid-cols-3 gap-4 items-center"><div class="flex justify-center md:justify-start items-center"><a class="p-2 hover:bg-gray-300 rounded-md" href="https://benbinbin.github.io/" target="_blank"><img src="/blog-web/images/avatar.png" alt="avatar" class="w-10 h-10 rounded-full"></a></div><div class="text-center space-y-0.5"><p class="text-sm text-gray-600"> ©2021 <span class="author">Benbinbin</span>. All Right Reserved. </p><p class="text-xs text-center text-gray-400"> 除特殊说明外，本站的文章遵循 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" target="_blank" class="text-blue-400">CC-BY-SA-4.0</a> 协议 </p><p class="text-xs text-center text-gray-400"> 网站主题采用 <a href="https://github.com/Benbinbin/two-dishes-one-fish" target="_blank" class="text-blue-400">Two Dishes One Fish</a></p></div><div class="btn-container flex justify-center md:justify-end items-center space-x-0.5"><!--[--><a class="p-2 hover:bg-gray-300 rounded-md" href="mailto:benthomsonbin@gmail.com" target=""><img src="/blog-web/images/icons/email.svg" alt="email" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://github.com/Benbinbin" target="_blank"><img src="/blog-web/images/icons/github.svg" alt="github" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://juejin.cn/user/3175045314389278/posts" target="_blank"><img src="/blog-web/images/icons/juejin.svg" alt="juejin" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://dribbble.com/BinBinDesign" target="_blank"><img src="/blog-web/images/icons/dribbble.svg" alt="dribbble" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://twitter.com/Benbinbin_fun" target="_blank"><img src="/blog-web/images/icons/twitter.svg" alt="twitter" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://weibo.com/binbindesign" target="_blank"><img src="/blog-web/images/icons/weibo.svg" alt="weibo" class="w-auto h-6"></a><!--]--></div></footer></div><!--]--></div>
    <script type="module" src="/blog-web/assets/app.43fe0c63.js" defer></script>
  </body>
</html>

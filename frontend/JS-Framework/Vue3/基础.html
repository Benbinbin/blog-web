<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/blog-web/images/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.css"><title>Vue 3 基础 | Blog</title><meta name="description" content="A blog and knowledge management system about web.">
    <link rel="modulepreload" href="/blog-web/assets/app.43fe0c63.js"><link rel="modulepreload" href="/blog-web/assets/基础.html.0ea37c86.js"><link rel="modulepreload" href="/blog-web/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/blog-web/assets/基础.html.6f658c04.js">
    <link rel="stylesheet" href="/blog-web/assets/style.b42fd117.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="min-h-screen flex flex-col"><nav class="px-4 sm:px-8 py-2 flex justify-between items-center sticky top-0 z-30 bg-white"><div class="left flex items-center space-x-0.5"><!--[--><button class="text-gray-400 hover:bg-gray-100 catelog-btn p-2 select-none text-sm font-bold hover:text-gray-900 rounded-md lg:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></svg></button><!--]--><a class="avatar p-2 hover:bg-gray-100 rounded-md" href="/blog-web/#"><img src="/blog-web/images/avatar.png" alt="avatar" class="w-10 h-10 rounded-full"></a></div><div class="right hidden sm:flex items-center space-x-0.5"><!--[--><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">All</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Network</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Frontend</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Backend</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Project</button><!--]--><!--[--><button class="text-gray-900 bg-gray-100 hover:bg-gray-200 p-2 select-none text-sm font-bold hover:text-gray-900 rounded-md hidden lg:block"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></svg></button><!--]--></div><div class="more-container sm:hidden relative"><button style="" class="p-2 select-none hover:bg-gray-100 rounded-md text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"></path></svg></button><button style="display:none;" class="p-2 select-none hover:bg-gray-100 rounded-md text-red-400 hover:text-red-500"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path></svg></button><div style="display:none;" class="more-modal p-2 absolute top-10 right-0 z-10 flex flex-col space-y-2 bg-gray-100 rounded-md opacity-90"><!--[--><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">All</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Network</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Frontend</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Backend</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Project</button><!--]--></div></div></nav><div class="relative flex-grow"><div class="theme-container no-navbar no-sidebar"><!--[--><!----><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="vue-3-基础" tabindex="-1"><a class="header-anchor" href="#vue-3-基础" aria-hidden="true">#</a> Vue 3 基础</h1><p>介绍 Vue 3 的基础使用方法，主要针对<mark>与 Vue 2 的不同点</mark>。</p><h2 id="安装引入" tabindex="-1"><a class="header-anchor" href="#安装引入" aria-hidden="true">#</a> 安装引入</h2><p>可以使用 CDN 引入最新版的 Vue 3 框架</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/vue@next<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>然后就可以访问暴露的 <code>Vue</code> 对象或它的方法 <code>createApp()</code> 创建 Vue 实例。</p><p>也可以使用 npm 安装</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 最新稳定版</span>
$ <span class="token function">npm</span> <span class="token function">install</span> vue@next
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>并在入口文件 <code>main.js</code> 或 <code>main.ts</code> 中引入 Vue（或以解构的方式引入 <code>createApp</code> 函数）</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="初始化" tabindex="-1"><a class="header-anchor" href="#初始化" aria-hidden="true">#</a> 初始化</h2><p>使用 <code>Vue</code> 的<mark>方法 <code>.createApp()</code></mark> 创建一个 Vue 实例应用，它接受一个对象，该对象的属性就是关于<strong>根组件</strong>的配置选项。然后再使用实例的方法 <code>.mount(el)</code> 将 Vue 实例其挂载在指定的 DOM 上，这样就将数据渲染进页面，而且是<strong>响应式</strong>的。</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      conent<span class="token operator">:</span> <span class="token string">&#39;Hello World!&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  template<span class="token operator">:</span> <span class="token string">&#39;&lt;div&gt;{{ conent }}&lt;/div&gt;&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><mark>被挂载的应用并<a href="https://v3.vuejs.org/guide/migration/mount-changes.html" target="_blank" rel="noopener noreferrer"><strong>不</strong>会替换元素</a></mark>，即当我们挂载一个应用时，其渲染内容会替换在 <code>mount(el)</code> 中指定的元素的 <code>innerHTML</code>（作为子元素）</p><p>💡 应用实例暴露的大多数方法都会<strong>返回该同一实例</strong>，因此<mark>允许以<strong>链式</strong>的方式对同一实例进行多种全局配置</mark></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;SearchInput&#39;</span><span class="token punctuation">,</span> SearchInputComponent<span class="token punctuation">)</span> <span class="token comment">// 注册全局组件</span>
  <span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&#39;focus&#39;</span><span class="token punctuation">,</span> FocusDirective<span class="token punctuation">)</span> <span class="token comment">// 注册全局自定义指令</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>LocalePlugin<span class="token punctuation">)</span> <span class="token comment">// 使用插件</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>💡 当 Vue 实例挂载到页面后，方法 <code>.mount()</code> 返回的<strong>不</strong>是应用本身，而是返回<strong>根组件</strong>实例，是<mark>一个 <code>Proxy</code> 形式的对象</mark>，它就是 mvvm 设计模式中的 <strong><code>vm</code> 视图数据连接层</strong>。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            content<span class="token operator">:</span> <span class="token string">&#39;Hello World!&#39;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    template<span class="token operator">:</span> <span class="token string">&#39;&lt;div&gt;{{ content }}&lt;/div&gt;&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> vm <span class="token operator">=</span> app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>通过组件实例暴露了一些组件相关的 property，可以在组件的模板中访问这些方法，也可以在组件的选项中访问它们，甚至能够在开发模式下，在浏览器的开发者工具的终端中访问。<strong>这些 property 都有一个 <code>$</code> 前缀</strong>，以避免与用户定义的 property 名称冲突。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$data<span class="token punctuation">.</span>content<span class="token punctuation">)</span>

<span class="token comment">// 如果是在组件的 data 选项还可以直接访问</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>content<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="模板语法" tabindex="-1"><a class="header-anchor" href="#模板语法" aria-hidden="true">#</a> 模板语法</h2><p>将 Vue 应用挂载到 DOM 以后，该节点内部的 HTML 就会支持模板语法 Mustache，即使用<strong>双花括号</strong>包含的部分，在其中支持使用<strong>单个 JavaScript 表达式</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span><span class="token punctuation">{</span> content <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>💡 可以使用 <code>v-once</code> 指令执行一次性的插值，即只将数据的<strong>初始值</strong>渲染到页面上，之后就不会随着变量值的改变进行响应式的更新。</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-once</span><span class="token punctuation">&gt;</span></span>这个将不会改变: {{ msg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>💡 使用 <code>v-html</code> 指令可以将指令的值作为 HTML 进行渲染，作为该节点的 <code>innerHTML</code> 内容，但<strong>不能</strong>在其中再进行数据绑定（即 <code>v-html</code> 指令的值只能是静态的 HTML 内容）。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> RenderHtmlApp <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      rawHtml<span class="token operator">:</span> <span class="token string">&#39;&lt;span style=&quot;color: red&quot;&gt;This should be red.&lt;/span&gt;&#39;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span>RenderHtmlApp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&#39;#example1&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Using v-html directive: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">v-html</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>rawHtml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>原来页面的 <code>&lt;span&gt;</code> 元素的内容将会被替换成为 <code>rawHtml</code> property 的值，直接作为 HTML，<strong>会忽略解析 property 值中的数据绑定</strong>，所以不能使用 <code>v-html</code> 来复合局部模板，因为 Vue 不是基于字符串的模板引擎。对于用户界面组件会更适合作为可重用和可组合的基本单位。</p><h2 id="属性绑定" tabindex="-1"><a class="header-anchor" href="#属性绑定" aria-hidden="true">#</a> 属性绑定</h2><p>在模板中使用指令 <code>v-bind</code> 将<strong>标签的属性与动态数据绑定</strong>，这样就实现了<strong>数据驱动画面（样式）</strong>。</p><p>指令 <code>v-bind:attrName=&quot;value&quot;</code> 可以简写为 <code>:attrName=&quot;value&quot;</code>，绑定的值可以是字符串、对象、数组等。</p><p>💡 对于属性 <code>class</code> 和 <code>style</code> 这两个特殊的属性，Vue 对这两个 attribute 进行特殊优化增强，绑定的值除了字符串之外，还可以是对象或数组，而且将动态绑定的数据<strong>与该属性的静态数据进行合并</strong>（而其他 attribute 就是「后盖前」）。</p><p>⚠️ 如果绑定的值是 <code>null</code> 或 <code>undefined</code>，那么该 attribute 将不会被包含在渲染的元素上。</p><p>💡 对于布尔值的 attribute（它们只要存在就意味着值为 <code>true</code>），即只在 truthy 时才渲染在元素上，而在 falsy 时不会被渲染。但是对于值为**空字符串 <code>&quot;&quot;</code>**的属性，它也会被包括在内，这是为了与 <code>&lt;button disabled=&quot;&quot;&gt;</code> 的形式保持一致。</p><h3 id="子组件-attribute-继承" tabindex="-1"><a class="header-anchor" href="#子组件-attribute-继承" aria-hidden="true">#</a> 子组件 Attribute 继承</h3><p>当组件返回单个根节点时，非 prop attribute 将自动添加到根节点的 attribute 中。</p><p>💡 一个非 prop 的 attribute 是指传向一个组件，但是该组件并没有相应 <a href="https://v3.cn.vuejs.org/guide/component-props" target="_blank" rel="noopener noreferrer">props</a> 或 <a href="https://v3.cn.vuejs.org/guide/component-custom-events.html#%E5%AE%9A%E4%B9%89%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6" target="_blank" rel="noopener noreferrer">emits</a> 定义的 attribute。常见的示例包括 <code>class</code>、<code>style</code> 和 <code>id</code> 属性。</p><p>💡 如果你<strong>不</strong>希望组件的根元素继承 attribute，你可以在组件的选项中设置 <code>inheritAttrs: false</code>。禁用 attribute 继承的常见情况是需要将 attribute 应用于根节点之外的其他元素。</p><p>然后通过访问组件的 <code>$attrs</code> property，该 property 包括组件 <code>props</code> 和 <code>emits</code> property 中未包含的所有属性，将该 property 手动绑定 <code>v-bind=&quot;$attrs&quot;</code> 到所需的节点上，就可以将相应的 Attribute 应用到该节点。</p><p><mark>在 Vue 3 中 <code>$attrs</code> 包含传递给组件的<em>所有</em> attribute，包括 <code>class</code> 和 <code>style</code>。</mark></p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>app.component(&#39;date-picker&#39;, {
  inheritAttrs: false,
  template: `
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>date-picker<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>datetime-local<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$attrs<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  `
})
</code></pre><div class="highlight-lines"><br><br><br><br><div class="highlight-line"> </div><br><br><br></div><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>由于 Vue 3 支持组件有多个根节点，如果组件的模板具有<mark>多个根节点</mark>，<strong>必须使用 <code>$attrs</code> 显式指定</strong>非 Prop 的 Attribute 绑定到哪个节点上，否则会弹出警告。</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>// 这将发出警告
app.component(&#39;custom-layout&#39;, {
  template: `
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
  `
})

// 没有警告，$attrs 被传递到 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">&gt;</span></span> 元素
app.component(&#39;custom-layout&#39;, {
  template: `
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$attrs<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
  `
})
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>💡 也可以绑定指定的某个 Attribute，例如只将 <code>class</code> 属性绑定到第一个根节点；在组件配置参数的业务逻辑中可以通过 <code>this.$attrs</code> 访问所有传递进来的非 props</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>baz<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>app.component(&#39;custom-layout&#39;,{
    template:`
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$attrs.class<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Hellp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    `
})
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="双向绑定" tabindex="-1"><a class="header-anchor" href="#双向绑定" aria-hidden="true">#</a> 双向绑定</h2><p>在模板的标签中使用指令 <code>v-model</code> 实现<strong>表单的值与动态数据双向绑定</strong>，实现表单 <code>&lt;input&gt;</code>、<code>&lt;textarea&gt;</code>、<code>&lt;select&gt;</code> 等标签的输入数据修改动态数据变量 data property，当然也可以通过修改相应的动态数据 data property 控制表单的值。</p><p>💡 <code>v-model</code> 本质上不过是语法糖，它在内部为不同的表单元素监听不同的 property 以响应用户的输入，并抛出不同的事件，然后在事件处理函数中修改绑定的响应式数据，实现双向绑定，如果需要客制化可以修改相应的事件处理函数。</p><p><code>v-model</code> 在内部为不同的表单元素绑定不同的 property 并监听不同的事件：</p><ul><li><code>&lt;input type=&quot;text&quot;&gt;</code> 和 <code>&lt;textarea&gt;</code> 元素使用 <code>value</code> property 和 <code>input</code> 事件</li><li><code>&lt;input type=&quot;checkbox &quot;&gt;</code> 和 <code>&lt;input type=&quot;radio&quot;&gt;</code> 使用 <code>checked</code> property 和 <code>change</code> 事件</li><li><code>&lt;select&gt;</code> 元素使用 <code>value</code> property 并将 <code>change</code> 作为事件</li></ul><p>⚠️ 对于文本域，以模板语法绑定动态数据是<strong>不会生效</strong>的</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span><span class="token punctuation">&gt;</span></span>{{text}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>应用使用 <code>v-model</code> 来代替 <code>&lt;textarea v-model=&quot;message&quot; placeholder=&quot;add multiple lines&quot;&gt;&lt;/textarea&gt;</code></p><p>Vue 提供了一些<strong>修饰符</strong>，方便地对表单输入值进行设置：</p><ul><li>表单的值默认是字符串类型，如果希望绑定的动态数据变量保存的是数值类型，可以使用表单修饰符 <code>v-model.number</code></li><li>表单修饰符 <code>v-model.trim</code> 自动过滤用户输入的首尾空白字符</li><li>表单修饰符 <code>v-model.lazy</code> 在 <code>change</code> 事件之后（即表单的输入框失去焦点后）进行数据同步（而默认是在 <code>input</code> 事件触发后）</li></ul><p>💡 对于单选按钮、复选框及选择框，有时候希望这些<strong>表单的最终值</strong>是另设的，这样可以根据双向绑定的值变动，得到相应的表单值（甚至可以是对象这一类复杂的数据结构）</p><ul><li><p>复选框：可以使用 <code>true-value</code> 和 <code>false-value</code> 属性</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toggle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">true-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yes<span class="token punctuation">&quot;</span></span> <span class="token attr-name">false-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>no<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// when checked:</span>
vm<span class="token punctuation">.</span>toggle <span class="token operator">===</span> <span class="token string">&#39;yes&#39;</span>
<span class="token comment">// when unchecked:</span>
vm<span class="token punctuation">.</span>toggle <span class="token operator">===</span> <span class="token string">&#39;no&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>单选框：可以绑定 <code>value</code> 属性</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pick<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">v-bind:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>a<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 当选中时</span>
vm<span class="token punctuation">.</span>pick <span class="token operator">===</span> vm<span class="token punctuation">.</span>a
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>选择框选项：绑定 <code>&lt;option&gt;</code> 元素的 <code>value</code> 属性（本来也是以 <code>&lt;option&gt;</code> 的 <code>value</code> 属性值作为该表单的值）</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selected<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 内联对象字面量 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ number: 123 }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 当被选中时</span>
<span class="token keyword">typeof</span> vm<span class="token punctuation">.</span>selected <span class="token comment">// =&gt; &#39;object&#39;</span>
vm<span class="token punctuation">.</span>selected<span class="token punctuation">.</span>number <span class="token comment">// =&gt; 123</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><h3 id="在组件上使用-v-model" tabindex="-1"><a class="header-anchor" href="#在组件上使用-v-model" aria-hidden="true">#</a> 在组件上使用 v-model</h3><p>在使用<a href="https://v3.vuejs.org/guide/component-basics.html#using-v-model-on-components" target="_blank" rel="noopener noreferrer">自定义的<strong>输入型组件</strong></a>时，Vue 为它们进行优化，也支持使用 <code>v-model</code> 实现双向绑定。</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchText<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-input</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 等价于以下代码 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-input</span>
  <span class="token attr-name">:model-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchText<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">@update:</span>model-value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchText = $event<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-input</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在外部（引用该组件时，在组件的标签上）通过指令 <code>v-model</code> 双向绑定需要同步的变量，它的数据默认作为一个<mark>名为 <code>modelValue</code> 的 prop</mark> 传递到组件内（<strong>因此记得在组件内部，需要在 <code>props</code> 选项里声明 <code>modelValue</code> 作为 prop</strong>），作为子组件内部表单元素的 <code>value</code> 属性的值。</p><p>需要在这些组件的内部进行相应的处理：</p><ul><li>在组件内使用指令 <code>v-bind</code> 将<strong>表单元素的 <code>value</code> 属性绑定到以上声明的 prop 变量 <code>modelValue</code></strong> 上，即 <code>v-bind:value=&quot;modelValue&quot;</code>（这样就可以将外部传进来的值作为表单的值，实现与外部数据的「同步」）</li><li>在组件内使用指令 <code>v-on</code> 监听表单元素 <code>input</code> 输入事件，<mark>并通过<strong>抛出 <code>update:modelValue</code> 事件</strong> <code>$emit(&#39;update:modelValue&#39;, $event.target.value)</code> 向外传递相应的数据（如果表单是 <code>checkbox</code> 应该传递的数据是 <code>$event.target.checked</code>）</mark>，然后外部就会接收抛出的事件，并对指令 <code>v-model</code> 绑定的变量，基于抛出的数据进行改变（<strong>即数据的修改操作还是在父层完成</strong>）</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// conpoment</span>
app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;custom-input&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;modelValue&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  emits<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;update:modelValue&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;input
      :value=&quot;modelValue&quot;
      @input=&quot;$emit(&#39;update:modelValue&#39;, $event.target.value)&quot;
    &gt;
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchText<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-input</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>⚠️ Vue 2 提供了 <code>.sync</code> 修饰符，通过 <code>v-bind:propName.sync=&quot;variable&quot;</code> 和 <code>$emit(&#39;update:propName&#39;, newValue)</code> 实现类似双向绑定的功能；但<mark>在 Vue 3 中 <code>.sync</code> 修饰符已被移除</mark>，而现在 Vue 3 使用类似的语法（组件也是抛出以 <code>update:</code> 为前缀的事件）实现的。</p><p>在组件内，默认传递的 prop 变量是 <code>modelValue</code>，默认监听抛出的事件是 <code>update:modelValue</code>，这种方法更通用，对于 <code>type=&quot;text&quot;</code> 或 <code>type=&quot;checkbox&quot;</code> 其语义都不会混淆。如果需要修改 <code>modelValue</code> 这个默认值，在 Vue 2 中可以通过<a href="https://vuejs.org/v2/guide/components-custom-events.html#Customizing-Component-v-model" target="_blank" rel="noopener noreferrer">选项 <code>model</code></a> 进行配置，但<mark>在 Vue 3 中 <code>model</code> 选项已移除</mark>，作为替代可以在父级中<strong>为 <code>v-model</code> 添加参数</strong>，这个 argument 就是 prop 变量名和需要监听的事件名（加上 <code>update:</code> 前缀）</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 使用组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> <span class="token attr-name"><span class="token namespace">v-model:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookTitle<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 是以下的简写 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> <span class="token attr-name">:title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookTitle<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookTitle = $event<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 组件</span>
app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;my-component&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    title<span class="token operator">:</span> String
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  emits<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;update:title&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;input
      type=&quot;text&quot;
      :value=&quot;title&quot;
      @input=&quot;$emit(&#39;update:title&#39;, $event.target.value)&quot;&gt;
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>在 Vue 3 中利用特定的 prop（通过调用组件时使用指令 <code>v-model</code> 的参数设置）和抛出相应事件，<mark>可以在单个组件上创建<strong>多个 <code>v-model</code></strong>，从而实现多个 prop 的双向绑定</mark></p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 使用组件，实现 first-name 和 last-name 的双向绑定 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>user-name</span>
  <span class="token attr-name"><span class="token namespace">v-model:</span>first-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>firstName<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name"><span class="token namespace">v-model:</span>last-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lastName<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>user-name</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;user-name&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    firstName<span class="token operator">:</span> String<span class="token punctuation">,</span>
    lastName<span class="token operator">:</span> String
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  emits<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;update:firstName&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;update:lastName&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;input
      type=&quot;text&quot;
      :value=&quot;firstName&quot;
      @input=&quot;$emit(&#39;update:firstName&#39;, $event.target.value)&quot;&gt;

    &lt;input
      type=&quot;text&quot;
      :value=&quot;lastName&quot;
      @input=&quot;$emit(&#39;update:lastName&#39;, $event.target.value)&quot;&gt;
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>在输入型组件上使用指令 <code>v-model</code> 时，不仅支持 Vue 内置的修饰符 <code>.trim</code>、<code>.number</code>、<code>.lazy</code>，<mark>Vue 3 还支持添加<strong>自定义的修饰符</strong>，添加到组件 <code>v-model</code> 的修饰符将通过 <strong><code>modelModifiers</code> prop</strong> 提供给组件。</mark></p><p>💡 修饰符应该在指令的参数后，而且修饰符支持多个链式使用</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 使用自定义修饰符，实现字符串首字母大写 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> <span class="token attr-name">v-model.capitalize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myText<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 组件</span>
app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;my-component&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    modelValue<span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token comment">// modelModifiers prop 这里我们提供了初始值</span>
    modelModifiers<span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  emits<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;update:modelValue&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 表单 input 事件的处理函数</span>
    <span class="token function">emitValue</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> value <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
      <span class="token comment">// 如果 v-model 有修饰符 capitalize 就对表单输入值实现首字母大写</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>modelModifiers<span class="token punctuation">.</span>capitalize<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        value <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> value<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 抛出事件</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;update:modelValue&#39;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;input type=&quot;text&quot;
      :value=&quot;modelValue&quot;
      @input=&quot;emitValue&quot;&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 当组件的 created 生命周期钩子触发时，会根据调用组件的情况对 modelModifiers prop 进行设置</span>
    <span class="token comment">// 由于这个例子中 v-model 的修饰符为 capitalize，因此 modelModifiers 对象会包含 capitalize 属性</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>modelModifiers<span class="token punctuation">)</span> <span class="token comment">// { capitalize: true }</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p><mark><strong>如果 <code>v-model</code> 设置了参数</strong>，则添加到组件 <code>v-model</code> 的自定义的修饰符将通过 <strong><code>arg</code> + <code>Modifiers</code> 形式的 prop</strong> 提供给组件。</mark></p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> <span class="token attr-name"><span class="token namespace">v-model:</span>description.capitalize</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>myText<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;my-component&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;description&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;descriptionModifiers&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  emits<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;update:description&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;input type=&quot;text&quot;
      :value=&quot;description&quot;
      @input=&quot;$emit(&#39;update:description&#39;, $event.target.value)&quot;&gt;
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>descriptionModifiers<span class="token punctuation">)</span> <span class="token comment">// { capitalize: true }</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="条件渲染" tabindex="-1"><a class="header-anchor" href="#条件渲染" aria-hidden="true">#</a> 条件渲染</h2><p>指令 <code>v-if</code> 和 <code>v-show</code> 都可以实现条件渲染，元素只会在指令的表达式返回 truthy 值的时候被渲染或显示出来。</p><p>一般来说，<code>v-if</code> 有更高的切换开销，而 <code>v-show</code> 有更高的初始渲染开销。因此，如果需要非常频繁地切换，则使用 <code>v-show</code> 较好；如果在运行时条件很少改变，则使用 <code>v-if</code> 较好。</p><h3 id="v-if" tabindex="-1"><a class="header-anchor" href="#v-if" aria-hidden="true">#</a> v-if</h3><p>在模板标签中使用指令 <code>v-if</code> 控制 DOM 的渲染，只有条件指令的值为 <code>true</code> 时才渲染元素，否则 DOM <strong>被「拔出」</strong>。</p><p>💡 如果想同时控制多个元素的条件渲染，可以使用 <code>&lt;template&gt;</code> 元素作为容器，它被当做不可见的包裹元素，即最终的渲染结果将不包含 <code>&lt;template&gt;</code> 元素。</p><p>还可以使用 <code>v-if</code>、<code>v-else-if</code>、<code>v-else</code> 设置<strong>同级并列元素</strong>的条件渲染，这三个指令的元素需要连续且同级。</p><p>💡 对于 <code>v-if</code>/<code>v-else</code>/<code>v-else-if</code> 的<mark>各分支项 <code>key</code> 将不再是必须的</mark>，因为现在 Vue 会自动生成唯一的 <code>key</code>。如果你手动提供 <code>key</code>，那么每个分支必须使用<strong>唯一的 <code>key</code></strong>。</p><h3 id="v-show" tabindex="-1"><a class="header-anchor" href="#v-show" aria-hidden="true">#</a> v-show</h3><p>在模板标签中使用指令 <code>v-show</code> 也是控制 DOM 的渲染，只有条件指令的值为 <code>true</code> 时才显示元素，否则 DOM 被<strong>隐藏</strong>。</p><p>⚠️ <code>v-show</code> 不支持 <code>&lt;template&gt;</code> 元素，因为 <code>v-show</code> 是要元素先进行渲染再通过 CSS 控制显示/隐藏的，因此只能作用于可以在页面渲染出 DOM 的元素。</p><h2 id="列表渲染" tabindex="-1"><a class="header-anchor" href="#列表渲染" aria-hidden="true">#</a> 列表渲染</h2><p>在模板标签中使用指令 <code>v-for</code> 可以将响应式数据中的数组或对象渲染为一系列的 DOM 元素，称为列表渲染，常用形式是 <code> v-for item in arr</code> 或 <code>v-for item of arr</code></p><ul><li>可以遍历 arr 数组、obj 对象、number（<strong>从 1 开始</strong>）数字</li><li>但是遍历 objList （类数组的对象）时候，无法保证每次遍历 item 的先后次序</li></ul><p>其中很重要的一点是需要为生成的元素<strong>设置 <code>key</code> 属性</strong>，一般绑定的是与该元素相关的唯一标识（<strong>不要直接用 <code>index</code></strong>），以便提高 DOM 更新的效率。</p><p>💡 <code>key</code> 属性还可以用于<strong>强制替换元素/组件而不是重复使用它</strong>。当你遇到如下场景时它可能会很有用：</p><ul><li>完整地触发组件的生命周期钩子</li><li>触发过渡</li></ul><p>可以将指令 <code>v-for</code> 应用到元素 <code>&lt;template&gt;</code>，同时可以在元素上指定 <code>key</code> 属性，而不必像 Vue 2 那样在其包含的子元素上设置。</p><p>⚠️ <mark><code>v-if</code> 会拥有比 <code>v-for</code> 更高的优先级，这与 Vue 2 中的工作方式正好相反，这也造成在同一个元素上 <code>v-if</code> 将<strong>没有权限访问 <code>v-for</code> 里的变量</strong></mark></p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token comment">&lt;!-- This will throw an error because property &quot;todo&quot; is not defined on instance. --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo in todos<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!todo.isComplete<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  {{ todo.name }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><a href="https://v3.vuejs.org/guide/list.html#v-for-with-v-if" target="_blank" rel="noopener noreferrer">官方文档</a>推荐使用 <code>&lt;template&gt;</code> 标签把 <code>v-for</code> 移动到「外层」来修正。 🎉 而更优化的方案是通过 <code>computed</code> 先对列表进行条件过滤，再迭代计算属性</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo in todos<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo.name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!todo.isComplete<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ todo.name }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>💡 由于对象和数组都是引用数据类型，所以修改它们后常常会出现无法正确地触发响应式变化的问题，例如无法触发列表重新渲染。​ Vue 特意针对数组常用方法（<code>push()</code>、<code>pop()</code>、<code>shift()</code>、<code>unshift()</code>、<code>splice()</code>、<code>sort()</code>、<code>reverse()</code>）做出优化，<strong>如果通过这些方法修改数组，Vue 可以侦听到，相关依赖会做出响应式变化</strong>（而直接通过下标来修改数组的值，往往无法触发视图进行响应式地更新）。</p><h2 id="teleport" tabindex="-1"><a class="header-anchor" href="#teleport" aria-hidden="true">#</a> Teleport</h2><p>有时组件模板的一部分代码从逻辑上属于该组件，而从 UI 角度来看，最好将模板的这一部分移动到 Vue app 之外的其他位置，例如模态框这一类全屏模式的组件，应该作为 <code>&lt;body&gt;</code> 元素的直接子元素，而不是深度嵌套在 <code>div</code> 中。</p><p>Vue 3 新增的 Teleport 提供了一种干净的方法，允许我们自由地控制在容器中的模板渲染在哪个页面 DOM 节点下。</p><p>内置组件 <code>&lt;teleport&gt;</code> 作为容器，其属性 <code>to</code> 指定内容需要插入到哪一个 DOM 节点，属性值可以是标签名，如 <code>body</code>，也可以是 CSS 选择器。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;modal-button&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;button @click=&quot;modalOpen = true&quot;&gt;
        Open full screen modal! (With teleport!)
    &lt;/button&gt;
	&lt;!-- 模态框内容渲染为 body 标签的子级 --&gt;
    &lt;teleport to=&quot;body&quot;&gt;
      &lt;div v-if=&quot;modalOpen&quot; class=&quot;modal&quot;&gt;
        &lt;div&gt;
          I&#39;m a teleported modal!
          (My parent is &quot;body&quot;)
          &lt;button @click=&quot;modalOpen = false&quot;&gt;
            Close
          &lt;/button&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/teleport&gt;
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      modalOpen<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>💡 当 <code>&lt;teleport&gt;</code> 容器内包含 Vue 组件时，虽然最终渲染在指定的 DOM 节点下，但是逻辑上的父子组件关系并不会变，即来自父组件的注入依然按预期工作，并且在 Vue Devtools 中，子组件将嵌套的父组件之下，而不是放在实际内容移动到的位置。</p><p>💡 多个 <code>&lt;teleport&gt;</code> 组件可以挂载到同一个目标元素，以追加的模式叠加，即稍后挂载的元素位于较早的挂载之后，一个常见的用例场景是一个可重用的 <code>&lt;Modal&gt;</code> 组件用于弹出消息，挂载在 <code>&lt;body&gt;</code> 元素下，可能同时有多个实例处于活动状态，从 UI 角度看到的效果是新的模态框就会覆盖旧的模态框。</p><h2 id="响应式变量" tabindex="-1"><a class="header-anchor" href="#响应式变量" aria-hidden="true">#</a> 响应式变量</h2><p>在配置（根）组件时，可以在<mark>选项 <code>data()</code> 函数中声明响应式变量，然后将它们作为返回值<strong>包在一个对象中</strong></mark>，Vue 会通过响应性系统将其包裹起来，在组件实例创建后，以 <code>$data</code> 的形式存储在组件实例 <code>vm</code> 中。</p><p>这样在就可以在模板中直接使用它们，而在其他选项的函数中则使用 <code>this.$data.varName</code>（其中 <code>this</code> 是组件实例 <code>vm</code>，在 Vue 外部也可以通过 <code>vm.$data</code> 访问该响应式对象）来访问。为方便起见，该对象的任何顶级 property 可以直接通过组件实例暴露出来，即可以通过 <code>this.varName</code> 替代。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$data<span class="token punctuation">.</span>count<span class="token punctuation">)</span> <span class="token comment">// 4</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>count<span class="token punctuation">)</span>       <span class="token comment">// 4</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>⚠️ 这些 property 仅在实例首次创建时被添加，所以你需要确保它们都在 <code>data</code> 函数返回的对象中。必要时，<strong>要对尚未提供所需值的 property 使用 <code>null</code>、<code>undefined</code> 或其他占位的值</strong>。</p><h2 id="计算属性和侦听器" tabindex="-1"><a class="header-anchor" href="#计算属性和侦听器" aria-hidden="true">#</a> 计算属性和侦听器</h2><p>在选项 <code>computed</code> 中创建计算属性，在选项 <code>watch</code> 创建监听器，两者都是<strong>基于响应式数据的变化再执行操作的</strong>，但用处有不同。</p><h3 id="computed" tabindex="-1"><a class="header-anchor" href="#computed" aria-hidden="true">#</a> computed</h3><p>计算属性常常是为了将复杂和需要重用的资料处理逻辑，从模板中的函数表达式提出来。它类似 <code>data</code> 的属性一样，<strong>作为响应式数据在模板上直接使用</strong>。</p><p>计算属性的最大优势是<a href="https://v3.vuejs.org/guide/computed.html#computed-caching-vs-methods" target="_blank" rel="noopener noreferrer">对于响应式依赖<strong>有缓存</strong>的</a>，即计算属性只在相关响应式依赖发生改变时它们才会重新求值。如果希望计算属性实时更新，那么它<strong>需要有响应式依赖</strong>（基于 data 或其他来源的响应式数据），并且<strong>返回一个值</strong>。</p><p>💡 如果不希望有缓存，请用 <code>method</code> 来替代，同样可以实现相同的功能，相比之下，<strong>每当触发组件重新渲染时，方法 <code>method</code> 函数将总会再次执行</strong>。</p><h3 id="watch" tabindex="-1"><a class="header-anchor" href="#watch" aria-hidden="true">#</a> watch</h3><p>可以将 <code>watch</code> 看作是更通用的响应数据侦听方式。watch 也是依赖响应式数据的，可以是 data property 或 computed property（也可以是这些 property 的嵌套 property），然后在响应式数据发生变化时触发回调函数，在回调中可以<strong>执行异步操作</strong>，可以设置中间状态，而且<strong>不必返回值</strong>。</p><p>侦听器除了以函数形式（函数名就是需要侦听的响应式变量），还可以是<strong>对象的形式</strong>，对侦听器进行更详细的设置</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>watch<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// 函数形式，侦听响应式变量 a</span>
  <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">new: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, old: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>oldVal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 回调函数以函数名来表示（字符串）</span>
  b<span class="token operator">:</span> <span class="token string">&#39;someMethod&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// 对象形式</span>
  <span class="token comment">// 该回调会在任何被侦听的对象的 property 改变时被调用，不论其被嵌套多深</span>
  c<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;c changed&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    deep<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 侦听嵌套 property</span>
  <span class="token string">&#39;c.d&#39;</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 该回调将会在侦听开始之后被立即调用</span>
  e<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;e changed&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    immediate<span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 多个回调函数构成的数组，它们会被逐一调用</span>
  f<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;handle1&#39;</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token function">handle2</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;handle2 triggered&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">handle3</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> oldVal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;handle3 triggered&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>💡 在 Vue 2 中 watch 一般只能监听一个响应式数据（如果要监听多个变量，可以使用箭头函数将他们组合返回再给 watch 监听，<a href="https://github.com/vuejs/vue/issues/844#issuecomment-265315349" target="_blank" rel="noopener noreferrer">相当于侦听一个 computed</a>），<mark>而在 Vue 3 中是支持<a href="https://v3.cn.vuejs.org/guide/reactivity-computed-watchers.html#watch" target="_blank" rel="noopener noreferrer">监听多个数据源和响应式对象</a></mark>。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token comment">// 侦听多个源</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>fooRef<span class="token punctuation">,</span> barRef<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>prevFoo<span class="token punctuation">,</span> prevBar<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="方法" tabindex="-1"><a class="header-anchor" href="#方法" aria-hidden="true">#</a> 方法</h2><p>用 <code>methods</code> 选项向组件实例添加方法，该选项是一个对象，其中各属性就是该组件可以调用的方法。</p><p>可以在组件模板中直接调用方法，也可以在其他选项中通过 <code>this.methodName([params])</code> 来调用。</p><p>⚠️ <strong>Vue 自动为 <code>methods</code> 绑定 <code>this</code>，以便于它始终指向组件实例</strong>，因此在定义这些方法时应该<strong>避免</strong>使用箭头函数（因为这会阻止 Vue 绑定恰当的 <code>this</code> 指向）。</p><p>另外官方文档还提到一个<a href="https://v3.vuejs.org/guide/data-methods.html#debouncing-and-throttling" target="_blank" rel="noopener noreferrer">关于<strong>防抖</strong>的例子</a>值得注意。由于组件实例化的时候，将组件的 <code>methods</code> 选项里的函数的 <code>this</code> 进行绑定（指向了组件实例），而<strong>函数还是共享</strong>，因此在同一个页面复用组件时，进行防抖实际调用的是同一个函数，可以导致与预期不一样的效果，具体分析可以参考这篇<a href="https://juejin.cn/post/6844903516788506637" target="_blank" rel="noopener noreferrer">文章</a>。</p><p>因此正确的做法是<mark>在生命周期钩子的 <code>created</code> 里，<strong>将防抖函数添加到组件实例上</strong></mark>，这样就可以让每个组件都有自己独立的防抖函数</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;save-button&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 用 Lodash 的防抖函数对事件处理函数进行封装</span>
    <span class="token comment">// this 指的是组件实例</span>
    <span class="token comment">// 因此 debouncedClick 函数是每个组件实例彼此独立的</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>debouncedClick <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">debounce</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>click<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">unmounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 移除组件时，取消定时器</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>debouncedClick<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ... 响应点击的具体处理函数 ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;button @click=&quot;debouncedClick&quot;&gt;
      Save
    &lt;/button&gt;
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="事件处理" tabindex="-1"><a class="header-anchor" href="#事件处理" aria-hidden="true">#</a> 事件处理</h2><p>在模板的标签中使用指令 <code>v-on:event-name</code> 监听事件，可以使用简写形式 <code>@event-name</code>，并触发回调函数。</p><p>💡 在模板中设置的事件监听器需要 kebab-case 形式</p><p>其回调函数<strong>默认传递 <code>event</code> 事件作为参数</strong>。</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>event-with-method<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- `greet` 是在下面定义的方法名 --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>greet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Greet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>// ...
methods: {
  greet(event) {
    // `event` 是原生 DOM event
    console.log(event)
  }
}

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>如果希望同时传递参数和事件，可以用特殊变量 <code>$event</code> 把事件传入回调函数中（记得在事件处理函数中设置相应的形参）</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>warn(<span class="token punctuation">&#39;</span>Form cannot be submitted yet.<span class="token punctuation">&#39;</span>, $event)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Submit
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>// ...
methods: {
  warn(message, event) {
    // 现在可以访问到原生事件
    if (event) {
      event.preventDefault()
    }
    alert(message)
  }
}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>💡 支持为同一个事件设置<strong>多个处理函数</strong>，使用<strong>逗号 <code>,</code></strong> 分隔，这时回调函数<strong>即使没有传递参数也要加上 <code>()</code></strong></p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token comment">&lt;!-- 这两个 one() 和 two() 将执行按钮点击事件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handlerOne(), handlerTwo($event)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Submit
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>💡 支持 <code>v-on</code> 不带参数绑定<strong>一个事件/监听器键值对的对象</strong>。注意当使用对象语法时，是<strong>不支持任何修饰器</strong>的。</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 对象语法 (2.4.0+) --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ mousedown: doThis, mouseup: doThat }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Vue 提供了多种事件修饰符，用于更方便地对事件的行为进行设置，这样事件处理函数就可以只有纯粹的数据逻辑，而不是去处理 DOM 事件细节。事件修饰符可以<strong>链式</strong>调用多个。<mark>在 Vue 3 中不再支持使用数字 (即键码) 作为 <code>v-on</code> 修饰符</mark></p><ul><li><code>.stop</code> 阻止事件继续传播</li><li><code>.prevent</code> 阻止事件的默认行为，例如表单提交后跳转到指定网址</li><li><code>.self</code> 当<strong>事件在该元素自身触发时</strong>才执行事件处理函数</li><li><code>.once</code> 只对事件进行一次响应后失效</li><li><code>.capture</code> 使用事件捕获模式</li><li><code>.passive</code> 针对 <code>scroll</code> 事件进行优化，提高性能。但不要把 <code>.passive</code> 和 <code>.prevent</code> 一起使用，因为 <code>.prevent</code> 将会被忽略，同时浏览器可能会向你展示一个警告。</li></ul><p>对于 UI 用户界面交互事件是最常见的，如鼠标事件、按键事件等，Vue 提供了鼠标和按键修饰符，可以直接将 <code>KeyboardEvent.key</code> 暴露的任意有效按键名转换为 kebab-case 来作为修饰符。</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 处理函数只会在 $event.key 等于 &#39;PageDown&#39; 时被调用 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">@keyup.page-down</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onPageDown<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="使用自定义事件抛出一个值" tabindex="-1"><a class="header-anchor" href="#使用自定义事件抛出一个值" aria-hidden="true">#</a> 使用自定义事件抛出一个值</h3><p>在父子组件中间监听抛出的事件时，子组件在模板中使用 <a href="https://v3.cn.vuejs.org/api/instance-methods.html#emit" target="_blank" rel="noopener noreferrer"><code>$emit()</code> 方法</a>抛出事件，第一个参数是事件名称，<strong>第二参数（可选）是需要传递的数据</strong>（如果希望抛出子组件的事件，可以使用特殊的变量 <code>$event</code> 作为参数）</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$emit(<span class="token punctuation">&#39;</span>enlargeText<span class="token punctuation">&#39;</span>, 0.1)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  Enlarge text<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token comment">&lt;!-- 使用 $event 访问子组件的点击事件，然后作为自定义事件 enlargeText 的参数抛出，让父组件可以接收 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$emit(<span class="token punctuation">&#39;</span>enlargeText<span class="token punctuation">&#39;</span>, $event)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  Enlarge text
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>然后在父组件中监听这个事件，<strong>其回调函数会将这个数据作为第一个参数</strong></p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blog-post</span> <span class="token attr-name">...</span> <span class="token attr-name">@enlarge-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onEnlargeText<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>blog-post</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code>methods: {
  onEnlargeText(enlargeAmount) {
    this.postFontSize += enlargeAmount
  }
}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>💡 如果父组件中不使用回调函数，而直接使用内联处理器的写法，可以使用 <code>$event</code> 访问到被抛出的这个值</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>blog-post</span> <span class="token attr-name">...</span> <span class="token attr-name">@enlarge-text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>postFontSize += $event<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>blog-post</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="emits-选项" tabindex="-1"><a class="header-anchor" href="#emits-选项" aria-hidden="true">#</a> emits 选项</h3><p><mark>Vue 3 目前提供一个 <code>emits</code> 选项</mark>，和选项 <code>props</code> 作用类似，<strong>用来定义子组件可以向其父组件触发的事件</strong>。</p><p>💡 强烈建议使用 <code>emits</code> 记录每个组件可触发的所有事件。</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{ text }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">v-on:</span>click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$emit(<span class="token punctuation">&#39;</span>accepted<span class="token punctuation">&#39;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>OK<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;text&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    emits<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;accepted&#39;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>该选项可以接受字符串作为元素的数组，也可以接收一个对象。在对象中可以为事件<a href="https://v3.cn.vuejs.org/api/options-data.html#emits" target="_blank" rel="noopener noreferrer">设置<strong>验证器</strong></a>，和 <code>props</code> 定义里的验证器类似。</p><p><mark>在对象语法中，每个 property 的值可以为 <strong><code>null</code> 或验证函数</strong>，该函数将<strong>接收调用 <code>$emit</code> 时传递的数据</strong>。验证函数应<strong>返回布尔值</strong>，以表示事件参数是否有效。</mark></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 数组语法</span>
app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;todo-item&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  emits<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;check&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;check&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 对象语法</span>
app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;reply-form&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  emits<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 没有验证函数</span>
    click<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>

    <span class="token comment">// 带有验证函数</span>
    <span class="token function-variable function">submit</span><span class="token operator">:</span> <span class="token parameter">payload</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>payload<span class="token punctuation">.</span>email <span class="token operator">&amp;&amp;</span> payload<span class="token punctuation">.</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Invalid submit event payload!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="自定义指令" tabindex="-1"><a class="header-anchor" href="#自定义指令" aria-hidden="true">#</a> 自定义指令</h2><p>指令一般是为了更方便地<strong>对普通 DOM 元素进行操作</strong>，Vue 提供多种内置指令，如 <code>v-if</code>、<code>v-bind</code>、<code>v-on</code>、<code>v-model</code> 方便在模板中使用，也允许注册自定义指令。</p><h3 id="全局注册" tabindex="-1"><a class="header-anchor" href="#全局注册" aria-hidden="true">#</a> 全局注册</h3><p>通过根组件实例的方法 <code>app.directive</code> 注册一个全局可用的自定义指令，第一个参数 <code>directiveName</code> 是指令的后缀名；第二个参数就是定义指令的行为，Vue 为自定义指令提供了<strong>钩子函数</strong>，可以在所绑定的元素的不同阶段进行调用：</p><ul><li><mark><code>created</code> 在绑定元素的 attribute 或事件监听器被应用之前调用</mark>。在指令需要附加事件监听器，而它须要在普通的 <code>v-on</code> 事件监听器前调用时，这很有用</li><li><mark><code>beforeMount</code> 当指令第一次绑定到元素并且在挂载父组件之前调用</mark></li><li><mark><code>mounted</code> 在绑定元素的父组件被挂载后调用</mark></li><li><mark><code>beforeUpdate</code> 在更新包含组件的 VNode 之前调用</mark></li><li><code>updated</code> 在包含组件的 VNode <strong>及其子组件的 VNode</strong> 更新后调用</li><li><mark><code>beforeUnmount</code> 在卸载绑定元素的父组件之前调用</mark></li><li><mark><code>unmounted</code> 当指令与元素解除绑定且父组件已卸载时，只调用一次</mark></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&#39;directiveName&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
 <span class="token comment">// 指令是具有一组生命周期的钩子：</span>
  <span class="token comment">// 在绑定元素的 attribute 或事件监听器被应用之前调用</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 在绑定元素的父组件挂载之前调用</span>
  <span class="token function">beforeMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 绑定元素的父组件被挂载时调用</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 在包含组件的 VNode 更新之前调用</span>
  <span class="token function">beforeUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 在包含组件的 VNode 及其子组件的 VNode 更新之后调用</span>
  <span class="token function">updated</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 在绑定元素的父组件卸载之前调用</span>
  <span class="token function">beforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 卸载绑定元素的父组件时调用</span>
  <span class="token function">unmounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>💡 很多时候可能只想使用 <code>mounted</code> 和 <code>updated</code> 钩子函数，而且想<strong>触发相同的行为</strong>，可以使用简写形式 <code>app.directive(&#39;directiveName&#39;, (el, binding) =&gt; {...})</code></p><p>指令的钩子函数会传入以下参数，以便操作所绑定的 DOM 元素和传递数据：</p><ul><li><p><code>el</code> 是指令所绑定的元素，可以用来直接操作 DOM</p></li><li><p><code>binding</code> 是一个对象，包含以下 property：</p><ul><li><p><code>instance</code> 使用指令的组件实例</p></li><li><p><code>value</code> 传递给指令的值。例如，在 <code>v-my-directive=&quot;1 + 1&quot;</code> 中，该值为 <code>2</code></p></li><li><p><code>oldValue</code> 先前的值，仅在 <code>beforeUpdate</code> 和 <code>updated</code> 中可用。值是否已更改都可用</p></li><li><p><code>arg</code> 参数传递给指令 (如果有)。例如在 <code>v-my-directive:foo</code> 中，arg 为 <code>foo</code></p></li><li><p><code>modifiers</code> 包含修饰符 (如果有) 的对象（因为一个指令可以有多个修饰符，以链式方式 <code>.a.b.c</code> 串联使用）。例如在 <code>v-my-directive.foo.bar</code> 中，修饰符对象为 <code>{foo: true，bar: true}</code></p></li><li><p><code>dir</code> 一个对象，在注册指令时作为参数传递</p><p>例如，在以下指令中</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&#39;focus&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>dir</code> 将会是以下对象</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    el<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li><li><p><code>vnode</code> Vue 编译生成的虚拟节点</p></li><li><p><code>prevNode</code> 上一个虚拟节点，仅在 <code>beforeUpdate </code> 和 <code>updated </code> 钩子中可用</p></li></ul><p>然后可以在 Vue 实例中的任何元素中使用该自定义的指令 <code>&lt;tag v-directiveName=&quot;value&quot;&gt;</code></p><p>💡 如果指令需要多个值，可以传入一个 JavaScript 对象字面量。</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-demo</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ color: <span class="token punctuation">&#39;</span>white<span class="token punctuation">&#39;</span>, text: <span class="token punctuation">&#39;</span>hello!<span class="token punctuation">&#39;</span> }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">&#39;demo&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">.</span>color<span class="token punctuation">)</span> <span class="token comment">// &quot;white&quot;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>binding<span class="token punctuation">.</span>value<span class="token punctuation">.</span>text<span class="token punctuation">)</span> <span class="token comment">// &quot;hello!&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>⚠️ 使用指令时，如果要同时使用参数 <code>arg</code> 和修饰符 <code>modifier</code>，应该按照先后次序使用（因为 <code>arg</code> 只有一个；而 <code>modifier</code> 可以串联多个，应该放在最后） <code>v-directiveName:argument.modifier</code></p><h3 id="局部注册" tabindex="-1"><a class="header-anchor" href="#局部注册" aria-hidden="true">#</a> 局部注册</h3><p>在组件的选项 <code>directives</code> 中注册局部指令，也是提供 7 中钩子函数。然后可以在组件的模板中任何元素上使用自定义的指令 <code>&lt;tag v-directiveName=&quot;value&quot;&gt;</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ...</span>
directives<span class="token operator">:</span> <span class="token punctuation">{</span>
  directiveName<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设定钩子函数</span>
    <span class="token function-variable function">inserted</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="应用到组件" tabindex="-1"><a class="header-anchor" href="#应用到组件" aria-hidden="true">#</a> 应用到组件</h3><p>和非 prop 的 attribute 类似，当在组件中使用时，自定义指令总是会被<strong>应用在组件的根节点上</strong>。这和 attribute 不同，指令<strong>不</strong>能通过 <code>v-bind=&quot;$attrs&quot;</code> 被传入另一个元素，<mark>因此当自定义指令被应用在一个<strong>多根节点</strong>的组件上时，指令会被忽略，并且会抛出一个警告</mark>。</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">更新时间: </span><span class="meta-item-info">2021/11/30 下午3:44:16</span></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><div style="width:0px;" class="catalog-container absolute top-0 right-0 h-full hidden lg:block"><div class="headings-container sticky top-36" data-v-c28348e0><ul class="max-w-max m-2 pl-7 xl:pl-16 2xl:pl-20 py-4 opacity-50 hover:opacity-100 transition-all duration-300" data-v-c28348e0><!--[--><!--]--></ul></div></div><div style="display:none;" tabindex="0" class="sidebar-container fixed inset-y-0 left-0 z-20 lg:hidden opacity-10 hover:opacity-95"><div class="headings-container px-2 space-y-2 transition-all duration-300 py-20" data-v-6eed9461><!--[--><!--]--></div></div></div><footer class="bg-gray-200 p-8 grid grid-cols-1 md:grid-cols-3 gap-4 items-center"><div class="flex justify-center md:justify-start items-center"><a class="p-2 hover:bg-gray-300 rounded-md" href="https://benbinbin.github.io/" target="_blank"><img src="/blog-web/images/avatar.png" alt="avatar" class="w-10 h-10 rounded-full"></a></div><div class="text-center space-y-0.5"><p class="text-sm text-gray-600"> ©2021 <span class="author">Benbinbin</span>. All Right Reserved. </p><p class="text-xs text-center text-gray-400"> 除特殊说明外，本站的文章遵循 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" target="_blank" class="text-blue-400">CC-BY-SA-4.0</a> 协议 </p><p class="text-xs text-center text-gray-400"> 网站主题采用 <a href="https://github.com/Benbinbin/two-dishes-one-fish" target="_blank" class="text-blue-400">Two Dishes One Fish</a></p></div><div class="btn-container flex justify-center md:justify-end items-center space-x-0.5"><!--[--><a class="p-2 hover:bg-gray-300 rounded-md" href="mailto:benthomsonbin@gmail.com" target=""><img src="/blog-web/images/icons/email.svg" alt="email" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://github.com/Benbinbin" target="_blank"><img src="/blog-web/images/icons/github.svg" alt="github" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://juejin.cn/user/3175045314389278/posts" target="_blank"><img src="/blog-web/images/icons/juejin.svg" alt="juejin" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://dribbble.com/BinBinDesign" target="_blank"><img src="/blog-web/images/icons/dribbble.svg" alt="dribbble" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://twitter.com/Benbinbin_fun" target="_blank"><img src="/blog-web/images/icons/twitter.svg" alt="twitter" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://weibo.com/binbindesign" target="_blank"><img src="/blog-web/images/icons/weibo.svg" alt="weibo" class="w-auto h-6"></a><!--]--></div></footer></div><!--]--></div>
    <script type="module" src="/blog-web/assets/app.43fe0c63.js" defer></script>
  </body>
</html>

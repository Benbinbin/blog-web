<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/blog-web/images/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.css"><title>Vue Router Next | Blog</title><meta name="description" content="A blog and knowledge management system about web.">
    <link rel="modulepreload" href="/blog-web/assets/app.43fe0c63.js"><link rel="modulepreload" href="/blog-web/assets/è·¯ç”±.html.a90c8dde.js"><link rel="modulepreload" href="/blog-web/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/blog-web/assets/è·¯ç”±.html.1b79c497.js">
    <link rel="stylesheet" href="/blog-web/assets/style.b42fd117.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="min-h-screen flex flex-col"><nav class="px-4 sm:px-8 py-2 flex justify-between items-center sticky top-0 z-30 bg-white"><div class="left flex items-center space-x-0.5"><!--[--><button class="text-gray-400 hover:bg-gray-100 catelog-btn p-2 select-none text-sm font-bold hover:text-gray-900 rounded-md lg:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></svg></button><!--]--><a class="avatar p-2 hover:bg-gray-100 rounded-md" href="/blog-web/#"><img src="/blog-web/images/avatar.png" alt="avatar" class="w-10 h-10 rounded-full"></a></div><div class="right hidden sm:flex items-center space-x-0.5"><!--[--><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">All</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Network</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Frontend</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Backend</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Project</button><!--]--><!--[--><button class="text-gray-900 bg-gray-100 hover:bg-gray-200 p-2 select-none text-sm font-bold hover:text-gray-900 rounded-md hidden lg:block"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></svg></button><!--]--></div><div class="more-container sm:hidden relative"><button style="" class="p-2 select-none hover:bg-gray-100 rounded-md text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"></path></svg></button><button style="display:none;" class="p-2 select-none hover:bg-gray-100 rounded-md text-red-400 hover:text-red-500"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path></svg></button><div style="display:none;" class="more-modal p-2 absolute top-10 right-0 z-10 flex flex-col space-y-2 bg-gray-100 rounded-md opacity-90"><!--[--><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">All</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Network</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Frontend</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Backend</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Project</button><!--]--></div></div></nav><div class="relative flex-grow"><div class="theme-container no-navbar no-sidebar"><!--[--><!----><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="vue-router-next" tabindex="-1"><a class="header-anchor" href="#vue-router-next" aria-hidden="true">#</a> Vue Router Next</h1><p>é€šè¿‡ Vue.js å·²ç»ç”¨ç»„ä»¶ç»„æˆäº†æˆ‘ä»¬çš„åº”ç”¨ï¼Œå½“åŠ å…¥ Vue Router æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯<strong>å°†ï¼ˆè§†å›¾ï¼‰ç»„ä»¶æ˜ å°„åˆ°è·¯ç”±ï¼ˆURLï¼‰ä¸Š</strong>ï¼Œè®© Vue Router çŸ¥é“åœ¨å“ªé‡Œæ¸²æŸ“å®ƒä»¬ï¼Œåœ¨å•é¡µé¢åº”ç”¨å®ç°ç±»ä¼¼å¤šé¡µé¢åˆ‡æ¢çš„æ•ˆæœã€‚</p><p>ğŸ’¡ Vue Router Next æ˜¯ Vue Router v4.x ç‰ˆæœ¬ï¼Œé€‚é…äº† Vue 3ï¼Œå¤§éƒ¨åˆ† API éƒ½å¾—ä»¥ä¿ç•™ï¼Œä½†ä»æœ‰éƒ¨åˆ†ä¸€äº›ä¸å¯å…¼å®¹çš„æ”¹å˜ï¼Œä» Vue Router v3 <a href="https://next.router.vuejs.org/zh/guide/migration/index.html" target="_blank" rel="noopener noreferrer">è¿ç§»æŒ‡å—</a>å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚æœ¬æ–‡ä»‹ç» Vue Router Next çš„åŸºç¡€ä½¿ç”¨æ–¹æ³•ï¼Œä¸»è¦é’ˆå¯¹<mark>ä¸ Vue Router v3 çš„ä¸åŒç‚¹</mark>ã€‚</p><h2 id="å®‰è£…å¼•å…¥" tabindex="-1"><a class="header-anchor" href="#å®‰è£…å¼•å…¥" aria-hidden="true">#</a> å®‰è£…å¼•å…¥</h2><p>å¯ä»¥é€šè¿‡ CDN å¼•å…¥æœ€æ–°ç‰ˆæœ¬çš„ Vue Routerï¼Œè¯¥æ¨¡å—æš´éœ² <code>VueRouter</code> å¯¹è±¡ï¼Œé€šè¿‡<mark>è°ƒç”¨å…¶æ–¹æ³• <code>createRouter</code> åˆ›å»ºè·¯ç”±å®ä¾‹</mark></p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/vue-router@4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>ğŸ’¡ ä¹Ÿå¯ä»¥æŒ‡å®šç‰ˆæœ¬</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/vue-router@4.0.11/dist/vue-router.global.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>ä¹Ÿå¯ä»¥é€šè¿‡ npm å®‰è£…ï¼Œä½¿ç”¨æ–¹æ³• <code>createRouter</code> åˆ›å»ºè·¯ç”±åï¼Œé€šè¿‡ <code>app.use(router)</code> çš„æ–¹å¼å®‰è£…æ’ä»¶ï¼ˆå…¶ä¸­ <code>app</code> æ˜¯ Vue åº”ç”¨å®ä¾‹ï¼Œ<code>router</code> æ˜¯è·¯ç”±å®ä¾‹ï¼‰ï¼Œè¿™æ ·æ•´ä¸ªåº”ç”¨éƒ½æ”¯æŒè·¯ç”±ï¼ˆåœ¨å…¶ä»–å­ç»„ä»¶ä¸éœ€è¦å†å¯¼å…¥ï¼‰</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> vue-router@4
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> Vue<span class="token punctuation">.</span><span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// è·¯ç”±é…ç½®</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> VueRouter<span class="token punctuation">.</span><span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ä½¿ç”¨ hash æ¨¡å¼</span>
  history<span class="token operator">:</span> VueRouter<span class="token punctuation">.</span><span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes<span class="token punctuation">,</span> <span class="token comment">// è·¯ç”±é…ç½®</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// æ•´ä¸ªåº”ç”¨æ”¯æŒè·¯ç”±</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="åˆå§‹åŒ–" tabindex="-1"><a class="header-anchor" href="#åˆå§‹åŒ–" aria-hidden="true">#</a> åˆå§‹åŒ–</h2><p><mark>é€šè¿‡æ–¹æ³• <code>createRouter()</code> åˆ›å»ºè·¯ç”±å®ä¾‹</mark>ï¼Œå¹¶é…ç½®ç»„ä»¶å’Œè·¯ç”±çš„æ˜ å°„å…³ç³»</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> VueRouter <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// è·¯ç”±é…ç½®</span>
<span class="token comment">// è·¯ç”±å’Œç»„ä»¶çš„æ˜ å°„è§„åˆ™ï¼Œä¸€èˆ¬æ¯ä¸ªè·¯ç”± path å¯¹åº”ä¸€ä¸ªç»„ä»¶ component</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// è·¯ç”±ç½‘å€ï¼ˆurlï¼‰</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// å¯¹åº”çš„ç»„ä»¶ï¼ˆè§†å›¾ï¼‰</span>
    component<span class="token operator">:</span> Home
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/about&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> About <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>


<span class="token comment">// åˆ›å»º router å®ä¾‹ï¼Œ</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> VueRouter<span class="token punctuation">.</span><span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ä½¿ç”¨ hash æ¨¡å¼</span>
  history<span class="token operator">:</span> VueRouter<span class="token punctuation">.</span><span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// ä¼ å…¥è·¯ç”±é…ç½®</span>
  routes<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// åˆ›å»ºå’ŒæŒ‚è½½æ ¹å®ä¾‹</span>
<span class="token comment">// é€šè¿‡é€‰é¡¹ router æ³¨å…¥è·¯ç”±ï¼Œè®©æ•´ä¸ªåº”ç”¨éƒ½å¯ä»¥ä½¿ç”¨è·¯ç”±åŠŸèƒ½</span>
<span class="token function">createApp</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">&#39;#app&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>é€šè¿‡è°ƒç”¨ <code>app.use(router)</code> æ³¨å…¥è·¯ç”±åï¼Œåœ¨åº”ç”¨ä¸­å¸¸ç”¨åˆ°ä¸¤ä¸ªæ¦‚å¿µï¼ˆå…¶ä¸­ <code>this</code> è¡¨ç¤ºç»„ä»¶å®ä¾‹ï¼‰ï¼š</p><ul><li><code>router</code> æ˜¯æŒ‡è·¯ç”±å™¨ï¼Œå®ƒç”± Vue Router æ’ä»¶æä¾›çš„å¤šç§æ§åˆ¶è·¯ç”±çš„æ–¹æ³•ï¼Œåœ¨ä»»ä½•ç»„ä»¶å†…éƒ½å¯ä»¥é€šè¿‡ <code>this.$router</code> è®¿é—®è·¯ç”±å™¨</li><li><code>route</code> æ˜¯æŒ‡ä¸€ä¸ªåŒ…å«å½“å‰è·¯ç”±ä¿¡æ¯çš„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ <code>this.$route</code> è®¿é—®å½“å‰è·¯ç”±</li></ul><p>ğŸ’¡ å¦‚æœ<mark>åœ¨é€‰é¡¹ <code>setup</code> å‡½æ•°åˆ™åˆ†åˆ«é€šè¿‡å‡½æ•° <code>useRouter()</code> è®¿é—®è·¯ç”±å®ä¾‹ï¼Œé€šè¿‡å‡½æ•° <code>useRoute()</code> è®¿é—®å½“å‰è·¯ç”±</mark></p><p>æœ€ååˆ«å¿˜äº†åœ¨ Vue å®ä¾‹ï¼ˆç»„ä»¶ï¼‰çš„æ¨¡æ¿ä¸­ä½¿ç”¨ Vue Router çš„<strong>å†…ç½®ç»„ä»¶ <code>&lt;router-view&gt;</code></strong>ï¼Œè¿™æ ·æ‰å¯ä»¥å°†å½“å‰è·¯ç”±åŒ¹é…çš„ç»„ä»¶æ¸²æŸ“åœ¨åˆ°é¡µé¢ä¸Šã€‚</p><p>å¯ä»¥ä½¿ç”¨ Vue Router çš„<strong>å†…ç½®ç»„ä»¶ <code>&lt;router-link&gt;</code></strong> ä¸ºåœ¨é¡µé¢ä¸­æ·»åŠ ä¸€ä¸ªå¯¼èˆªçš„ UI ç»„ä»¶ï¼Œå®ƒé»˜è®¤æ¸²æŸ“ä¸ºä¸€ä¸ª <code>&lt;a&gt;</code> æ ‡ç­¾</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--ä½¿ç”¨ router-link ç»„ä»¶è¿›è¡Œå¯¼èˆª --&gt;</span>
    <span class="token comment">&lt;!--é€šè¿‡ä¼ é€’ `to` æ¥æŒ‡å®šé“¾æ¥ --&gt;</span>
    <span class="token comment">&lt;!--`&lt;router-link&gt;` å°†å‘ˆç°ä¸€ä¸ªå¸¦æœ‰æ­£ç¡® `href` å±æ€§çš„ `&lt;a&gt;` æ ‡ç­¾--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Go to Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Go to About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

  <span class="token comment">&lt;!-- è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶å°†æ¸²æŸ“åœ¨è¿™é‡Œ --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="å†å²æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å†å²æ¨¡å¼" aria-hidden="true">#</a> å†å²æ¨¡å¼</h2><p>ä¼ é€’ç»™æ–¹æ³• <code>VueRouter.createRouter({})</code> çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨ Vue Route Next ä¸­æŠ›å¼ƒäº†å±æ€§ <code>mode</code> ï¼Œéœ€è¦æ˜¾å¼ä½¿ç”¨<mark>å±æ€§<code>history</code> æ¥è®¾ç½®é¡¹ç›®ä½¿ç”¨ä½•ç§å†å²æ¨¡å¼</mark></p><h3 id="hash-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#hash-æ¨¡å¼" aria-hidden="true">#</a> Hash æ¨¡å¼</h3><p><mark>é€šè¿‡ <code>createWebHashHistory()</code> åˆ›å»º</mark></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHashHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>åœ¨è¯¥æ¨¡å¼ä¸‹é¡¹ç›®å†…éƒ¨<strong>ä¼ é€’çš„å®é™… URL ä¹‹å‰ä½¿ç”¨äº†ä¸€ä¸ªå“ˆå¸Œå­—ç¬¦ <code>#</code></strong>ï¼Œç”±äºè¿™éƒ¨åˆ† URL ä»æœªè¢«å‘é€åˆ°æœåŠ¡å™¨ï¼Œæ‰€ä»¥å®ƒä¸éœ€è¦åœ¨æœåŠ¡å™¨å±‚é¢ä¸Šè¿›è¡Œä»»ä½•ç‰¹æ®Šå¤„ç†ï¼Œä¸ä¼šå¼•èµ·é¡µé¢é‡è½½ã€‚ä¸è¿‡<strong>å®ƒåœ¨ SEO ä¸­ç¡®å®æœ‰ä¸å¥½çš„å½±å“</strong>ã€‚</p><h3 id="html5-æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#html5-æ¨¡å¼" aria-hidden="true">#</a> HTML5 æ¨¡å¼</h3><p><mark>é€šè¿‡ <code>createWebHistory()</code> åˆ›å»º</mark>ï¼Œéœ€è¦<a href="https://next.router.vuejs.org/guide/essentials/history-mode.html#example-server-configurations" target="_blank" rel="noopener noreferrer">åç«¯æœåŠ¡å™¨é…åˆ</a></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createRouter<span class="token punctuation">,</span> createWebHistory <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  history<span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">//...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å½“ä½¿ç”¨è¿™ç§å†å²æ¨¡å¼æ—¶ï¼ŒURL ä¼šçœ‹èµ·æ¥å’Œã€Œæ­£å¸¸ã€çš„è·¯å¾„ä¸€æ ·ï¼Œä¸è¿‡éœ€è¦åŒæ—¶åœ¨æœåŠ¡å™¨ä¸Šæ·»åŠ ä¸€ä¸ªå›é€€è·¯ç”±ï¼Œè®© URL ä¸åŒ¹é…ä»»ä½•é™æ€èµ„æºæ—¶ï¼Œå®ƒä¹Ÿæä¾›ä¸ä½ çš„åº”ç”¨ç¨‹åºä¸­çš„ <code>index.html</code> ç›¸åŒçš„é¡µé¢ã€‚å…³äº Vue Router é‡‡ç”¨ HTML5 æ¨¡å¼æ—¶ï¼ŒæœåŠ¡å™¨çš„é…ç½®ç¤ºä¾‹å¯ä»¥å‚è€ƒ<a href="https://next.router.vuejs.org/guide/essentials/history-mode.html#example-server-configurations" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h2 id="è·¯ç”±é…ç½®" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±é…ç½®" aria-hidden="true">#</a> è·¯ç”±é…ç½®</h2><p>ä¼ é€’ç»™æ–¹æ³• <code>VueRouter.createRouter({})</code> çš„å‚æ•°æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå…¶ä¸­å±æ€§ <code>routes</code> æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸€ä¸ªå…ƒç´ è¡¨ç¤ºä¸€ä¸ªè·¯ç”±ï¼ŒåŒ…å«ç›¸åº”çš„é…ç½®ä¿¡æ¯</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  history<span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&#39;/user/:username&#39;</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> User
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æœ€åŸºæœ¬çš„ä¸€ä¸ªè·¯ç”±æ˜¯ç”±è·¯å¾„ <code>path</code> å’Œç›¸åº”çš„è§†å›¾ç»„ä»¶ <code>component</code> æ„æˆ</p><h3 id="è·¯ç”±å…ƒä¿¡æ¯" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±å…ƒä¿¡æ¯" aria-hidden="true">#</a> è·¯ç”±å…ƒä¿¡æ¯</h3><p>åœ¨å®šä¹‰è·¯ç”±è§„åˆ™æ—¶ï¼Œå¯ä»¥è®¾ç½®é€‰é¡¹ <code>meta</code> å…ƒä¿¡æ¯ï¼Œä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼Œä»¥é”®å€¼å¯¹çš„å½¢å¼<strong>å­˜å‚¨å…³äºè¯¥è·¯ç”±çš„ç›¸å…³ä¿¡æ¯</strong>ï¼Œç›¸å½“äºä¸ºè·¯ç”±å¢æ·»ä¸€äº›é™¤äº†è·¯å¾„ä»¥ä¸ºçš„é™„åŠ ä¿¡æ¯ï¼Œè¿™äº›é¢å¤–çš„ä¿¡æ¯å¯ä»¥ç”¨åœ¨è·¯ç”±å®ˆå«ä¸Šï¼Œä¾‹å¦‚åœ¨å¯¼èˆªå®ˆå«ä¸­åŸºäº <code>meta</code> çš„ä¿¡æ¯åˆ¤æ–­è®¿é—®çš„è·¯å¾„æ˜¯å¦éœ€è¦ç™»å½•éªŒè¯ç­‰ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è·¯ç”±é…ç½®</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/posts&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> PostsLayout<span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;new&#39;</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> PostsNew<span class="token punctuation">,</span>
        <span class="token comment">// åªæœ‰ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·æ‰èƒ½åˆ›å»ºå¸–å­</span>
        meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiresAuth<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;:id&#39;</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> PostsDetail
        <span class="token comment">// ä»»ä½•äººéƒ½å¯ä»¥é˜…è¯»æ–‡ç« </span>
        meta<span class="token operator">:</span> <span class="token punctuation">{</span> requiresAuth<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>å¯¹äºä»¥ä¸Šç¤ºä¾‹ï¼Œå¦‚æœå¸Œæœ›åŸºäºè·¯ç”±çš„ <code>meta</code> ä¿¡æ¯åˆ¤æ–­æ˜¯å¦éœ€è¦è¿›è¡ŒæˆæƒéªŒè¯ï¼Œå¯ä»¥ä½¿ç”¨ç»„ä»¶å†…å®ˆå«</p><p>ğŸ’¡ ä¸€ä¸ªè·¯ç”±å¯ä»¥åŒ¹é…åˆ°å¤šä¸ªè·¯ç”±ï¼ˆæ‰€æœ‰åŒ¹é…åˆ°çš„è·¯ç”±è®°å½•ä¼šæš´éœ²ä¸º <code>$route.matched</code> æ•°ç»„ï¼Œä¸€èˆ¬éœ€è¦é€šè¿‡éå†æ•°ç»„å„å…ƒç´ ï¼Œæ¥æ£€æŸ¥ç‰¹æ€§çš„å±æ€§ï¼‰ï¼ŒVue Router ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª <strong><code>$route.meta</code> å¯¹è±¡</strong>ï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>éé€’å½’åˆå¹¶æ‰€æœ‰ <code>meta</code> å­—æ®µçš„å¯¹è±¡</strong>ï¼ˆä»çˆ¶å­—æ®µåˆ°å­å­—æ®µï¼‰ï¼Œå¯ä»¥æ›´æ–¹ä¾¿åœ°è®¿é—®è·¯ç”±çš„å…ƒä¿¡æ¯ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// åŸºäºè·¯ç”±çš„ `meta` ä¿¡æ¯ï¼Œåˆ¤æ–­å½“å‰å¯¼èˆªæ˜¯å¦éœ€è¦è¿›è¡ŒæˆæƒéªŒè¯</span>
  <span class="token comment">// é»˜è®¤æ˜¯éœ€è¦é€šè¿‡éå† to.matched æ•°ç»„ï¼Œæ£€æŸ¥æ¯æ¡è·¯ç”±è®°å½•ä¸­çš„ meta å¯¹è±¡</span>
  <span class="token comment">// to.matched.some(record =&gt; record.meta.requiresAuth)</span>
  <span class="token comment">// ç°åœ¨å¯ä»¥ç›´æ¥é€šè¿‡æ‰€æœ‰å…ƒä¿¡æ¯åˆå¹¶åå¾—åˆ°çš„ to.meta å¯¹è±¡è¿›è¡Œæ£€æŸ¥</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>requiresAuth <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>auth<span class="token punctuation">.</span><span class="token function">isLoggedIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¦‚æœæ­¤è·¯ç”±éœ€è¦æˆæƒï¼Œè¯·æ£€æŸ¥æ˜¯å¦å·²ç™»å½•</span>
    <span class="token comment">// å¦‚æœæ²¡æœ‰ï¼Œåˆ™é‡å®šå‘åˆ°ç™»å½•é¡µé¢</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span>
      <span class="token comment">// ä¿å­˜æˆ‘ä»¬æ‰€åœ¨çš„ä½ç½®ï¼Œä»¥ä¾¿ä»¥åå†æ¥</span>
      query<span class="token operator">:</span> <span class="token punctuation">{</span> redirect<span class="token operator">:</span> to<span class="token punctuation">.</span>fullPath <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>ğŸ’¡ å¦‚æœä½¿ç”¨ TypeScript ç¼–å†™ä»£ç ï¼Œå¯ä»¥é€šè¿‡<strong>æ‰©å±• <code>RouteMeta</code> æ¥å£æ¥è¾“å…¥ meta å­—æ®µ</strong></p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// typings.d.ts or router.ts</span>
<span class="token keyword">import</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">&#39;vue-router&#39;</span> <span class="token punctuation">{</span>
  <span class="token keyword">interface</span> <span class="token class-name">RouteMeta</span> <span class="token punctuation">{</span>
    <span class="token comment">// æ˜¯å¯é€‰çš„</span>
    isAdmin<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span>
    <span class="token comment">// æ¯ä¸ªè·¯ç”±éƒ½å¿…é¡»å£°æ˜</span>
    requiresAuth<span class="token operator">:</span> <span class="token builtin">boolean</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="é¡µé¢æ»šåŠ¨" tabindex="-1"><a class="header-anchor" href="#é¡µé¢æ»šåŠ¨" aria-hidden="true">#</a> é¡µé¢æ»šåŠ¨</h3><p>åœ¨åˆ›å»ºè·¯ç”±å®ä¾‹æ—¶ï¼Œå¯ä»¥é€šè¿‡<strong>é€‰é¡¹ <code>scrollBehavior</code> è®¾ç½®åˆ‡æ¢é¡µé¢æ—¶å¦‚ä½•æ»šåŠ¨</strong>ã€‚</p><p>è¯¥é€‰é¡¹æ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå‰ä¸¤ä¸ªå‚æ•°æ¥æ”¶ <code>to</code> å’Œ <code>from</code> è·¯ç”±å¯¹è±¡ï¼Œç¬¬ä¸‰ä¸ªå‚æ•° <code>savedPosition</code> å®ƒæ˜¯è®°å½•å½“å‰é¡µé¢ä½ç½®ï¼›è¿”å›ä¸€ä¸ª <a href="https://developer.mozilla.org/en-US/docs/Web/API/ScrollToOptions" target="_blank" rel="noopener noreferrer"><code>ScrollToOptions</code></a> ä½ç½®å¯¹è±¡ï¼ˆå‘Šè¯‰æµè§ˆå™¨è¯¥å¦‚ä½•æ»šåŠ¨é¡µé¢ï¼‰æˆ– <code>savedPosition</code>ï¼ˆå‘Šè¯‰æµè§ˆå™¨å°†é¡µé¢æ»šåŠ¨åˆ°ä¹‹å‰çš„ä½ç½®ï¼‰</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">scrollBehavior</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> savedPosition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>savedPosition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¦‚æœé€šè¿‡ä¸Šä¸€é¡µ/ä¸‹ä¸€é¡µæŒ‰é’®è¿›è¡Œå¯¼èˆª</span>
      <span class="token comment">// åˆ™é¡µé¢ä¼šé€šè¿‡ savedPosition ä¿ç•™ä¹‹å‰çš„ä½ç½®</span>
      <span class="token keyword">return</span> savedPosition
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¦‚æœæ²¡æœ‰ä½ç½®è®°å½•ï¼Œé»˜è®¤å°±æ˜¯æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨</span>
      <span class="token keyword">return</span><span class="token punctuation">{</span> left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>è¿”å›æ»šåŠ¨ä½ç½®çš„å¯¹è±¡ä¿¡æ¯å¯ä»¥æœ‰å¤šç§æ ¼å¼ï¼š</p><ul><li><p><mark>æ»šåŠ¨åˆ°æŒ‡å®šçš„åæ ‡è½´ <code>return { left: number, top: number }</code></mark>ï¼Œä¸€èˆ¬å¯¹äºæ‰€æœ‰è·¯ç”±å¯¼èˆªï¼Œç®€å•åœ°è®©é¡µé¢æ»šåŠ¨åˆ°é¡¶éƒ¨ <code>return { left: 0, top: 0 }</code></p></li><li><p><mark>åœ¨è¿”å›å¯¹è±¡ä¸­é€šè¿‡å±æ€§ <code>el</code> æŒ‡å®šä¸€ä¸ªå…ƒç´ ï¼ˆé€šè¿‡ CSS é€‰æ‹©å™¨æˆ–ç›´æ¥ä¼ é€’ä¸€ä¸ª DOMï¼‰</mark>ï¼Œè¿™æ ·æ»šåŠ¨çš„ä½ç§»å°±æ˜¯ç›¸å¯¹äºè¯¥å…ƒç´ çš„</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">scrollBehavior</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> savedPosition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å§‹ç»ˆåœ¨å…ƒç´  #main ä¸Šæ–¹æ»šåŠ¨ 10px</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// é€šè¿‡ el ä¼ é€’ä¸€ä¸ª CSS é€‰æ‹©å™¨æˆ–ä¸€ä¸ª DOM å…ƒç´ </span>
      el<span class="token operator">:</span> <span class="token string">&#39;#main&#39;</span><span class="token punctuation">,</span>
      <span class="token comment">// ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™</span>
      <span class="token comment">// el: document.getElementById(&#39;main&#39;),</span>
      top<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li><li><p>æ»šåŠ¨åˆ°æŒ‡å®šé”šç‚¹</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">scrollBehavior</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> savedPosition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>hash<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        el<span class="token operator">:</span> to<span class="token punctuation">.</span>hash<span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p>æ»šåŠ¨åˆ°åŸæ¥ä½ç½® <code>return savedPosition</code> è¯¥å€¼å½“ä¸”ä»…å½“é€šè¿‡æµè§ˆå™¨çš„ <strong>å‰è¿›/åé€€</strong> æŒ‰é’®è§¦å‘ï¼ˆpopstate å¯¼èˆªï¼‰æ—¶æ‰å¯ç”¨</p></li><li><p>è¿”å›ä¸€ä¸ª falsy å€¼æˆ–ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œä¸å‘ç”Ÿæ»šåŠ¨</p></li></ul><p>ğŸ’¡ è¿˜å¯ä»¥åœ¨è¿”å›çš„å¯¹è±¡ä¸­æ·»åŠ  <code>behavior</code> é€‰é¡¹ï¼Œå¹¶å°†å€¼è®¾ç½®ä¸º <code>smooth</code>ï¼Œå°±å¯ä»¥å¯ç”¨åŸç”Ÿçš„å¹³æ»‘æ»šåŠ¨æ•ˆæœ</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ...</span>
<span class="token function">scrollBehavior</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> savedPosition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>hash<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      el<span class="token operator">:</span> to<span class="token punctuation">.</span>hash<span class="token punctuation">,</span>
      behavior<span class="token operator">:</span> <span class="token string">&#39;smooth&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ğŸ’¡è¯¥æ–¹æ³•æ”¯æŒè¿”å›ä¸€ä¸ª Promiseï¼Œé€šè¿‡ <code>resolve</code> ä¸€ä¸ªå¯¹è±¡æ¥è¡¨ç¤ºé¢„æœŸçš„ä½ç½®ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨é¡µé¢æ»šåŠ¨ä¹‹å‰ç¨ä½œç­‰å¾…ï¼Œå®ç°<strong>å¼‚æ­¥æ»šåŠ¨/å»¶è¿Ÿæ»šåŠ¨</strong>ã€‚é€šè¿‡è¿™ä¸ªæ–¹æ³•å¯ä»¥è®©æ»šåŠ¨è¡Œä¸ºå’Œé¡µé¢è¿‡æ¸¡æ›´å¥½åœ°é…åˆï¼Œå®ç°æ›´ä¼˜é›…çš„åŠ¨æ•ˆã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">scrollBehavior</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> savedPosition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> top<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span> <span class="token comment">// å»¶è¿Ÿ 500ms åæ‰è¿›è¡Œé¡µé¢æ»šåŠ¨</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>ï¼Œ
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="å‘½åè·¯ç”±" tabindex="-1"><a class="header-anchor" href="#å‘½åè·¯ç”±" aria-hidden="true">#</a> å‘½åè·¯ç”±</h3><p>å¯ä»¥åœ¨é…ç½®è·¯ç”±æ—¶ï¼Œé€šè¿‡é€‰é¡¹ <code>name</code> ç»™æŸä¸ªè·¯ç”±è®¾ç½®åç§°ï¼ˆåç§°éœ€è¦å”¯ä¸€ï¼‰ï¼Œè¿™æ ·åœ¨ä½¿ç”¨è·¯å¾„è¾ƒé•¿çš„è·¯ç”±è¿›è¡Œå¯¼èˆªæ—¶ï¼Œå¯ä»¥é€šè¿‡è¯¥åç§°æ¥æŒ‡ä»£è¯¥è·¯ç”±ï¼ˆå¦‚æœæ˜¯åŠ¨æ€è·¯ç”±ï¼Œè¿˜ä¼šé…åˆè·¯ç”±å‚æ•°ä½¿ç”¨ï¼‰ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è·¯ç”±è§„åˆ™</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/user/:username&#39;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&#39;user&#39;</span>
    component<span class="token operator">:</span> User
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å£°æ˜å¼å¯¼èˆªï¼Œä½¿ç”¨è·¯ç”±åç§°ï¼Œå¹¶ä¼ é€’è·¯ç”±å‚æ•°ï¼Œç”± Vue Router æ‹¼æ¥å¾—åˆ°ç›¸åº”çš„ url</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ name: <span class="token punctuation">&#39;</span>user<span class="token punctuation">&#39;</span>, params: { username: <span class="token punctuation">&#39;</span>ben<span class="token punctuation">&#39;</span> }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  User
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ç¼–ç¨‹å¼å¯¼èˆª</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> username<span class="token operator">:</span> <span class="token string">&#39;ben&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>ä»¥ä¸Šä¸¤ä¸ªå¯¼èˆªæŒ‡å‘çš„è·¯å¾„éƒ½æ˜¯ <code>/user/ben</code></p><h3 id="åˆ«å" tabindex="-1"><a class="header-anchor" href="#åˆ«å" aria-hidden="true">#</a> åˆ«å</h3><p>å¯ä»¥åœ¨é…ç½®è·¯ç”±æ—¶ï¼Œé€šè¿‡é€‰é¡¹ <code>alias</code> ä¸ºè·¯ç”±è®¾ç½®<strong>åˆ«å</strong>ï¼Œè¯¥åŠŸèƒ½å¯ä»¥è®©ä½ è‡ªç”±åœ°å°†åŒä¸€ä¸ª <strong>UI ç»“æ„æ˜ å°„åˆ°ä»»æ„çš„ URL</strong>ï¼Œè€Œä¸æ˜¯å—é™äºåµŒå¥—è·¯ç”±ç»“æ„ï¼Œä¾‹å¦‚å®ç°ç±»ä¼¼çŸ­é“¾æ¥çš„åŠŸèƒ½æ–¹ä¾¿ç”¨æˆ·è®¿é—®ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è·¯ç”±é…ç½®</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> Homepage<span class="token punctuation">,</span>
    alias<span class="token operator">:</span> <span class="token string">&#39;/home&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ğŸ’¡ è·¯ç”±åˆ«åå’Œè·¯ç”±é‡å®šå‘æ˜¯ä¸åŒçš„ï¼Œè™½ç„¶ä¸¤è€…éƒ½å¯ä»¥å®ç°å°†ä¸€ä¸ªè·¯å¾„æ˜ å°„åˆ°å¦ä¸€ä¸ªè§†å›¾ç»„ä»¶çš„æ•ˆæœï¼Œä½†æ˜¯å¦‚æœè·¯å¾„ <code>/a</code> çš„è·¯ç”±åˆ«åæ˜¯ <code>/b</code>ï¼Œè¿™æ„å‘³ç€å½“ç”¨æˆ·è®¿é—® <code>/b</code> æ—¶ï¼Œ<strong>URL ä¼šä¿æŒä¸º <code>/b</code>ï¼Œè€Œä¸æ˜¯è·³è½¬åˆ° <code>/a</code></strong>ï¼Œä½†æ˜¯ä½¿ç”¨çš„è·¯ç”±åŒ¹é…æ˜¯ <code>/a</code> è·¯ç”±çš„ï¼Œå°±åƒç”¨æˆ·è®¿é—® <code>/a</code> ä¸€æ ·ã€‚</p><p>è¯¥é€‰é¡¹çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæä¾›å¤šä¸ªåˆ«åï¼Œå³å®ç°<strong>å¤šä¸ªç½‘å€æŒ‡å‘åŒä¸€ä¸ªé¡µé¢</strong>ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/users/:id&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> UsersByIdLayout<span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// ä¸ºè¿™ 3 ä¸ª URL å‘ˆç° UserDetails</span>
      <span class="token comment">// - /users/24</span>
      <span class="token comment">// - /users/24/profile</span>
      <span class="token comment">// - /24</span>
      <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">&#39;profile&#39;</span><span class="token punctuation">,</span>
        component<span class="token operator">:</span> UserDetails<span class="token punctuation">,</span>
        alias<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;/:id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>ğŸ’¡ å¦‚æœåŸè·¯å¾„æœ‰å‚æ•°ï¼Œä¸ºäº† SEO è§„èŒƒï¼Œ<strong>è¯·åœ¨åˆ«åä¸­è€¶åŒ…å«ç›¸åº”çš„å‚æ•°</strong></p><h3 id="å‘½åè§†å›¾" tabindex="-1"><a class="header-anchor" href="#å‘½åè§†å›¾" aria-hidden="true">#</a> å‘½åè§†å›¾</h3><p>å¯ä»¥åœ¨é¡µé¢æ¨¡æ¿ä¸­<strong>åŒæ—¶è®¾ç½®å¤šä¸ª <code>&lt;router-view&gt;</code></strong>ï¼ˆå¹³è¡Œå…³ç³»ï¼Œè€Œä¸æ˜¯é€šè¿‡åµŒå¥—è·¯ç”±å’ŒåµŒå¥—çš„ <code>&lt;router-view&gt;</code> çš„æ˜ å°„å®ç°ï¼‰ï¼Œä¸è¿‡å¾—ä¸ºæ¯ä¸ªè§†å›¾è®¾ç½®åç§° <code>&lt;router-view name=&quot;viewName&gt;</code>ï¼ˆæ²¡æœ‰è®¾ç½®åå­—åˆ™é»˜è®¤ä¸º <code>default</code>ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥<strong>åœ¨ä¸€ä¸ªè·¯ç”±ä¸‹ã€Œå¹³è¡Œã€æ¸²æŸ“å‡ºå¤šä¸ªç»„ä»¶</strong>ã€‚</p><p>è¿™æ—¶åº”è¯¥åœ¨è·¯ç”±çš„é…ç½®ä¸­ï¼Œç›¸åº”åœ°<strong>å¯¹äºåŒä¸€ä¸ªè·¯ç”±è¦è®¾ç½®å¤šä¸ªç»„ä»¶</strong>ï¼ˆå¦‚æœç»„ä»¶æ•°é‡å°‘äºå¹³è¡Œçš„ <code>&lt;router-view&gt;</code> æ•°é‡ï¼Œåˆ™ç›¸åº”çš„å¤šä½™çš„è§†å›¾ç»„ä»¶å°†ä¸ä¼šæ¸²æŸ“ï¼‰ï¼Œå³é€‰é¡¹ <code>components</code>ï¼ˆæ­¤æ—¶é€‰é¡¹<strong>ä¸</strong>æ˜¯ <code>component</code>ï¼‰å˜æˆä¸€ä¸ªå¯¹è±¡ï¼Œè®¾ç½®å¤šä¸ªç»„ä»¶ï¼Œæ¯ä¸€ä¸ªå±æ€§éƒ½æ˜¯ä¸€ä¸ªç»„ä»¶ï¼Œé”®ä¸ºè§†å›¾ <code>&lt;router-view&gt;</code> çš„çš„å‘½å <code>name</code>ï¼Œå€¼ä¸ºç»„ä»¶å</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  history<span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span>
      <span class="token comment">// å¯¹åº”äºå¤šä¸ªç»„ä»¶</span>
      components<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// é»˜è®¤ `&lt;router-view&gt;` å¯¹åº”çš„ç»„ä»¶</span>
        <span class="token keyword">default</span><span class="token operator">:</span> Home<span class="token punctuation">,</span>
        <span class="token comment">// è¿™æ—¶ ES6 å¯¹è±¡å±æ€§çš„ç¼©å†™ï¼Œç›¸å½“äº LeftSidebar: LeftSidebar</span>
        <span class="token comment">// å±æ€§åä¸ `&lt;router-view&gt;` ä¸Šçš„ `name` å±æ€§åŒ¹é…</span>
        LeftSidebar<span class="token punctuation">,</span>
        RightSidebar<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>view left-sidebar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LeftSidebar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>view main-content<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>view right-sidebar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>RightSidebar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ğŸ’¡ å‘½åè§†å›¾å’ŒåµŒå¥—è·¯ç”±éƒ½å¯ä»¥åœ¨ä¸€ä¸ªé¡µé¢è®¾ç½®å¤šä¸ªè§†å›¾ <code>&lt;router-view&gt;</code> ç»„ä»¶ï¼Œä½†ä½œç”¨ä¸åŒ</p><ul><li>å‘½åè§†å›¾åŒä¸€ä¸ªé¡µé¢è®¾ç½®å¤šä¸ª <code>&lt;router-view&gt;</code>ï¼Œå®ƒä»¬æ¸²æŸ“å‡ºæ¥çš„èŠ‚ç‚¹å¯ä»¥æ˜¯ã€Œå¹³è¡Œã€å…³ç³»ï¼Œå®ç°ä¸åŒè·¯ç”±å¤ç”¨åŒä¸€ä¸ªå¸ƒå±€æ¨¡æ¿</li><li>åµŒå¥—è·¯ç”±è®¾ç½®ï¼ˆåœ¨çˆ¶å…ƒç´ ä¸­ï¼‰è®¾ç½®ä¸€ä¸ª <code>&lt;couter-view&gt;</code>ï¼Œæ¸²æŸ“å‡ºæ¥çš„èŠ‚ç‚¹æ˜¯çˆ¶å­åµŒå¥—å…³ç³»ï¼Œä¸€èˆ¬ç”¨äºå±€éƒ¨çš„å¸ƒå±€æ›´æ”¹</li></ul><p>ğŸ’¡ å¯ä»¥æ··ç”¨å‘½åè§†å›¾å’ŒåµŒå¥—è§†å›¾ï¼Œå®ç°æ›´å¤æ‚çš„å¸ƒå±€</p><p><img src="/blog-web/assets/nested-route-vs-named-view.b1245f48.png" alt="å‘½åè§†å›¾ VS åµŒå¥—è§†å›¾"></p><p>ä»¥ä¸Šç¤ºä¾‹ä¸­çˆ¶ç»„ä»¶ <code>UserSettings</code> ä¸­æœ‰ä¸€ä¸ªå¸¸è§„ç»„ä»¶ <code>Nav</code>ï¼Œè¿˜æœ‰åŸºäºè·¯ç”±çš„ä¸‰ä¸ªåµŒå¥—ç»„ä»¶<code>UserEmailsSubscriptions</code>ã€<code>UserProfile</code>ã€<code>UserProfilePreview</code>ï¼Œå…¶ä¸­ç»„ä»¶ <code>UserProfile</code>ã€<code>UserProfilePreview</code> æ˜¯å±äºã€Œå¹³è¡Œã€å…³ç³»çš„ã€‚</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- UserSettings.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>User Settings<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NavBar</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>helper<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ç›¸åº”çš„è·¯ç”±é…ç½®</span>
<span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token string">&#39;/settings&#39;</span><span class="token punctuation">,</span>
  component<span class="token operator">:</span> UserSettings<span class="token punctuation">,</span>
  <span class="token comment">// åµŒå¥—è·¯ç”±</span>
  children<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&#39;emails&#39;</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> UserEmailsSubscriptions
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&#39;profile&#39;</span><span class="token punctuation">,</span>
      <span class="token comment">// å‘½åè§†å›¾</span>
      components<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">default</span><span class="token operator">:</span> UserProfile<span class="token punctuation">,</span>
        helper<span class="token operator">:</span> UserProfilePreview
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>ğŸ’¡ å…¶å®å‘½åè§†å›¾å¯ä»¥çœ‹ä½œæ˜¯æ›´ä¸€èˆ¬è·¯ç”±-ç»„ä»¶æ˜ å°„è§„åˆ™ï¼Œå¦‚æœé¡µé¢åªéœ€è¦ä¸€ä¸ª <code>&lt;router-view&gt;</code> ä¹Ÿå¯ä»¥åœ¨è®¾ç½®è·¯ç”±æ—¶ä½¿ç”¨ <code>components</code> é€‰é¡¹ï¼Œåªæ˜¯é‡Œé¢åªè®¾ç½® <code>default: componentName</code> ä¸€ä¸ªç»„ä»¶ã€‚</p><h3 id="é‡å®šå‘" tabindex="-1"><a class="header-anchor" href="#é‡å®šå‘" aria-hidden="true">#</a> é‡å®šå‘</h3><p>åœ¨è·¯ç”±çš„é…ç½®ä¸­é€šè¿‡é€‰é¡¹ <code>redirect</code> æ¥å®ç°é‡å®šå‘ï¼Œå®ç°ç”¨æˆ·è®¿é—® <code>/a</code> è·¯å¾„æ—¶ï¼Œå¯¼èˆªè½¬å‘è·¯å¾„ <code>/b</code> çš„æ•ˆæœã€‚</p><p>è¯¥é€‰é¡¹çš„å±æ€§å€¼å¯ä»¥æ˜¯è¡¨ç¤ºè·¯å¾„çš„å­—ç¬¦ä¸²ï¼Œæˆ–è¡¨ç¤ºå¦ä¸€ä¸ªè·¯ç”±çš„åç§°ï¼Œæˆ–ä¸€ä¸ªåŒ…å«è·¯ç”±ä¿¡æ¯çš„å¯¹è±¡ï¼Œæˆ–ä¸€ä¸ªæ–¹æ³•ï¼ˆå…¶è¿”å›å€¼æ˜¯å‰é¢ä¸‰ç§è¡¨ç¤ºè·¯ç”±çš„å½¢å¼ä¹‹ä¸€ï¼‰</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è·¯ç”±é…ç½®</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/home&#39;</span><span class="token punctuation">,</span>
    redirect<span class="token operator">:</span> <span class="token string">&#39;/&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// é‡å®šå‘çš„ç›®æ ‡ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‘½åçš„è·¯ç”±</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/home&#39;</span><span class="token punctuation">,</span>
    redirect<span class="token operator">:</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;homepage&#39;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>ï¼Œ
  <span class="token punctuation">{</span>
    <span class="token comment">// è¯¥åŠ¨æ€è·¯ç”±å¯ä»¥å®ç°é‡å®šå‘</span>
    <span class="token comment">// ä¾‹å¦‚ä»è·¯ç”± /home/hello é‡å®šå‘åˆ° /home?q=hello</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/home/:searchText&#39;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">redirect</span><span class="token operator">:</span> <span class="token parameter">route</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// æ–¹æ³•æ¥æ”¶å½“å‰çš„è·¯ç”±ä½œä¸ºå‚æ•°</span>
      <span class="token comment">// return é‡å®šå‘çš„å­—ç¬¦ä¸²è·¯å¾„/è·¯å¾„å¯¹è±¡</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/home&#39;</span><span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token punctuation">{</span> q<span class="token operator">:</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>searchText <span class="token punctuation">}</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>ğŸ’¡ è¯¥é€‰é¡¹çš„å€¼ä¹Ÿæ”¯æŒæ˜¯ç›¸å¯¹è·¯å¾„ï¼ˆä¾‹å¦‚ä¸ä»¥ <code>/</code> å¼€å¤´çš„å­—ç¬¦ä¸²è·¯å¾„å°±æ˜¯ç›¸å¯¹è·¯å¾„ï¼‰ï¼Œå®ç°ç›¸å¯¹é‡å®šå‘</p><p>âš ï¸ å¯¼èˆªå®ˆå«å¹¶<strong>ä¸</strong>åº”ç”¨åœ¨è·³è½¬è·¯ç”±ä¸Šï¼Œè€Œåº”ç”¨åœ¨å…¶æŒ‡å‘çš„è·¯ç”±ä¸Šï¼Œå› æ­¤ä»¥ä¸Šä¾‹å­å¦‚æœé’ˆå¯¹ <code>/home</code> è·¯ç”±æ·»åŠ ä¸€ä¸ª <code>beforeEnter</code> å®ˆå«å¹¶ä¸ä¼šèµ·ä½œç”¨ã€‚</p><p>ğŸ’¡ å¦‚æœè·¯ç”±é…ç½®äº†é€‰é¡¹ <code>redirect</code> æ—¶ï¼Œå¯ä»¥çœç•¥ <code>component</code> é…ç½®ï¼Œå› ä¸ºè¯¥è·¯ç”±ä»æ¥æ²¡æœ‰è¢«ç›´æ¥è®¿é—®è¿‡ï¼Œæ‰€ä»¥æ²¡æœ‰ç»„ä»¶è¦æ¸²æŸ“ã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯åµŒå¥—è·¯ç”±ï¼Œå¦‚æœä¸€ä¸ªè·¯ç”±æœ‰ <code>children</code> å’Œ <code>redirect</code> å±æ€§ï¼Œå®ƒä¹Ÿåº”è¯¥æœ‰ <code>component</code> å±æ€§ã€‚</p><h3 id="è·¯ç”±æ‡’åŠ è½½" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±æ‡’åŠ è½½" aria-hidden="true">#</a> è·¯ç”±æ‡’åŠ è½½</h3><p>Vue Router æ”¯æŒåŠ¨æ€å¯¼å…¥ï¼ŒæŠŠä¸åŒè·¯ç”±å¯¹åº”çš„ç»„ä»¶åˆ†å‰²æˆä¸åŒçš„ä»£ç å—ï¼Œç„¶å<strong>å½“è·¯ç”±è¢«è®¿é—®çš„æ—¶å€™æ‰åŠ è½½å¯¹åº”ç»„ä»¶</strong>ï¼Œè¿™æ ·å°±ä¼šæ›´åŠ é«˜æ•ˆã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// å°† import UserDetails from &#39;./views/UserDetails&#39;</span>
<span class="token comment">// æ›¿æ¢æˆ</span>
<span class="token keyword">const</span> <span class="token function-variable function">UserDetails</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./views/UserDetails&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/users/:id&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> UserDetails <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ğŸ’¡ ä¸€èˆ¬æ¥è¯´ï¼Œå¯¹æ‰€æœ‰çš„è·¯ç”±<strong>éƒ½ä½¿ç”¨åŠ¨æ€å¯¼å…¥</strong>æ˜¯ä¸ªå¥½ä¸»æ„ã€‚ä½†<strong>ä¸è¦</strong>åœ¨è·¯ç”±ä¸­ä½¿ç”¨<a href="https://v3.vuejs.org/guide/component-dynamic-async.html#async-components" target="_blank" rel="noopener noreferrer">å¼‚æ­¥ç»„ä»¶</a>ï¼Œè™½ç„¶å¼‚æ­¥ç»„ä»¶ä»ç„¶å¯ä»¥åœ¨è·¯ç”±ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œä½†è·¯ç”±ç»„ä»¶æœ¬èº«å°±æ˜¯åŠ¨æ€å¯¼å…¥çš„ã€‚</p><p>ğŸ’¡ åœ¨è·¯ç”±é…ç½®ä¸­ï¼Œé€‰é¡¹ <code>component</code> æˆ– <code>components</code> å¯ä»¥æ¥æ”¶ä¸€ä¸ª<strong>è¿”å› Promise</strong> çš„å‡½æ•°ï¼Œè¯¥ Promise æœ€åéœ€è¦ <code>resolve</code> ä¸€ä¸ªç»„ä»¶ï¼Œé‚£ä¹ˆ Vue Router <strong>åªä¼šåœ¨ç¬¬ä¸€æ¬¡è¿›å…¥é¡µé¢æ—¶æ‰ä¼šè·å–è¯¥ç»„ä»¶</strong>ï¼Œä¹‹åå°±ä¼šä½¿ç”¨ç¼“å­˜æ•°æ®ï¼Œè¿˜å¯ä»¥åœ¨ Promise ä¸­æ‰§è¡Œæ›´å¤æ‚çš„æ“ä½œ</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">UserDetails</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">/* ç»„ä»¶å®šä¹‰ */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/users/:id&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> UserDetails <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ğŸ’¡ å¦‚æœä½¿ç”¨ Webpack æ‰“åŒ…ï¼Œè¿˜å¯ä»¥æŠŠç»„ä»¶æŒ‰ç»„åˆ†å—ï¼Œå…·ä½“é…ç½®å‚è€ƒ<a href="https://next.router.vuejs.org/guide/advanced/lazy-loading.html#grouping-components-in-the-same-chunk" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h2 id="æŸ¥çœ‹ç°æœ‰è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#æŸ¥çœ‹ç°æœ‰è·¯ç”±" aria-hidden="true">#</a> æŸ¥çœ‹ç°æœ‰è·¯ç”±</h2><p>Vue Router åœ¨è·¯ç”±å®ä¾‹ä¸­æä¾›ä¸¤ç§æ–¹æ³•æ¥æŸ¥çœ‹ç°æœ‰çš„è·¯ç”±ï¼š</p><ul><li><mark><code>router.hasRoute(name)</code> æ£€æŸ¥ç»™å®šåç§°çš„è·¯ç”±æ˜¯å¦å­˜åœ¨ã€‚</mark></li><li><code>router.getRoutes()</code> è¿”å›ä¸€ä¸ªåŒ…å«<strong>æ‰€æœ‰è·¯ç”±</strong>è®°å½•çš„æ•°ç»„ã€‚</li></ul><h2 id="å¢åˆ è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#å¢åˆ è·¯ç”±" aria-hidden="true">#</a> å¢åˆ è·¯ç”±</h2><p>ä¸€èˆ¬è·¯ç”±çš„è®¾ç½®éƒ½æ˜¯åœ¨å®ä¾‹åŒ–è·¯ç”±æ—¶å®Œæˆçš„ï¼Œé€šè¿‡ä¼ é€’ç»™æ–¹æ³• <code>VueRouter.createRouter()</code> çš„å¯¹è±¡ä¸­ï¼Œåœ¨è¯¥å¯¹è±¡çš„å±æ€§ <code>routes</code> ä¸­å®Œæˆé…ç½®ï¼Œè¯¥å±æ€§å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸€ä¸ªå…ƒç´ å°±æ˜¯ä¸€ä¸ªè·¯ç”±ã€‚</p><p>ä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½æƒ³åœ¨åº”ç”¨ç¨‹åºå·²ç»è¿è¡Œçš„æ—¶å€™å†æ·»åŠ æˆ–åˆ é™¤è·¯ç”±ï¼ŒVue Router æä¾›äº†æ–¹æ³• <code>addRoute()</code> å’Œ <code>removeRoute()</code> å®ç°å¢åˆ è·¯ç”±çš„åŠŸèƒ½ã€‚</p><h3 id="æ·»åŠ è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#æ·»åŠ è·¯ç”±" aria-hidden="true">#</a> æ·»åŠ è·¯ç”±</h3><p>é€šè¿‡è·¯ç”±å®ä¾‹çš„æ–¹æ³• <code>router.addRoute()</code> æ³¨å†Œä¸€ä¸ªæ–°çš„è·¯ç”±</p><p>ğŸ’¡ å¦‚æœ<strong>æ–°å¢åŠ çš„è·¯ç”±ä¸å½“å‰é¡µé¢æ‰€åœ¨çš„è·¯å¾„ä½ç½®ç›¸åŒ¹é…</strong>ï¼ˆå¯èƒ½å½“å‰è·¯å¾„è¢«ä¸€ä¸ªåŠ¨æ€è·¯ç”±åŒ¹é…ï¼Œå› ä¸ºå®ƒå¯ä»¥åŸºäºä¸€ä¸ªæ¨¡å¼åŒ¹é…å¤§é‡çš„è·¯å¾„ï¼Œè€Œæ–°å¢çš„è·¯ç”±å¯èƒ½æ˜¯ä¸€ä¸ªé™æ€è·¯ç”±ï¼Œæ›´ã€Œç²¾å‡†ã€åœ°åŒ¹é…å½“å‰çš„è·¯å¾„ï¼‰ï¼Œéœ€è¦<strong>æ‰‹åŠ¨å¯¼èˆª</strong> <code>router.push()</code> æˆ– <code>router.replace()</code> æ‰å¯ä»¥åº”ç”¨æ–°çš„è·¯ç”±ï¼ˆæ¸²æŸ“æ–°çš„è§†å›¾ç»„ä»¶ï¼‰</p><p>å¦‚æœä¸€ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªåŠ¨æ€è·¯ç”±ï¼Œåˆ™è¿›å…¥ä»»ä½•é¡µé¢ï¼Œä¾‹å¦‚ <code>/about</code>ï¼Œæœ€ç»ˆéƒ½ä¼šå‘ˆç° <code>Article</code> ç»„ä»¶</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  history<span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/:articleName&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Article <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å¦‚æœæˆ‘ä»¬å†æ·»åŠ ä¸€ä¸ªæ–°çš„é™æ€è·¯ç”±</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/about&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> About <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>è™½ç„¶å½“å‰é¡µé¢ä¼šä¼˜å…ˆåŒ¹é…åˆ°æ–°å¢çš„è·¯ç”±ï¼Œä½†æ˜¯ä»ç„¶ä¼šæ˜¾ç¤º <code>Article</code> ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦<strong>æ‰‹åŠ¨è°ƒç”¨ <code>router.replace()</code> æ¥å¯¼èˆª</strong>ä»¥è½½å…¥ <code>About</code> ç»„ä»¶</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>value<span class="token punctuation">.</span>fullPath<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>ğŸ’¡ å¦‚æœæ˜¯åœ¨å¯¼èˆªå®ˆå«ä¸­åŒæ—¶æ·»åŠ è·¯ç”±ï¼Œåˆ™<strong>ä¸</strong>åº”è¯¥è°ƒç”¨ <code>router.replace()</code> è€Œåº”è¯¥<strong>ç›´æ¥è¿”å›ä¸€ä¸ªè·¯ç”±</strong>ï¼Œè§¦å‘ Vue Router æ‰§è¡Œé‡å®šå‘</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// åœ¨å¯¼èˆªå®ˆå«ä¸­æ–°å¢ä¸€ä¸ªè·¯ç”±</span>
<span class="token comment">// æ–°å¢çš„è·¯ç”±çš„è·¯å¾„ä¸å¯¼èˆªç›®æ ‡çš„è·¯å¾„ç›¸åŒï¼Œæ‰€ä»¥æœ€åè¿”å›çš„è·¯å¾„æ˜¯ to.fullPath</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token parameter">to</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasNecessaryRoute</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token function">generateRoute</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment">// è§¦å‘é‡å®šå‘</span>
    <span class="token keyword">return</span> to<span class="token punctuation">.</span>fullPath
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>âš ï¸ ä»¥ä¸Šç¤ºä¾‹è¦æ»¡è¶³ä¸¤ä¸ªå‡è®¾ï¼š</p><ul><li>æ–°æ·»åŠ çš„è·¯ç”±è®°å½•å°†ä¸ <code>to</code> ä½ç½®ç›¸åŒ¹é…ï¼Œå®é™…ä¸Šå¯¼è‡´ä¸æˆ‘ä»¬è¯•å›¾è®¿é—®çš„ä½ç½®ä¸åŒã€‚</li><li><strong>åœ¨æ·»åŠ æ–°çš„è·¯ç”±å <code>hasNecessaryRoute()</code> è¿”å› <code>false</code></strong><mark>ï¼Ÿ</mark>ï¼Œä»¥é¿å…æ— é™é‡å®šå‘ã€‚</li></ul><p>è¦å°†<strong>åµŒå¥—è·¯ç”±</strong>æ·»åŠ åˆ°ç°æœ‰çš„è·¯ç”±ä¸­ï¼Œå¯ä»¥å°†è·¯ç”±çš„ <code>name</code> ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ <code>router.addRoute()</code>ï¼Œç„¶åç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯åµŒå¥—è·¯ç”±çš„é…ç½®</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;settings&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> AdminSettings <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>ç­‰æ•ˆäº</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span>
  path<span class="token operator">:</span> <span class="token string">&#39;/admin&#39;</span><span class="token punctuation">,</span>
  component<span class="token operator">:</span> Admin<span class="token punctuation">,</span>
  children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;settings&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> AdminSettings <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="åˆ é™¤è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#åˆ é™¤è·¯ç”±" aria-hidden="true">#</a> åˆ é™¤è·¯ç”±</h3><p>æœ‰å‡ ä¸ªä¸åŒçš„æ–¹æ³•æ¥åˆ é™¤ç°æœ‰çš„è·¯ç”±ï¼Œå½“è·¯ç”±è¢«åˆ é™¤æ—¶ï¼Œ<strong>æ‰€æœ‰çš„åˆ«åå’Œå­è·¯ç”±ä¹Ÿä¼šè¢«åŒæ—¶åˆ é™¤</strong>ï¼š</p><ul><li><p>é€šè¿‡æ·»åŠ ä¸€ä¸ª<strong>åç§°å†²çªçš„è·¯ç”±</strong>ã€‚å¦‚æœæ·»åŠ ä¸ç°æœ‰é€”å¾„åç§°ç›¸åŒçš„é€”å¾„ï¼Œä¼šå…ˆåˆ é™¤è·¯ç”±ï¼Œå†æ·»åŠ è·¯ç”±</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/about&#39;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#39;about&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> About <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// è¿™å°†ä¼šåˆ é™¤ä¹‹å‰å·²ç»æ·»åŠ çš„è·¯ç”±ï¼Œå› ä¸ºä»–ä»¬å…·æœ‰ç›¸åŒçš„åå­—ä¸”åå­—å¿…é¡»æ˜¯å”¯ä¸€çš„</span>
router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/other&#39;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#39;about&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Other <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li><p>é€šè¿‡è°ƒç”¨ <code>router.addRoute()</code> è¿”å›çš„å›è°ƒï¼Œè¿™å¯¹äºæ²¡æœ‰å‘½åçš„è·¯ç”±å¾ˆæœ‰ç”¨</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> removeRoute <span class="token operator">=</span> router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span>routeRecord<span class="token punctuation">)</span>
<span class="token function">removeRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// å¦‚æœå­˜åœ¨çš„è¯ï¼Œåˆ é™¤è·¯ç”±</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>é€šè¿‡ä½¿ç”¨ <code>router.removeRoute()</code> <strong>æŒ‰åç§°</strong>åˆ é™¤è·¯ç”±</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">addRoute</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/about&#39;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&#39;about&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> About <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// åˆ é™¤è·¯ç”±</span>
router<span class="token punctuation">.</span><span class="token function">removeRoute</span><span class="token punctuation">(</span><span class="token string">&#39;about&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ğŸ’¡ å¦‚æœä½ æƒ³ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œä½†åˆæƒ³é¿å…åå­—çš„å†²çªï¼Œå¯ä»¥åœ¨è·¯ç”±ä¸­<strong>ä½¿ç”¨ <code>Symbol</code> ä½œä¸ºåå­—</strong>ã€‚</p></li></ul><h2 id="è·¯ç”±åŒ¹é…" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±åŒ¹é…" aria-hidden="true">#</a> è·¯ç”±åŒ¹é…</h2><p>Vue Router æ”¯æŒå¤šç§è·¯ç”±åŒ¹é…æ¨¡å¼ï¼š</p><ul><li>å¤§éƒ¨åˆ†çš„è·¯ç”±æ˜¯ç”±å­—ç¬¦ä¸²æ„æˆçš„<strong>é™æ€è·¯ç”±</strong>ï¼Œå®ƒåªèƒ½åŒ¹é…ä¸€ä¸ªä¸å¯å˜çš„è·¯å¾„ï¼Œä¾‹å¦‚ <code>/about</code></li><li>è¿›ä¸€æ­¥æ ¹æ®æŸç§æ¨¡å¼åŒ¹é…ä¸€ç³»åˆ—è·¯å¾„çš„<strong>åŠ¨æ€è·¯ç”±</strong>ï¼Œä¾‹å¦‚ <code>/users/:userId</code></li><li>å†è¿›ä¸€æ­¥è¿˜å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è‡ªå®šä¹‰åŒ¹é…æ¨¡å¼ï¼Œä»¥åŒ¹é…éœ€è¦æ»¡è¶³å¤æ‚æ¡ä»¶çš„è·¯å¾„ï¼Œ<mark>æ­£åˆ™è¡¨è¾¾å¼åœ¨è·¯å¾„å‚æ•°åçš„<strong>æ‹¬å·</strong>é‡Œ</mark>ï¼Œä¾‹å¦‚ <code>/:orderId(\\d+)</code> åŒ¹é…ä»…ç”±æ•°å­—ç»„æˆçš„è·¯å¾„ï¼ŒğŸ’¡ ç”±äºéœ€è¦è½¬ä¹‰åæ–œæ <code>\</code>ï¼Œæ‰€ä»¥ä½¿ç”¨äº† <code>\\d+</code> è¡¨ç¤ºåŒ¹é…å¤šä¸ªï¼ˆè‡³å°‘ä¸€ä¸ªï¼‰æ•°å­—</li></ul><h3 id="åŠ¨æ€è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#åŠ¨æ€è·¯ç”±" aria-hidden="true">#</a> åŠ¨æ€è·¯ç”±</h3><p>åŠ¨æ€è·¯ç”±æ˜¯æŒ‡æŠŠæŸç§æ¨¡å¼ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰åŒ¹é…åˆ°çš„æ‰€æœ‰è·¯ç”±ï¼Œå…¨éƒ½æ˜ å°„åˆ°åŒä¸ªç»„ä»¶ã€‚</p><p>åŠ¨æ€è·¯å¾„çš„å‚æ•°<strong>ä»¥å†’å· <code>:</code> å¼€å¤´</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è·¯ç”±é…ç½®ï¼Œä¼ é€’ç»™ `createRouter`</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// ç»„ä»¶ User å¯¹æ‰€æœ‰ç”¨æˆ·è¿›è¡Œæ¸²æŸ“</span>
  <span class="token comment">// ä½†ç”¨æˆ· username ä¸åŒï¼ŒåŠ¨æ€æ®µä»¥å†’å·å¼€å§‹ï¼Œä½œä¸ºè·¯å¾„å‚æ•°</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/user/:username&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> User
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/user/:username/posts/:postId&#39;</span>
    component<span class="token operator">:</span> Post
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>åŒ¹é…åˆ°çš„å‚æ•°å€¼ï¼ˆè·¯å¾„çš„çš„åŠ¨æ€æ®µï¼Œç§°ä¹‹ä¸º<strong>è·¯å¾„å‚æ•°</strong>ï¼‰ä¼šè¢«æ·»åŠ åˆ° <code>this.$route.params</code> å¯¹è±¡ä¸­ã€‚è€Œä¸”åœ¨åŒä¸€ä¸ªè·¯ç”±ä¸­è®¾ç½®æœ‰<strong>å¤šä¸ªè·¯å¾„å‚æ•°</strong>ï¼Œå®ƒä»¬ä¼šæ˜ å°„åˆ° <code>this.$route.params</code> ä¸Šçš„ç›¸åº”å­—æ®µã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// User ç»„ä»¶</span>
<span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token string">&#39;&lt;p&gt;User {{ $route.params.username }}&lt;/p&gt;&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// Post ç»„ä»¶</span>
<span class="token keyword">const</span> Post <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    &lt;p&gt;User {{ $route.params.username }}&lt;/p&gt;
    &lt;p&gt;Post {{ $route.params.postId }}&lt;/p&gt;
  </span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ğŸ’¡ å®é™…åŠ¨æ€è·¯ç”±åœ¨å†…éƒ¨ä½¿ç”¨çš„é»˜è®¤æ­£åˆ™è¡¨è¾¾å¼æ˜¯ <code>[^/]+</code> åŒ¹é… URL ä¸­è‡³å°‘æœ‰ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯æ–œæ  <code>/</code>ï¼Œç”¨ä»¥æå–è·¯å¾„ä¸­ç›¸åº”çš„å‚æ•°ã€‚</p><p>âš ï¸ å½“ä½¿ç”¨åŠ¨æ€è·¯ç”±åŒ¹é…åŒä¸€ä¸ªç»„ä»¶æ—¶ï¼Œå¦‚æœåªæœ‰åŠ¨æ€è·¯å¾„å‚æ•°æ”¹å˜ï¼Œå¹¶<strong>ä¸</strong>ä¼šè§¦å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œè€Œæ˜¯<strong>å¤ç”¨åŸæ¥çš„ç»„ä»¶</strong>ï¼Œå› æ­¤<strong>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¸ä¼šå†è¢«è°ƒç”¨</strong>ã€‚å¦‚æœå¸Œæœ›è·¯ç”±åŒ¹é…çš„å‚æ•°æ”¹å˜æ—¶ï¼ŒåŒæ—¶è§¦å‘ç»„ä»¶æ›´æ–°ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªä¾¦å¬å™¨ <code>watch</code> ç›‘æµ‹ <code>$route.params</code> çš„å˜åŒ–ï¼Œæˆ–ä½¿ç”¨ Vue Router æä¾›çš„ <code>beforeRouteUpdate</code> é’©å­å‡½æ•°è¿›è¡Œè·¯ç”±å®ˆå«ï¼Œç„¶ååœ¨ç›¸åº”çš„å›è°ƒå‡½æ•°ä¸­æ‰‹åŠ¨è§¦å‘åŸæ¥éœ€è¦åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¸­æ‰§è¡Œçš„æ“ä½œã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token string">&#39;...&#39;</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">toParams<span class="token punctuation">,</span> previousParams</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¯¹è·¯ç”±å˜åŒ–åšå‡ºå“åº”...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token string">&#39;...&#39;</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">beforeRouteUpdate</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¯¹è·¯ç”±å˜åŒ–åšå‡ºå“åº”...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="å¯é‡å¤çš„å‚æ•°" tabindex="-1"><a class="header-anchor" href="#å¯é‡å¤çš„å‚æ•°" aria-hidden="true">#</a> å¯é‡å¤çš„å‚æ•°</h4><p>å¦‚æœéœ€è¦åŒ¹é…è·¯å¾„ä¸­å¤šä¸ªç»“æ„ç›¸ä¼¼çš„éƒ¨åˆ†ï¼Œå¯ä»¥<strong>ç›´æ¥åœ¨è·¯å¾„å‚æ•°åæ·»åŠ ä¿®é¥°ç¬¦ <code>*</code> æˆ– <code>+</code></strong>ï¼ˆå…¶ä½œç”¨å’Œæ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨çš„é‡è¯ä¸€æ ·ï¼‰ï¼Œå°†å‚æ•°æ ‡è®°ä¸ºå¯é‡å¤ï¼Œè€Œä¸å¿…æ‰‹åŠ¨è®¾ç½®å¤šä¸ªè·¯å¾„å‚æ•°ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// /:chapters -&gt;  åŒ¹é… /one, /one/two, /one/two/three, ç­‰</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/:chapters+&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// /:chapters -&gt; åŒ¹é… /, /one, /one/two, /one/two/three, ç­‰</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/:chapters*&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¿™æ ·è·¯å¾„å‚æ•°å¾—åˆ°çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä¾‹å¦‚ä½¿ç”¨ <code>/:chapters+</code> åŠ¨æ€è·¯å¾„ï¼Œå»åŒ¹é…è·¯å¾„ <code>/a/b</code>ï¼Œå¾—åˆ°çš„è·¯å¾„å‚æ•°çš„å€¼å¦‚ä¸‹</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>chapters<span class="token punctuation">)</span> <span class="token comment">// [&#39;a&#39;, &#39;b&#39;]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="å¯é€‰çš„å‚æ•°" tabindex="-1"><a class="header-anchor" href="#å¯é€‰çš„å‚æ•°" aria-hidden="true">#</a> å¯é€‰çš„å‚æ•°</h4><p>å¦‚æœåŠ¨æ€è·¯ç”±ä¸­è·¯å¾„å‚æ•°çš„éƒ¨åˆ†æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥<strong>åœ¨è·¯å¾„å‚æ•°åæ·»åŠ  <code>?</code></strong>ï¼ˆå…¶ä½œç”¨å’Œæ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨çš„é‡è¯ä¸€æ ·ï¼Œè¡¨ç¤º 0 ä¸ªæˆ– 1 ä¸ªï¼‰</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// åŒ¹é… /users å’Œ /users/posva</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/users/:userId?&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// åŒ¹é… /users å’Œ /users/42</span>
  <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/users/:userId(\\d+)?&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ğŸ’¡ <code>*</code> åœ¨æŠ€æœ¯ä¸Šä¹Ÿæ ‡å¿—ç€ä¸€ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œä½† <code>?</code> å‚æ•°æ˜¯ä¸èƒ½é‡å¤ï¼Œæœ€å¤šåªèƒ½åŒ¹é… 1 ä¸ª</p><h3 id="_404-not-found-è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#_404-not-found-è·¯ç”±" aria-hidden="true">#</a> 404 Not Found è·¯ç”±</h3><p>åŠ¨æ€è·¯ç”±çš„è·¯å¾„å‚æ•°<strong>åªèƒ½åŒ¹é… url ç‰‡æ®µï¼ˆç”¨ <code>/</code> åˆ†éš”ï¼‰ä¹‹é—´çš„å­—ç¬¦</strong>ã€‚<mark>ç”±äº Vue Router Next åˆ é™¤äº†é€šé…ç¬¦ <code>*</code> è·¯ç”±å™¨ï¼Œå¦‚æœå¸Œæœ›åŒ¹é…ä»»æ„è·¯å¾„ï¼ˆæœ€å¸¸è§çš„åœºæ™¯æ˜¯ç”¨äºæ•è·ç”¨æˆ·è®¿é—®æœªå®šä¹‰çš„è·¯ç”±ï¼Œå†è½¬å‘ 404 ç”»é¢ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨<strong>è‡ªå®šä¹‰çš„è·¯å¾„å‚æ•°æ­£åˆ™è¡¨è¾¾å¼</strong>ï¼Œå®ƒå†™åœ¨è·¯å¾„å‚æ•°åé¢çš„æ‹¬å· <code>()</code> ä¸­</mark></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// åŒ¹é…ä»¥ `/user-` å¼€å¤´ä¹‹åçš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶å°†å…¶æ”¾åœ¨è·¯å¾„å‚æ•° afterUser ä¸­</span>
  <span class="token comment">// å³å¯ä»¥é€šè¿‡ `$route.params.afterUser` è¿›è¡Œè®¿é—®</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/user-:afterUser(.*)&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> UserGeneric
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// åŒ¹é…è·¯å¾„çš„æ‰€æœ‰å†…å®¹ï¼Œå°†å¹¶å°†å…¶æ”¾åœ¨è·¯å¾„å‚æ•° pathMatch ä¸­</span>
  <span class="token comment">// å³å¯ä»¥é€šè¿‡ `$route.params.pathMatch` è¿›è¡Œè®¿é—®</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/:pathMatch(.*)*&#39;</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">&#39;NotFound&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> NotFound
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>ä»¥ä¸Šçš„ç¤ºä¾‹è·¯ç”±å‚æ•°éƒ½æ˜¯åŒ¹é…ä¸€æ•´æ®µçš„è·¯å¾„ï¼Œä½†ç”±äºæ­£åˆ™è¡¨è¾¾å¼çš„ä¸åŒï¼Œè§£æå¾—åˆ°çš„å†…å®¹ä¹Ÿä¸ä¸€æ ·</p><ul><li>è·¯å¾„å‚æ•° <code>afterUser</code> çš„è‡ªå®šä¹‰æ­£åˆ™è¡¨è¾¾å¼æ˜¯ <code>.*</code>ï¼Œå®ƒåŒ¹é…åˆ°çš„æ˜¯ä»¥ <code>/user-</code> å¼€å¤´ä¹‹åçš„æ‰€æœ‰å†…å®¹ï¼Œè·¯å¾„å‚æ•°å¾—åˆ°çš„æ˜¯ä¸€ä¸ª<strong>å­—ç¬¦ä¸²</strong>ï¼Œå…¶ä¸­å¦‚æœå‰©ä½™è·¯å¾„å†…å®¹ä¸­åŒ…æ‹¬ <code>/</code> åˆ†éš”ç¬¦ï¼Œå°±ä¼šè¿›è¡Œ<strong>è½¬è¯‘</strong>ä¸º <code>%2F</code>ï¼Œä¾‹å¦‚è·¯å¾„ <code>/user-ben/posts</code>ï¼Œåˆ™è·¯å¾„å‚æ•°åŒ¹é…å¾—åˆ°çš„å­—ç¬¦ä¸²å°±æ˜¯ <code>ben%2Fposts</code></li><li>è·¯å¾„å‚æ•° <code>pathMatch</code> çš„è‡ªå®šä¹‰æ­£åˆ™è¡¨è¾¾å¼ä¸€æ ·æ˜¯ <code>.*</code>ï¼Œä½†ä¹‹åè¿˜ä½¿ç”¨äº†ä¿®é¥°ç¬¦ <code>*</code> ä»¥æ ‡æ³¨è·¯å¾„å‚æ•°æ˜¯<a href="#%E5%8F%AF%E9%87%8D%E5%A4%8D%E7%9A%84%E5%8F%82%E6%95%B0">é‡å¤çš„å‚æ•°</a>ï¼Œå› æ­¤è·¯å¾„å‚æ•°å¾—åˆ°çš„æ˜¯ä¸€ä¸ª<strong>æ•°ç»„</strong>ï¼Œå…¶ä¸­è·¯å¾„ä¸­çš„ <code>/</code> å°±æ˜¯åŒ¹é…è§£ææ—¶çš„åˆ†éš”æ ‡å¿—ï¼Œå¾—åˆ°æ•°ç»„å„å…ƒç´ ï¼Œä¾‹å¦‚è·¯å¾„ <code>/not/found</code>ï¼Œåˆ™è·¯å¾„å‚æ•°æ˜¯ <code>[&#39;not&#39;, &#39;found&#39;]</code></li></ul><p>ä»¥ä¸Šä¸¤ç§æ–¹å¼éƒ½å¯ä»¥åŒ¹é…æ•è·æ•´æ®µè·¯å¾„ï¼Œä½†æ˜¯<strong>æ¨èç¬¬äºŒç§</strong>ï¼Œå› ä¸ºå½“éœ€è¦ä½¿ç”¨è·¯ç”±çš„åç§°ï¼Œä¾‹å¦‚ <code>NotFound</code>ï¼Œ<strong>æ‰‹åŠ¨ push è·³è½¬åˆ° 404 è·¯ç”±æ—¶</strong>ï¼ŒåŸºäºä¼ é€’çš„å‚æ•°ï¼Œæ‹¼æ¥å‡ºæ¥çš„è·¯å¾„ä¸­åˆ†éš”ç¬¦ <code>/</code> æ‰ä¸ä¼šè¢«è½¬è¯‘</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;NotFound&#39;</span><span class="token punctuation">,</span>
  params<span class="token operator">:</span> <span class="token punctuation">{</span> pathMatch<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;not&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;found&#39;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ğŸ’¡ å¦‚æœä¸æ˜¯åŸºäºè·¯ç”±åç§° push è·³è½¬åˆ° 404 è·¯ç”±ï¼Œè€Œæ˜¯åŸºäºè·¯å¾„å­—ç¬¦ä¸²å°±ä¸ä¼šå‡ºç°æ‹¼æ¥æ—¶ <code>/</code> è½¬è¯‘çš„é—®é¢˜ã€‚åˆ™ä»¥ä¸Šä¸¤ç§æ–¹å¼éƒ½å¯ä»¥</p><p>æœ‰æ—¶å€™ä¸€ä¸ª url å¯ä»¥åŒ¹é…å¤šä¸ªè·¯ç”±ï¼Œæ­¤æ—¶<strong>åŒ¹é…çš„ä¼˜å…ˆçº§å°±æŒ‰ç…§è·¯ç”±çš„å®šä¹‰é¡ºåº</strong>ï¼šå³åœ¨è·¯ç”±é…ç½®ä¸­ï¼Œå…ˆå®šä¹‰çš„è·¯ç”±ä¼˜å…ˆçº§æ›´é«˜ï¼›<strong>åŒ¹é…é¡ºåºç”±ä¸Šåˆ°ä¸‹ï¼Œç›´åˆ°æœ‰ç¬¦åˆçš„è§„åˆ™ä¸ºæ­¢</strong>ã€‚æ‰€ä»¥<strong>404 Not Found è·¯ç”±ä¸€èˆ¬æ”¾åœ¨æœ€å</strong>ï¼Œå®ƒä½œä¸ºã€Œå…œåº•ã€æ•è·ä¸€äº›æœªå®šä¹‰çš„è·¯å¾„ã€‚</p><h2 id="åµŒå¥—è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#åµŒå¥—è·¯ç”±" aria-hidden="true">#</a> åµŒå¥—è·¯ç”±</h2><p>å½“ç½‘é¡µä¸­ä¸€ä¸ªç•Œé¢æœ‰<strong>å¤šå±‚åµŒå¥—çš„ç»„ä»¶</strong>ç»„åˆè€Œæˆï¼Œå¯ä»¥ä½¿ç”¨åµŒå¥—è·¯ç”±ï¼Œå°†è¿™äº›åµŒå¥—çš„ç»„ä»¶ä¸ URL ä¸­ç›¸åº”çš„<strong>æŸæ®µè·¯å¾„ç›¸æ˜ å°„</strong>ï¼Œè€Œä¸”æ”¯æŒå¤šå±‚æ·±åº¦åµŒå¥—çš„è·¯ç”±-ç»„ä»¶æ˜ å°„ã€‚</p><p><img src="/blog-web/assets/nested-route.843f730d.png" alt="åµŒå¥—è·¯ç”±"></p><p>å³åœ¨çˆ¶ç»„ä»¶ä¸­å¯ä»¥åµŒå¥—æœ‰è‡ªå·±çš„ <code>&lt;router-view&gt;</code>ï¼Œè€Œåœ¨é…ç½®è·¯ç”±æ—¶ï¼Œè¦åœ¨è¯¥ç»„ä»¶å¯¹åº”çš„è·¯ç”±ï¼ˆçˆ¶è·¯ç”±ï¼‰ä¸­ä½¿ç”¨<strong>é€‰é¡¹ <code>children</code></strong> è®¾ç½®å†…åµŒçš„è·¯ç”±-å­ç»„ä»¶æ˜ å°„è§„åˆ™ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// çˆ¶ç»„ä»¶</span>
<span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class=&quot;page&quot;&gt;
    &lt;p&gt;User&lt;/p&gt;
      // åŸºäºè·¯ç”±å°†åµŒå¥—çš„å­ç»„ä»¶æ¸²æŸ“åœ¨æ­¤
      &lt;router-view&gt;&lt;/router-view&gt;
    &lt;/div&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å­ç»„ä»¶</span>
<span class="token keyword">const</span> Profile <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class=&quot;page&quot;&gt;Profile&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> Posts <span class="token operator">=</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div class=&quot;page&quot;&gt;Posts&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// è·¯ç”±è§„åˆ™</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token comment">// ...</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&#39;/user/:id&#39;</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> User<span class="token punctuation">,</span>
      <span class="token comment">// åµŒå¥—è·¯ç”±</span>
      children<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// UserProfile will be rendered inside User&#39;s &lt;router-view&gt;</span>
          <span class="token comment">// when /user/:id/profile is matched</span>
          path<span class="token operator">:</span> <span class="token string">&#39;profile&#39;</span><span class="token punctuation">,</span>
          component<span class="token operator">:</span> UserProfile
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token comment">// UserPosts will be rendered inside User&#39;s &lt;router-view&gt;</span>
          <span class="token comment">// when /user/:id/posts is matched</span>
          path<span class="token operator">:</span> <span class="token string">&#39;posts&#39;</span><span class="token punctuation">,</span>
          component<span class="token operator">:</span> UserPosts
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><p>å…¶å®è·¯ç”±çš„é€‰é¡¹ <code>children</code> åªæ˜¯å¦ä¸€ä¸ªè·¯ç”±æ•°ç»„ï¼Œå°±åƒ <code>routes</code> æœ¬èº«ä¸€æ ·ï¼Œå› æ­¤å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦ï¼Œä¸æ–­åœ°åµŒå¥—è§†å›¾ã€‚</p><p>âš ï¸ ä¸€èˆ¬è·¯ç”± <code>path</code> ä¼šä»¥ <code>/</code> å¼€å¤´ï¼Œ<strong>ä½†åµŒå¥—è·¯å¾„ä¸ä¼šä½¿ç”¨</strong>ï¼Œå› ä¸º <code>/</code> ä¼šè¢«å½“ä½œæ ¹è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„ï¼‰ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„å¯ä»¥ä½¿ç”¨åµŒå¥—ç»„ä»¶è€Œæ— é¡»è®¾ç½®åµŒå¥—çš„è·¯å¾„ï¼Œ<strong>è¿ç§»æ›´æ–¹ä¾¿</strong>ã€‚</p><p>ğŸ’¡ å¦‚æœå¸Œæœ›åµŒå¥—è·¯ç”±å¯ä»¥æ”¯æŒè®¿é—®ä¸Šä¸€çº§çš„è·¯ç”±æ—¶ï¼Œçˆ¶ç»„ä»¶çš„ <code>&lt;router-view&gt;</code> ä¹Ÿæ¸²æŸ“å‡ºé¡µé¢ï¼Œå¯ä»¥åœ¨ä½¿ç”¨<strong>é€‰é¡¹ <code>children</code></strong> è®¾ç½®å†…åµŒçš„è·¯ç”±-å­ç»„ä»¶æ˜ å°„è§„åˆ™æ—¶ï¼Œ<strong>æ·»åŠ ä¸€ä¸ª <code>path</code> ä¸ºç©ºå­—ä¸² <code>&quot;&quot;</code> çš„è§„åˆ™</strong>ã€‚å³è·¯å¾„çš„åµŒå¥—éƒ¨åˆ†ä¸ºç©ºæ—¶ï¼Œä¹Ÿå¯ä»¥æ¸²æŸ“å‡ºä¸€ä¸ªé»˜è®¤çš„åµŒå¥—ç»„ä»¶ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&#39;/user/:id&#39;</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> User<span class="token punctuation">,</span>
      children<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// UserHome will be rendered inside User&#39;s &lt;router-view&gt;</span>
        <span class="token comment">// when /user/:id is matched</span>
        <span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> component<span class="token operator">:</span> UserHome <span class="token punctuation">}</span>
        <span class="token comment">// ...other sub routes</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="è·¯ç”±å¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±å¯¼èˆª" aria-hidden="true">#</a> è·¯ç”±å¯¼èˆª</h2><p>Vue Router æœ‰ä¸¤ç§æ–¹å¼åˆ‡æ¢ url è·¯å¾„</p><ul><li>ä½¿ç”¨ç»„ä»¶ <code>&lt;router-link&gt;</code> ç»„ä»¶è¿›è¡Œå¯¼èˆªï¼Œè¯¥ç»„ä»¶ä¼šåœ¨é¡µé¢ä¸Šæ¸²æŸ“ä¸º <code>&lt;a&gt;</code> æ ‡ç­¾ã€‚</li><li>ä½¿ç”¨ Vue Router æä¾›çš„æ–¹æ³•é€šè¿‡ JS æ‰‹åŠ¨åˆ‡æ¢ url è·¯å¾„ï¼Œç§°ä¸º<strong>ç¼–ç¨‹å¼å¯¼èˆª</strong>ã€‚</li></ul><p>ğŸ’¡ <mark>åœ¨ Vue Router Next ä¸­æ‰€æœ‰çš„å¯¼èˆªï¼ŒåŒ…æ‹¬ç¬¬ä¸€ä¸ªå¯¼èˆªï¼Œç°åœ¨éƒ½æ˜¯<strong>å¼‚æ­¥</strong>çš„ï¼Œå³ç¼–ç¨‹å¼å¯¼èˆªçš„å„ç§æ–¹æ³•éƒ½<strong>è¿”å›ä¸€ä¸ª Promise</strong></mark>ï¼Œå¦‚æœè¦åŸºäºå¯¼èˆªå®Œæˆåå†æ‰§è¡Œæ“ä½œï¼Œéœ€è¦ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹ <code>await</code> æˆ– <code>then</code></p><p>ä¾‹å¦‚é¡µé¢æœ‰ä¸€ä¸ªå¼¹å‡ºçš„å¯¼èˆªèœå•ï¼Œæˆ‘ä»¬<strong>å¸Œæœ›åœ¨å¯¼èˆªåˆ°æ–°é¡µé¢å</strong>éšè—èœå•ï¼Œå› ä¸º<strong>å¯¼èˆªæ˜¯å¼‚æ­¥çš„</strong>ï¼Œæˆ‘ä»¬éœ€è¦ <code>await</code> ç­‰åˆ° <code>router.push</code> è¿”å›çš„ promise è§£æ <code>resovle</code> æˆ– <code>reject</code> åæ‰æ‰§è¡Œèœå•éšè—</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">await</span> router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/my-profile&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>isMenuOpen <span class="token operator">=</span> <span class="token boolean">false</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="router-link" tabindex="-1"><a class="header-anchor" href="#router-link" aria-hidden="true">#</a> router-link</h3><p>ä½¿ç”¨ <code>&lt;router-link&gt;</code> ç»„ä»¶æ¥å¯¼èˆªï¼Œé€šè¿‡å±æ€§ <code>to</code> æŒ‡å®šè·¯å¾„ï¼Œå®ƒé»˜è®¤æ¸²æŸ“ä¸º <code>&lt;a&gt;</code> æ ‡ç­¾ï¼Œå¹¶å°†ç»„ä»¶æ ‡ç­¾ä¸­çš„å†…å®¹åŒ…è£¹åœ¨å…¶ä¸­ï¼ˆæ’æ§½ï¼Œæ”¯æŒ HTMLï¼‰ï¼Œå®ç°ç±»ä¼¼ url åˆ‡æ¢çš„åŠŸèƒ½</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home Page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>ğŸ”¨ æ¸²æŸ“ç»“æœ</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home Page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>ğŸ’¡ å¦‚æœå¸Œæœ›ç‚¹å‡»é“¾æ¥åï¼Œå¯¼èˆªæ˜¯ä»¥<strong>æ›¿æ¢å½“å‰è·¯ç”±</strong>çš„å½¢å¼è¿›è¡Œï¼ˆå³å¯¼èˆªåä¸ä¼šç•™ä¸‹å†å²è®°å½•ï¼‰ï¼Œå¯ä»¥ä¸ºç»„ä»¶ <code>&lt;router-link&gt;</code> è®¾ç½®<strong>å±æ€§ <code>replace</code></strong>ï¼Œè¿™æ ·ç”¨æˆ·ç‚¹å‡»é“¾æ¥æ—¶ä¼šè°ƒç”¨ <code>router.replace()</code>ï¼Œè€Œä¸æ˜¯ <code>router.push()</code></p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/abc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">replace</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="to-å±æ€§" tabindex="-1"><a class="header-anchor" href="#to-å±æ€§" aria-hidden="true">#</a> to å±æ€§</h4><p>ç»„ä»¶ <code>&lt;router-link&gt;</code> çš„å±æ€§ <code>to</code> æ˜¯ç”¨ä»¥æè¿°è¯¥é“¾æ¥è¦å¯¼èˆªåˆ°å“ªä¸ªç›®æ ‡è·¯ç”±ï¼Œå®ƒçš„å±æ€§å€¼å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨ç¤ºè·¯å¾„çš„<strong>å­—ç¬¦ä¸²</strong>ï¼Œæˆ–ä¸€ä¸ªæè¿°è·¯å¾„çš„<strong>å¯¹è±¡</strong></p><p>ğŸ’¡ ç”±äºå½“è¢«ç‚¹å‡»åï¼Œå†…éƒ¨ä¼šç«‹åˆ»æŠŠ <code>to</code> çš„å€¼ä¼ åˆ° <code>router.push()</code> å®ç°å¯¼èˆªï¼Œæ‰€ä»¥å±æ€§ <code>to</code> ä¸ <code>router.push</code> <a href="#%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA">æ¥å—çš„å€¼çš„è§„åˆ™å®Œå…¨ç›¸åŒ</a>ã€‚</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- å­—ç¬¦ä¸² --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- æ¸²æŸ“ç»“æœ --&gt;</span>
<span class="token comment">&lt;!-- &lt;a href=&quot;/home&quot;&gt;Home&lt;/a&gt; --&gt;</span>

<span class="token comment">&lt;!-- ä½¿ç”¨ v-bind çš„ JS è¡¨è¾¾å¼ --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>/home<span class="token punctuation">&#39;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- æ¸²æŸ“ç»“æœåŒä¸Š --&gt;</span>

<span class="token comment">&lt;!-- ä¼ é€’ä¸€ä¸ªå¸¦æœ‰è·¯å¾„å±æ€§ path çš„å¯¹è±¡  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ path: <span class="token punctuation">&#39;</span>/home<span class="token punctuation">&#39;</span> }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- æ¸²æŸ“ç»“æœåŒä¸Š --&gt;</span>

<span class="token comment">&lt;!-- å‘½åè·¯ç”±ï¼Œå¸¦æœ‰è·¯å¾„å‚æ•° --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ name: <span class="token punctuation">&#39;</span>user<span class="token punctuation">&#39;</span>, params: { userId: <span class="token punctuation">&#39;</span>123<span class="token punctuation">&#39;</span> }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>User<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- å¸¦æŸ¥è¯¢å‚æ•° --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">:to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ path: <span class="token punctuation">&#39;</span>/register<span class="token punctuation">&#39;</span>, query: { plan: <span class="token punctuation">&#39;</span>private<span class="token punctuation">&#39;</span> }}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Register<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- æ¸²æŸ“ç»“æœ --&gt;</span>
<span class="token comment">&lt;!-- &lt;a href=&quot;/register?plan=private&quot;&gt;Register&lt;/a&gt; --&gt;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h4 id="è‡ªå®šä¹‰æ ‡ç­¾" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰æ ‡ç­¾" aria-hidden="true">#</a> è‡ªå®šä¹‰æ ‡ç­¾</h4><p><mark>åœ¨ Vue Router Next ä¸­åˆ é™¤äº† <code>&lt;router-link&gt;</code> çš„å±æ€§ <code>tag</code></mark>ï¼Œå¦‚æœå¸Œæœ›<strong>å®šåˆ¶è¯¥ç»„ä»¶æ¸²æŸ“ä¸ºå¦ä¸€ç§æ ‡ç­¾</strong>ï¼Œ<mark>å¯ä»¥<a href="https://next.router.vuejs.org/zh/api/#router-link-props" target="_blank" rel="noopener noreferrer">éœ€è¦æ·»åŠ å±æ€§ <code>custom</code></a></mark>ï¼ˆé»˜è®¤æ˜¯ <code>false</code>ï¼Œå°†è¯¥å±æ€§æ·»åŠ åˆ°ç»„ä»¶ <code>&lt;router-link&gt;</code> æ—¶å…¶å€¼å°±æ˜¯ <code>true</code>ï¼‰ï¼Œè¡¨ç¤ºä½¿ç”¨è‡ªå®šä¹‰çš„æ–¹å¼ï¼ˆç›´æ¥åŸºäºæ’æ§½å†…å®¹æ¸²æŸ“ç»„ä»¶ï¼‰ï¼Œè€Œä¸éœ€è¦å°†æ’æ§½å†…å®¹åŒ…è£¹åœ¨ <code>&lt;a&gt;</code> å…ƒç´ ä¸­ã€‚</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/home<span class="token punctuation">&quot;</span></span> <span class="token attr-name">custom</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Home Page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ğŸ”¨ æ¸²æŸ“ç»“æœ</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>Home Page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h4 id="ä½œç”¨åŸŸæ’æ§½" tabindex="-1"><a class="header-anchor" href="#ä½œç”¨åŸŸæ’æ§½" aria-hidden="true">#</a> ä½œç”¨åŸŸæ’æ§½</h4><p>ç»„ä»¶ <code>&lt;router-link&gt;</code> çš„<strong>ä½œç”¨åŸŸæ’æ§½ <code>v-slot</code> æš´éœ²äº†<a href="https://next.router.vuejs.org/api/index.html#router-link-s-v-slot" target="_blank" rel="noopener noreferrer">ä¸€äº›å…³äºç›¸åº”è·¯ç”±ï¼ˆå±æ€§ <code>to</code> æŒ‡å‘çš„è·¯ç”±ï¼‰çš„å‚æ•°</a></strong>ï¼Œç„¶åå¯ä»¥ç”¨åœ¨æ’æ§½ä¸­ï¼Œå®šåˆ¶ç»„ä»¶æ¸²æŸ“çš„å†…å®¹ã€‚</p><p>âš ï¸ å¦‚æœè¦å®šåˆ¶åŒ–ç»„ä»¶çš„æ¸²æŸ“å†…å®¹ï¼Œè®°å¾—ä¸ºç»„ä»¶ <code>&lt;router-link&gt;</code> æ·»åŠ å±æ€§ <code>custom</code> ä»¥é˜²æ­¢æ’æ§½çš„å†…å®¹é»˜è®¤åŒ…è£¹åœ¨ <code>&lt;a&gt;</code> å…ƒç´ å†…ï¼Œå¯¼è‡´æ¸²æŸ“å®šåˆ¶å†…å®¹æ—¶å‡ºç°é—®é¢˜ã€‚</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span>
  <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/about<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">custom</span>
  <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ href, route, navigate, isActive, isExactActive }<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- ä¸€ä¸ªè‡ªå®šä¹‰çš„ã€Œé“¾æ¥ã€ç»„ä»¶ï¼Œæ¥æ”¶è·¯ç”±çš„ç›¸å…³ä¿¡æ¯ä½œä¸º props --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NavLink</span> <span class="token attr-name">:active</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isActive<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>href<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>navigate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    {{ route.fullPath }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NavLink</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li><code>href</code>ï¼šè§£æå±æ€§ <code>to</code> åå¾—åˆ°çš„ URLï¼Œå°†ä¼šä½œä¸ºé»˜è®¤ <code>&lt;a&gt;</code> å…ƒç´ çš„ <code>href</code> å±æ€§ã€‚å¦‚æœä»€ä¹ˆéƒ½æ²¡æä¾›ï¼Œåˆ™å®ƒä¼šåŒ…å« <code>base</code></li><li><code>route</code>ï¼šè§£æå±æ€§ <code>to</code> åçš„è§„èŒƒåŒ–çš„åœ°å€</li><li><code>navigate</code>ï¼šè§¦å‘å¯¼èˆªçš„å‡½æ•°ã€‚ <strong>ä¼šåœ¨å¿…è¦æ—¶è‡ªåŠ¨é˜»æ­¢äº‹ä»¶</strong>ï¼Œå’Œ <code>router-link</code> ä¸€æ ·ã€‚ä¾‹å¦‚ï¼š<code>ctrl</code> æˆ–è€… <code>cmd</code> + click ä»ç„¶ä¼šè¢« <code>navigate</code> å¿½ç•¥</li><li><code>isActive</code>ï¼šå¦‚æœéœ€è¦åº”ç”¨ <a href="https://next.router.vuejs.org/zh/api/#active-class" target="_blank" rel="noopener noreferrer">active class</a>ï¼Œåˆ™ä¸º <code>true</code>ï¼ˆåœ¨ç»„ä»¶ä¸Šè®¾ç½®äº†å±æ€§ <code>active-class</code>ï¼‰</li><li><code>isExactActive</code>ï¼šå¦‚æœéœ€è¦åº”ç”¨ <a href="https://next.router.vuejs.org/zh/api/#exact-active-class" target="_blank" rel="noopener noreferrer">exact active class</a>ï¼Œåˆ™ä¸º <code>true</code>ï¼ˆåœ¨ç»„ä»¶ä¸Šè®¾ç½®äº†å±æ€§ <code>exact-active-class</code>ï¼‰</li></ul><p>ğŸ’¡ è·¯ç”±æ¿€æ´»æ—¶ï¼Œæ˜¯æŒ‡ç»„ä»¶ <code>&lt;router-link&gt;</code> çš„å±æ€§ <code>to</code> ä¸å½“å‰ url è·¯å¾„åŒ¹é…ä¸Šï¼‰ï¼Œè¯¥ç»„ä»¶çš„æ ¹å…ƒç´ ä¼šæ·»åŠ ä¸Šç±»å <code>.router-link-active</code>ï¼›è€Œè·¯ç”±å‡†ç¡®åŒ¹é…ä¸Šçš„å…ƒç´ åˆ™ä¼šå†åŠ ä¸Šç±»å <code>.router-link-exact-active</code>ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸¤ä¸ª <code>class</code> ç±»å±æ€§è®¾ç½®æ ·å¼</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Index<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-link</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="ç¼–ç¨‹å¼å¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#ç¼–ç¨‹å¼å¯¼èˆª" aria-hidden="true">#</a> ç¼–ç¨‹å¼å¯¼èˆª</h3><p>ä½¿ç”¨ Vue Router æä¾›çš„æ–¹æ³•é€šè¿‡ JS æ‰‹åŠ¨åˆ‡æ¢ url è·¯å¾„ï¼Œç§°ä¸º<strong>ç¼–ç¨‹å¼å¯¼èˆª</strong></p><p>ğŸ’¡ è¿™äº›æ–¹æ³•æ˜¯æ•ˆä»¿æµè§ˆå™¨æä¾›çš„ API <code>window.history</code>ï¼Œä»¥ä¸‹è·¯ç”±æ–¹æ³•åˆ†åˆ«ç±»ä¼¼äº <code>window.history.pushState</code>ã€<code>window.history.replaceState</code> å’Œ <code>window.history.go</code></p><p>ğŸ’¡ å¦‚æœè·¯ç”±å¯¼èˆªçš„ç›®çš„åœ°å’Œå½“å‰è·¯ç”±<strong>æ˜ å°„çš„ç»„ä»¶æ˜¯ç›¸åŒ</strong>ï¼Œå¦‚ï¼ˆåŠ¨æ€è·¯ç”±ï¼‰åªæœ‰å‚æ•°å‘ç”Ÿäº†æ”¹å˜ï¼Œä¸ºäº†ä¼˜åŒ–æ•ˆç‡ï¼Œç»„ä»¶ä¼šå¤ç”¨ï¼Œå³åœ¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¸­æ‰§è¡Œçš„æ“ä½œå¹¶ä¸ä¼šå†æ¬¡æ‰§è¡Œï¼Œéœ€è¦ä½¿ç”¨ <code>beforeRouteUpdate</code> é’©å­å‡½æ•°è¿›è¡Œè·¯ç”±å®ˆå«ï¼Œæˆ– <code>watch</code> ç›‘å¬è·¯ç”±çš„å˜åŒ–ç„¶ååœ¨ç›¸åº”çš„å›è°ƒå‡½æ•°ä¸­æ‰‹åŠ¨è§¦å‘åŸæ¥æ‰€éœ€çš„æ“ä½œã€‚</p><h4 id="å¸¸è§„å¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#å¸¸è§„å¯¼èˆª" aria-hidden="true">#</a> å¸¸è§„å¯¼èˆª</h4><p>æœ€å¸¸è§çš„å¯¼èˆªæ–¹å¼æ˜¯ä½¿ç”¨æ–¹æ³• <code>$router.push(location)</code> å°†é¡µé¢å¯¼èˆªåˆ°æŒ‡å®šçš„ <code>location</code>ï¼Œå¹¶å‘ history æ ˆæ·»åŠ ä¸€ä¸ªæ–°çš„è®°å½•</p><p>ğŸ’¡ ç›¸åº”çš„å£°æ˜å¼å¯¼èˆªæ˜¯ <code>&lt;router-link to=&quot;location&quot;&gt;</code></p><p>è¯¥æ–¹æ³•çš„å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨ç¤ºè·¯å¾„çš„å­—ç¬¦ä¸²ï¼Œæˆ–ä¸€ä¸ªæè¿°è·¯å¾„çš„å¯¹è±¡</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// å­—ç¬¦ä¸²è·¯å¾„</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/users/ben&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// å¸¦æœ‰è·¯å¾„å±æ€§ path çš„å¯¹è±¡</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/users/ben&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// ä½¿ç”¨å‘½åè·¯ç”±ï¼ˆå‡è®¾è·¯ç”±å¯¹åº”çš„è·¯å¾„æ˜¯ /users/:usernameï¼‰ï¼Œå¹¶åŠ ä¸Šè·¯å¾„å‚æ•°ï¼ˆè®©è·¯ç”±å»ºç«‹ urlï¼Œå°†å‚æ•°ã€Œå¡«å…¥ã€ç›¸åº”åŠ¨æ€è·¯å¾„çš„è·¯å¾„å‚æ•°ï¼‰</span>
<span class="token comment">// ç»“æœæ˜¯ /users/ben</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> username<span class="token operator">:</span> <span class="token string">&#39;ben&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// å¸¦æœ‰è·¯å¾„å±æ€§ path çš„å¯¹è±¡ï¼Œå¹¶å¸¦æŸ¥è¯¢å‚æ•°ï¼ˆè®©è·¯ç”±å»ºç«‹ urlï¼‰</span>
<span class="token comment">// ç»“æœæ˜¯ /register?plan=private</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/register&#39;</span><span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token punctuation">{</span> plan<span class="token operator">:</span> <span class="token string">&#39;private&#39;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// å¸¦æœ‰è·¯å¾„å±æ€§ path çš„å¯¹è±¡ï¼Œå¹¶å¸¦ hash</span>
<span class="token comment">// ç»“æœæ˜¯ /about#team</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/about&#39;</span><span class="token punctuation">,</span> hash<span class="token operator">:</span> <span class="token string">&#39;#team&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ğŸ’¡ å¦‚æœæ–¹æ³• <code>$router.push()</code> ä¼ å…¥çš„æè¿°è·¯å¾„çš„å¯¹è±¡ä¸­ï¼Œå³æä¾›äº† <code>path</code> å±æ€§ï¼Œä¹Ÿæä¾›äº† <code>params</code> å±æ€§ï¼Œé‚£ä¹ˆ <code>params</code> å°±ä¼šè¢«å¿½ç•¥ã€‚å› æ­¤ä¼ é€’å¯¹è±¡æ—¶ï¼Œè¦ä¹ˆæ˜¯å°†å‚æ•°æ‰‹åŠ¨è¿›è¡Œæ‹¼æ¥ï¼Œè¦ä¹ˆæ˜¯ä»¥ <code>name</code> å’Œ <code>params</code> çš„æ–¹å¼æ¥æä¾›å‚æ•°</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> username <span class="token operator">=</span> <span class="token string">&#39;ben&#39;</span>
<span class="token comment">// æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å»ºç«‹ urlï¼Œä½†æˆ‘ä»¬å¿…é¡»è‡ªå·±å¤„ç†ç¼–ç </span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user/ben</span>
<span class="token comment">// åŒæ ·</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/user/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user/ben</span>
<span class="token comment">// å¦‚æœå¯èƒ½çš„è¯ï¼Œä½¿ç”¨ `name` å’Œ `params` ä»è‡ªåŠ¨ URL ç¼–ç ä¸­è·ç›Š</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;user&#39;</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> username <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user/ben</span>
<span class="token comment">// `params` ä¸èƒ½ä¸ `path` ä¸€èµ·ä½¿ç”¨</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> <span class="token string">&#39;/user&#39;</span><span class="token punctuation">,</span> params<span class="token operator">:</span> <span class="token punctuation">{</span> username <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// -&gt; /user</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="æ›¿æ¢å¼å¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#æ›¿æ¢å¼å¯¼èˆª" aria-hidden="true">#</a> æ›¿æ¢å¼å¯¼èˆª</h4><p>ä½¿ç”¨æ–¹æ³• <code>$router.push({path: location, replace: true})</code>ï¼ˆå¢åŠ è¦ç»™å±æ€§ <code>repalce</code>ï¼‰æˆ– <code>$router.replace(location)</code> å¯¼èˆªåˆ°æŒ‡å®šçš„ <code>location</code>ï¼Œå®ƒ<strong>ä¸</strong>ä¼šå‘ history æ·»åŠ æ–°è®°å½•ï¼Œè€Œæ˜¯æ›¿æ¢æ‰å½“å‰çš„ history è®°å½•</p><p>ğŸ’¡ ç›¸åº”çš„å£°æ˜å¼å¯¼èˆªæ˜¯ <code>&lt;router-link to=&quot;location&quot; replace&gt;</code></p><h4 id="å†å²è®°å½•å¯¼èˆª" tabindex="-1"><a class="header-anchor" href="#å†å²è®°å½•å¯¼èˆª" aria-hidden="true">#</a> å†å²è®°å½•å¯¼èˆª</h4><p>ä½¿ç”¨æ–¹æ³• <code>$router.go(n)</code> åœ¨ history è®°å½•ä¸­å‘å‰æˆ–è€…åé€€ <code>n</code> æ­¥ï¼Œç±»ä¼¼ <code>window.history.go(n)</code>ï¼Œå¦‚æœè¾“å…¥çš„æ•°å€¼è¿‡å¤§æˆ–è¿‡å°ï¼Œè€Œ history è®°å½•ä¸å¤Ÿç”¨ï¼Œè·³è½¬å°±ä¼š<strong>å¤±è´¥</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// å‘å‰ç§»åŠ¨ä¸€æ¡è®°å½•ï¼Œä¸ router.forward() ç›¸åŒ</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">// è¿”å›ä¸€æ¡è®°å½•ï¼Œä¸router.back() ç›¸åŒ</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">// å‰è¿› 3 æ¡è®°å½•</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">// å¦‚æœæ²¡æœ‰é‚£ä¹ˆå¤šè®°å½•ï¼Œé™é»˜å¤±è´¥</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">)</span>
router<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="å¯¼èˆªæ•…éšœ" tabindex="-1"><a class="header-anchor" href="#å¯¼èˆªæ•…éšœ" aria-hidden="true">#</a> å¯¼èˆªæ•…éšœ</h3><p>å¯¼èˆªæ•…éšœ/å¯¼èˆªå¤±è´¥ navigation failuresï¼Œè¡¨ç¤ºä¸€æ¬¡å¤±è´¥çš„å¯¼èˆªï¼Œæ‰€æœŸå¾…çš„å¯¼èˆªè¢«é˜»æ­¢ï¼Œç”¨æˆ·ä»<strong>ç•™åœ¨åŒä¸€é¡µé¢ä¸Š</strong>ï¼š</p><ul><li>ç”¨æˆ·å·²ç»ä½äºä»–ä»¬æ­£åœ¨å°è¯•å¯¼èˆªåˆ°çš„é¡µé¢</li><li>å¯¼èˆªå®ˆå« <code>return false</code> æˆ–è°ƒç”¨ <code>next(false)</code> ä¸­æ–­äº†è¿™æ¬¡å¯¼èˆª</li><li>å½“å‰çš„å¯¼èˆªå®ˆå«è¿˜æ²¡æœ‰å®Œæˆæ—¶ï¼Œä¸€ä¸ªæ–°çš„å¯¼èˆªå®ˆå«ä¼šå‡ºç°äº†</li><li>å¯¼èˆªå®ˆå«é€šè¿‡è¿”å›ä¸€ä¸ªè·¯ç”±ï¼Œé‡å®šå‘åˆ°å…¶ä»–åœ°æ–¹ï¼ˆä¾‹å¦‚å¯¹äºæœªç™»å½•çš„ç”¨æˆ·ä¸€ç›´é‡å®šå‘åˆ° <code>/login</code> é¡µé¢ï¼‰</li><li>å¯¼èˆªå®ˆå«æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯ <code>Error</code></li></ul><p>å¯¼èˆªæ•…éšœæ—¶ï¼Œå¯¼èˆªè¿”å›çš„ <code>Promise</code> è¢«è§£æä¸º <strong>Navigation Failure</strong>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸¦æœ‰ä¸€äº›é¢å¤–å±æ€§çš„ <code>Error</code> å®ä¾‹ï¼ˆè€Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œå¯¼èˆªæˆåŠŸ Promise è¢«è§£æä¸ºä¸€ä¸ª <em>falsy</em> å€¼ï¼Œé€šå¸¸æ˜¯ <code>undefined</code>ï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åŒºåˆ†æˆ‘ä»¬å¯¼èˆªæ˜¯å¦ç¦»å¼€äº†å½“å‰ä½ç½®ï¼š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> navigationResult <span class="token operator">=</span> <span class="token keyword">await</span> router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/home&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>navigationResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¯¼èˆªè¢«é˜»æ­¢</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// å¯¼èˆªæˆåŠŸ (åŒ…æ‹¬é‡æ–°å¯¼èˆªçš„æƒ…å†µ)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="é‰´åˆ«å¯¼èˆªæ•…éšœ" tabindex="-1"><a class="header-anchor" href="#é‰´åˆ«å¯¼èˆªæ•…éšœ" aria-hidden="true">#</a> é‰´åˆ«å¯¼èˆªæ•…éšœ</h4><p>è¦æ£€æŸ¥ä¸€ä¸ªé”™è¯¯æ˜¯å¦æ¥è‡ªäºè·¯ç”±å™¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>isNavigationFailure</code> å‡½æ•°ï¼Œå®ƒæ¥æ”¶ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¯¼èˆªçš„ Promiseï¼Œä»¥åˆ¤æ–­å¯¼èˆªè§£æçš„ç±»å‹ï¼Œï¼ˆå¯é€‰ï¼‰ç¬¬äºŒä¸ªå‚æ•°æ˜¯ <code>NavigationFailureType</code> åŒºåˆ†ä¸åŒç±»å‹çš„<em>å¯¼èˆªæ•…éšœ</em></p><p>ğŸ’¡ å¦‚æœåªä¼ é€’ç¬¬ä¸€ä¸ªå‚æ•° <code>isNavigationFailure(failure)</code> å¿½ç•¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œé‚£ä¹ˆå°±åªä¼šæ£€æŸ¥è¿™ä¸ª <code>failure</code> æ˜¯ä¸æ˜¯ä¸€ä¸ª <em>Navigation Failure</em></p><p><mark><code>NavigationFailureType</code> æœ‰<strong>ä¸‰ç§</strong>ä¸åŒçš„ç±»å‹</mark>ï¼Œå¯¹åº”äºä¸åŒçš„æƒ…å†µä¸‹å¯¼è‡´å¯¼èˆªçš„ä¸­æ­¢ï¼š</p><ul><li><code>aborted</code>ï¼šåœ¨å¯¼èˆªå®ˆå«ä¸­è¿”å› <code>false</code> æˆ–è°ƒç”¨äº† <code>next(false)</code> ä¸­æ–­äº†æœ¬æ¬¡å¯¼èˆªã€‚</li><li><code>cancelled</code>ï¼šåœ¨å½“å‰å¯¼èˆªè¿˜æ²¡æœ‰å®Œæˆä¹‹å‰åˆæœ‰äº†ä¸€ä¸ªæ–°çš„å¯¼èˆªã€‚æ¯”å¦‚åœ¨ç­‰å¾…å¯¼èˆªå®ˆå«çš„è¿‡ç¨‹ä¸­ï¼Œåˆè°ƒç”¨äº† <code>router.push</code>ã€‚</li><li><code>duplicated</code>ï¼šå¯¼èˆªè¢«é˜»æ­¢ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»åœ¨ç›®æ ‡ä½ç½®äº†ã€‚</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> isNavigationFailure<span class="token punctuation">,</span> NavigationFailureType <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token comment">// è¯•å›¾ç¦»å¼€æœªä¿å­˜çš„ç¼–è¾‘æ–‡æœ¬ç•Œé¢</span>
<span class="token keyword">const</span> failure <span class="token operator">=</span> <span class="token keyword">await</span> router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/articles/2&#39;</span><span class="token punctuation">)</span>
<span class="token comment">// å¦‚æœå¯¼èˆªæ•…éšœï¼Œä¸”æ•…éšœç±»å‹æ˜¯ aborted</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNavigationFailure</span><span class="token punctuation">(</span>failure<span class="token punctuation">,</span> NavigationFailureType<span class="token punctuation">.</span>aborted<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç»™ç”¨æˆ·æ˜¾ç¤ºä¸€ä¸ªå°é€šçŸ¥</span>
  <span class="token function">showToast</span><span class="token punctuation">(</span><span class="token string">&#39;You have unsaved changes, discard and leave anyway?&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ğŸ’¡ æ‰€æœ‰çš„å¯¼èˆªæ•…éšœéƒ½ä¼šæœ‰ <code>to</code> å’Œ <code>from</code> å±æ€§ï¼Œåˆ†åˆ«ç”¨æ¥è¡¨è¾¾è¿™æ¬¡å¤±è´¥çš„å¯¼èˆªçš„<strong>ç›®æ ‡ä½ç½®</strong>å’Œ<strong>å½“å‰ä½ç½®</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// æ­£åœ¨å°è¯•è®¿é—® admin é¡µé¢</span>
router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/admin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">failure</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNavigationFailure</span><span class="token punctuation">(</span>failure<span class="token punctuation">,</span> NavigationFailureType<span class="token punctuation">.</span>redirected<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    failure<span class="token punctuation">.</span>to<span class="token punctuation">.</span>path <span class="token comment">// &#39;/admin&#39;</span>
    failure<span class="token punctuation">.</span>from<span class="token punctuation">.</span>path <span class="token comment">// &#39;/&#39;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="æ£€æµ‹é‡å®šå‘" tabindex="-1"><a class="header-anchor" href="#æ£€æµ‹é‡å®šå‘" aria-hidden="true">#</a> æ£€æµ‹é‡å®šå‘</h4><p>è¿˜æœ‰ä¸€ç§å¯¼èˆªæ•…éšœæ˜¯å¯¼èˆªå®ˆå«é€šè¿‡è¿”å›ä¸€ä¸ªè·¯ç”±ï¼Œé‡å®šå‘åˆ°å…¶ä»–åœ°æ–¹ï¼Œå®ƒä¼šè§¦å‘ä¸€ä¸ªæ–°çš„å¯¼èˆªï¼Œè¦†ç›–æ­£åœ¨è¿›è¡Œçš„å¯¼èˆªã€‚</p><p>ä¸å…¶ä»–å¯¼èˆªå®ˆå«çš„è¿”å›å€¼ä¸åŒçš„æ˜¯ï¼Œé‡å®šå‘<strong>ä¸ä¼šé˜»æ­¢å¯¼èˆªï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¼èˆª</strong>ï¼Œå¯ä»¥é€šè¿‡è¯»å–å½“å‰è·¯ç”±åœ°å€ä¸­çš„ <strong><code>redirectedFrom</code> å±æ€§</strong>ï¼Œå¯¹å…¶è¿›è¡Œæ£€æŸ¥</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">await</span> router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/my-profile&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>router<span class="token punctuation">.</span>currentRoute<span class="token punctuation">.</span>value<span class="token punctuation">.</span>redirectedFrom<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// redirectedFrom æ˜¯è§£æå‡ºçš„è·¯ç”±åœ°å€</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="å¯¼èˆªå®ˆå«" tabindex="-1"><a class="header-anchor" href="#å¯¼èˆªå®ˆå«" aria-hidden="true">#</a> å¯¼èˆªå®ˆå«</h2><p>å¯¼èˆªå®ˆå«æ˜¯åœ¨æŒ‡ç”¨æˆ·è®¿é—®ç‰¹å®šçš„è·¯å¾„æ—¶ï¼Œ<strong>åŸºäºæ¡ä»¶æ‰§è¡Œè·³è½¬æˆ–å–æ¶ˆçš„æ“ä½œ</strong>ï¼Œä»è€Œåœ¨å‰ç«¯å¯¹ç‰¹å®šé¡µé¢å’Œæ•°æ®è¿›è¡Œã€Œä¿æŠ¤ã€ã€‚æœ‰å¤šç§æœºä¼šæ¤å…¥å¯¼èˆªå®ˆå«ï¼Œå¯ä»¥è®¾ç½®å…¨å±€çš„ã€å•ä¸ªè·¯ç”±ç‹¬äº«çš„ã€æˆ–è€…ç»„ä»¶çº§çš„è·¯ç”±å®ˆå«ã€‚</p><p>ğŸ’¡ å®ˆå«æ˜¯<strong>å¼‚æ­¥</strong>è§£ææ‰§è¡Œï¼Œå› æ­¤å¯¼èˆªåœ¨æ‰€æœ‰å®ˆå« resolve å®Œä¹‹å‰ä¸€ç›´å¤„äº<strong>ç­‰å¾…ä¸­</strong></p><p>å®Œæ•´çš„è·¯ç”±å¯¼èˆªè§£ææµç¨‹ï¼š</p><ol><li>å¯¼èˆªè¢«è§¦å‘</li><li>åœ¨å¤±æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ <strong><code>beforeRouteLeave</code> å®ˆå«</strong>ï¼ˆç»„ä»¶å†…çš„å®ˆå«ï¼‰</li><li>è°ƒç”¨å…¨å±€çš„ <strong><code>beforeEach</code> å®ˆå«</strong>ï¼ˆå…¨å±€å‰ç½®å®ˆå«ï¼‰</li><li>åœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨ <strong><code>beforeRouteUpdate</code> å®ˆå«</strong>ï¼ˆç»„ä»¶å†…çš„å®ˆå«ï¼Œè·¯ç”±æ›´æ–°ï¼Œä½†ç»„ä»¶å¤ç”¨ï¼‰</li><li>åœ¨è·¯ç”±é…ç½®é‡Œè°ƒç”¨ <strong><code>beforeEnter</code> å®ˆå«</strong>ï¼ˆè·¯ç”±ç‹¬äº«çš„å®ˆå«ï¼‰</li><li>è§£æå¼‚æ­¥è·¯ç”±ç»„ä»¶</li><li>åœ¨è¢«æ¿€æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ <strong><code>beforeRouteEnter</code> å®ˆå«</strong>ï¼ˆç»„ä»¶å†…çš„å®ˆå«ï¼‰</li><li>è°ƒç”¨å…¨å±€çš„ <strong><code>beforeResolve</code> å®ˆå«</strong>ï¼ˆå…¨å±€è§£æå®ˆå«ï¼‰</li><li>å¯¼èˆªè¢«ç¡®è®¤</li><li>è°ƒç”¨å…¨å±€çš„ <strong><code>afterEach</code> é’©å­</strong>ï¼ˆå…¨å±€åç½®å®ˆå«ï¼‰</li><li>è§¦å‘ DOM æ›´æ–°</li><li>è°ƒç”¨ <code>beforeRouteEnter</code> å®ˆå«ä¸­ä¼ ç»™ <strong><code>next</code> çš„å›è°ƒå‡½æ•°</strong>ï¼Œåˆ›å»ºå¥½çš„ç»„ä»¶å®ä¾‹ä¼šä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°ä¼ å…¥</li></ol><p>ğŸ’¡ è·¯ç”±çš„å‚æ•° <code>params</code> æˆ–æŸ¥è¯¢ <code>query</code> çš„æ”¹å˜å¹¶<strong>ä¸</strong>ä¼šè§¦å‘è¿›å…¥/ç¦»å¼€ç±»å‹çš„å¯¼èˆªå®ˆå«ã€‚å¯ä»¥é€šè¿‡ <code>watch</code> è§‚å¯Ÿ <code>$route</code> è·¯ç”±å¯¹è±¡æ¥åº”å¯¹è¿™äº›å˜åŒ–ï¼Œæˆ–ä½¿ç”¨ <a href="#%E7%BB%84%E4%BB%B6%E5%86%85%E5%AE%88%E5%8D%AB"><code>beforeRouteUpdate</code> ç»„ä»¶å†…å®ˆå«</a>æ¥å“åº”è¿™äº›å˜åŒ–ã€‚</p><h3 id="å›è°ƒå‡½æ•°" tabindex="-1"><a class="header-anchor" href="#å›è°ƒå‡½æ•°" aria-hidden="true">#</a> å›è°ƒå‡½æ•°</h3><h4 id="å…¥å‚" tabindex="-1"><a class="header-anchor" href="#å…¥å‚" aria-hidden="true">#</a> å…¥å‚</h4><p>è·¯ç”±å®ˆå«å›è°ƒå‡½æ•°ä¸€èˆ¬æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li><code>to</code> å³å°†è¦è¿›å…¥çš„ç›®æ ‡ï¼ˆè·¯ç”±å¯¹è±¡ routeï¼‰</li><li><code>from</code> å½“å‰å¯¼èˆªæ­£è¦ç¦»å¼€çš„è·¯ç”±å¯¹è±¡ route</li></ul><p>ğŸ’¡ <mark>è·¯ç”±å®ˆå«çš„å›è°ƒå‡½æ•°è¿˜å¯ä»¥æ¥æ”¶ç¬¬ä¸‰ä¸ªï¼ˆå¯é€‰ï¼‰å‚æ•° <code>next</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡è°ƒç”¨å®ƒä»¥éªŒè¯å¯¼èˆªã€‚ä½†æ˜¯å¦‚æœå®ˆå«çš„å›è°ƒå‡½æ•°ä¸­æœ‰<a href="#%E8%BF%94%E5%9B%9E%E5%80%BC">è¿”å›å€¼</a>ï¼Œåˆ™å¯ä»¥çœç•¥ <code>next</code>ï¼Œå¹¶ä¸”é¼“åŠ±è¿™ä¹ˆåšã€‚</mark></p><p>âš ï¸ <strong>å¦‚æœä¼ é€’äº†è¯¥å‚æ•°ï¼Œè¯·ç¡®ä¿å®ƒè¢«ä¸¥æ ¼è°ƒç”¨ä¸€æ¬¡</strong>ï¼Œè¿™æ ·å®ˆå«æ‰å¯ä»¥ <code>resolve</code> Promise ä»¥ã€Œæ”¾è¡Œã€ï¼Œå¦åˆ™é¡µé¢å°†ä¼šã€Œå¡ä½ã€ï¼Œæ— æ³•é¡ºåˆ©è·³è½¬æˆ–å±•ç¤ºæ•°æ®ã€‚å®ƒçš„æ‰§è¡Œæ•ˆæœä¾èµ–è°ƒç”¨æ—¶ä¼ é€’çš„å‚æ•°ï¼š</p><ul><li><p><code>next()</code> ä¸ä¼ é€’å‚æ•°æ—¶ï¼Œä¼šè¿›è¡Œç®¡é“ä¸­çš„ä¸‹ä¸€ä¸ªé’©å­</p></li><li><p><code>next(false)</code> ä¸­æ–­å½“å‰çš„å¯¼èˆª</p></li><li><p><code>next(&#39;/otherPath&#39;)</code> æˆ–è€… <code>next({ path: &#39;/otherPath&#39; })</code> å½“å‰çš„å¯¼èˆªè¢«ä¸­æ–­ï¼Œç„¶åè¿›è¡Œä¸€ä¸ªæ–°çš„å¯¼èˆªã€‚è·³è½¬åˆ°ä¸€ä¸ªä¸åŒçš„åœ°å€</p><p>ğŸ’¡ ä¼ é€’å¯¹è±¡å¯ä»¥å®šåˆ¶è·³è½¬çš„æ–¹å¼ï¼Œå¦‚ <code>next({ replace: trueã€name: &#39;home&#39; })</code> ä»¥å–ä»£å†å²è®°å½•çš„æ–¹å¼ï¼Œè·³è½¬å¯¼èˆªåˆ°é¦–é¡µã€‚</p></li><li><p><code>next(error)</code> ä¼ å…¥ next çš„å‚æ•°æ˜¯ä¸€ä¸ª Error å®ä¾‹ï¼Œåˆ™å¯¼èˆªä¼šè¢«ç»ˆæ­¢ã€‚</p></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// åœ¨ç”¨æˆ·æœªèƒ½éªŒè¯èº«ä»½æ—¶ï¼Œé‡å®šå‘åˆ° /login é¡µé¢</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">&#39;Login&#39;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>isAuthenticated<span class="token punctuation">)</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&#39;Login&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">else</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="è¿”å›å€¼" tabindex="-1"><a class="header-anchor" href="#è¿”å›å€¼" aria-hidden="true">#</a> è¿”å›å€¼</h4><p>è·¯ç”±å®ˆå«å›è°ƒå‡½æ•°æœ‰å¤šç§è¿”å›å€¼ï¼Œç›¸åº”æ‰§è¡Œä¸åŒçš„å¯¼èˆªè¡Œä¸º</p><ul><li><p>æ— è¿”å›ï¼ˆå³è¿”å› <code>undefined</code>ï¼‰æˆ–è¿”å› <code>true</code>ï¼šæ‰§è¡Œé¢„æœŸçš„å¯¼èˆª</p></li><li><p>è¿”å› <code>false</code>ï¼šå–æ¶ˆå½“å‰çš„å¯¼èˆª</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// è¿”å› false ä»¥å–æ¶ˆå¯¼èˆª</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>å¦‚æœæµè§ˆå™¨çš„ URL æ”¹å˜äº†ï¼ˆå¯èƒ½æ˜¯ç”¨æˆ·æ‰‹åŠ¨æˆ–è€…æµè§ˆå™¨åé€€æŒ‰é’®ï¼‰ï¼Œé‚£ä¹ˆ URL åœ°å€ä¼šé‡ç½®åˆ° <code>from</code> è·¯ç”±å¯¹åº”çš„åœ°å€</p></li><li><p>è¿”å›ä¸€ä¸ªè·¯ç”±åœ°å€ï¼šæ‰§è¡Œå¯¼èˆªåˆ°å¦å¤–çš„åœ°å€</p><p>è·¯ç”±åœ°å€å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨ç¤ºè·¯å¾„çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæè¿°è·¯ç”±ä¿¡æ¯çš„å¯¹è±¡ï¼Œå¯ä»¥è®¾ç½®å¦‚ <code>replace: true</code> æˆ– <code>name: &#39;home&#39;</code> ç­‰é€‰é¡¹ã€‚è¿™æ—¶å€™ç±»ä¼¼äºè°ƒç”¨ <code>router.push()</code> ä¸€æ ·ï¼Œæ‰‹åŠ¨æ‰§è¡Œå¯¼èˆªï¼Œè·³è½¬åˆ°è¿”å›çš„åœ°å€ï¼ˆä¸ç”¨æˆ·åŸæ¥æœŸå¾…çš„å¯¼èˆªè·¯å¾„ä¸åŒï¼‰</p></li><li><p>æŠ›å‡ºä¸€ä¸ª <code>Error</code>ï¼šå–æ¶ˆå¯¼èˆªå¹¶ä¸”è°ƒç”¨æ‰§è¡Œ <code>router.onError()</code> æ³¨å†Œè¿‡çš„å›è°ƒ</p><p>ä¸€èˆ¬æ˜¯é‡åˆ°æ„æ–™ä¹‹å¤–çš„æƒ…å†µ</p></li></ul><p>ä»¥ä¸‹æ˜¯å¸¸ç”¨çš„è·¯ç”±å®ˆå«é’©å­å‡½æ•°ï¼Œæ ¹æ®å®é™…æƒ…å†µé€‰æ‹©åˆé€‚çš„é’©å­å‡½æ•°è¿›è¡Œè·¯ç”±å®ˆå«ï¼š</p><h3 id="å…¨å±€å‰ç½®å®ˆå«" tabindex="-1"><a class="header-anchor" href="#å…¨å±€å‰ç½®å®ˆå«" aria-hidden="true">#</a> å…¨å±€å‰ç½®å®ˆå«</h3><p>å…¨å±€è·¯ç”±å®ˆå« <code>beforeEach</code> åœ¨è¿›å…¥ä»»ä½•è·¯ç”±<strong>å‰</strong>éƒ½ä¼šè°ƒç”¨ã€‚å¯ä»¥ä½¿ç”¨è·¯ç”±å®ä¾‹çš„æ–¹æ³• <code>beforeEach()</code> å®šä¹‰ä¸€ä¸ªå…¨å±€è·¯ç”±å®ˆå«ï¼Œå½“ä¸€ä¸ªå¯¼èˆªè§¦å‘æ—¶ï¼Œå…¨å±€å‰ç½®å®ˆå«<strong>æŒ‰ç…§åˆ›å»ºé¡ºåºä¾æ­¤è°ƒç”¨</strong>ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="å…¨å±€è§£æå®ˆå«" tabindex="-1"><a class="header-anchor" href="#å…¨å±€è§£æå®ˆå«" aria-hidden="true">#</a> å…¨å±€è§£æå®ˆå«</h3><p>å…¨å±€è§£æå®ˆå« <code>beforeResolve</code> å’Œå…¨å±€å‰ç½®å®ˆå« <code>beforeEach</code> ç±»ä¼¼ï¼Œä¹Ÿæ˜¯åœ¨æ¯æ¬¡å¯¼èˆªéƒ½ä¼šè°ƒç”¨ï¼Œä½†å®ƒä¼šåœ¨<strong>æ‰€æœ‰ç»„ä»¶å†…å®ˆå«å’Œå¼‚æ­¥è·¯ç”±ç»„ä»¶è¢«è§£æä¹‹åï¼Œåœ¨ç¡®è®¤å¯¼èˆªä¹‹å‰</strong>è¢«è°ƒç”¨ã€‚</p><p>å…¨å±€è§£æå®ˆå«æ‰§è¡Œæ—¶ï¼Œ<strong>ç”¨æˆ·è¿˜æœªè¿›å…¥é¡µé¢</strong>ï¼Œä¸€èˆ¬ä¼šåœ¨è¯¥å®ˆå«çš„å›è°ƒå‡½æ•°ä¸­ fetch æ•°æ®ï¼Œå¯ä»¥è®¿é—®è·¯ç”±çš„å…ƒä¿¡æ¯ï¼Œæˆ–è€…æ‰§è¡Œä¸€äº›é¢„åˆ¤æ“ä½œï¼Œå¦‚æƒé™è¯¢é—®è·å–ï¼Œå°½æ—©é˜»æ­¢ç”¨æˆ·è®¿é—®ç›¸åº”çš„é¡µé¢ï¼ˆä»¥ä¾¿é¿å…ç”¨æˆ·å³ä½¿è¿›å…¥äº†é¡µé¢ï¼Œå´å› ä¸ºä¸ç¬¦åˆæ¡ä»¶ï¼Œè€Œæ— æ³•æ‰§è¡Œä¸€äº›æ“ä½œï¼‰ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// é€šè¿‡å…¨å±€è§£æå®ˆå«ï¼Œè·å–ç›®çš„è·¯ç”±çš„ meta å…ƒä¿¡æ¯</span>
<span class="token comment">// è¯¥è·¯ç”±çš„å…ƒä¿¡æ¯æœ‰ requiresCamera é€‰é¡¹ï¼ˆå¸ƒå°”å€¼ï¼‰è¡¨ç¤ºè·³è½¬çš„é¡µé¢éœ€è¦ä½¿ç”¨è®¾å¤‡æ‘„åƒæœº</span>
router<span class="token punctuation">.</span><span class="token function">beforeResolve</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">to</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>requiresCamera<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¯ä»¥åœ¨è·¯ç”±å®ˆå«ä¸­å…ˆå°è¯•è·å–è®¿é—®è®¾å¤‡æ‘„åƒæœºçš„æƒé™</span>
      <span class="token keyword">await</span> <span class="token function">askForCameraPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// å¦‚æœæ— æ³•è·å–æƒé™å°±å–æ¶ˆå¯¼èˆª</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token keyword">instanceof</span> <span class="token class-name">NotAllowedError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ„æ–™ä¹‹å¤–çš„é”™è¯¯ï¼Œå–æ¶ˆå¯¼èˆªå¹¶æŠŠé”™è¯¯ä¼ ç»™å…¨å±€å¤„ç†å™¨</span>
        <span class="token keyword">throw</span> error
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="å…¨å±€åç½®é’©å­" tabindex="-1"><a class="header-anchor" href="#å…¨å±€åç½®é’©å­" aria-hidden="true">#</a> å…¨å±€åç½®é’©å­</h3><p>å…¨å±€åç½®é’©å­ <code>afterEach</code> åœ¨<strong>å¯¼èˆªè¢«ç¡®è®¤æ—¶</strong>è°ƒç”¨ï¼Œè¿™ä¸ªé’©å­<strong>ä¸</strong>ä¼šæ¥å— <code>next</code> å‡½æ•°ï¼Œä¹Ÿ<strong>ä¸ä¼šæ”¹å˜å¯¼èˆªæœ¬èº«</strong>ã€‚</p><p>å¯ä»¥åœ¨è¿™ä¸ªè·¯ç”±å®ˆå«ä¸­å¯¹æ‰€æœ‰å¯¼èˆªæˆåŠŸæ‰€è¿›å…¥çš„é¡µé¢è¿›è¡Œæ“ä½œï¼Œä¾‹å¦‚å¯ä»¥å®ç°åˆ†æã€æ›´æ”¹é¡µé¢æ ‡é¢˜ï¼Œå£°æ˜é¡µé¢ç­‰è¾…åŠ©åŠŸèƒ½ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">sendToAnalytics</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>fullPath<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>ğŸ’¡ å¯¼èˆªå¤±è´¥çš„ä¿¡æ¯ <a href="https://next.router.vuejs.org/guide/advanced/navigation-failures.html" target="_blank" rel="noopener noreferrer">navigation failures</a> å¯ä»¥ä½œä¸ºï¼ˆå¯é€‰ï¼‰ç¬¬ä¸‰ä¸ªå‚æ•°</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> failure</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>failure<span class="token punctuation">)</span> <span class="token function">sendToAnalytics</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>fullPath<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="è·¯ç”±ç‹¬äº«å®ˆå«" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±ç‹¬äº«å®ˆå«" aria-hidden="true">#</a> è·¯ç”±ç‹¬äº«å®ˆå«</h3><p>è·¯ç”±ç‹¬äº«çš„å®ˆå« <code>beforeEnter</code> åªæœ‰åœ¨è¿›å…¥ç‰¹å®šè·¯å¾„å‰è°ƒç”¨ã€‚å¯ä»¥åœ¨è·¯ç”±é…ç½®æ—¶ï¼Œä½¿ç”¨é€‰é¡¹ <code>beforeEnter</code> é’ˆå¯¹ç‰¹å®šçš„è·¯ç”±è¿›è¡Œå®šä¹‰ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è·¯ç”±é…ç½®</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/users/:id&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> UserDetails<span class="token punctuation">,</span>
    <span class="token function-variable function">beforeEnter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// reject the navigation</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>ğŸ’¡ å¯ä»¥<mark>å°†ä¸€ä¸ªå‡½æ•°æ•°ç»„ä¼ é€’ç»™ <code>beforeEnter</code></mark>ï¼Œå®ƒä»¬ä¼šè¢«ä¾æ­¤æ‰§è¡Œï¼Œè¿™åœ¨ä¸ºä¸åŒçš„è·¯ç”±é‡ç”¨å®ˆå«æ—¶å¾ˆæœ‰ç”¨</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">removeQueryParams</span><span class="token punctuation">(</span><span class="token parameter">to</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> path<span class="token operator">:</span> to<span class="token punctuation">.</span>path<span class="token punctuation">,</span> query<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> hash<span class="token operator">:</span> to<span class="token punctuation">.</span>hash <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">removeHash</span><span class="token punctuation">(</span><span class="token parameter">to</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>hash<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">{</span> path<span class="token operator">:</span> to<span class="token punctuation">.</span>path<span class="token punctuation">,</span> query<span class="token operator">:</span> to<span class="token punctuation">.</span>query<span class="token punctuation">,</span> hash<span class="token operator">:</span> <span class="token string">&#39;&#39;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// è·¯ç”±é…ç½®</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/users/:id&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> UserDetails<span class="token punctuation">,</span>
    beforeEnter<span class="token operator">:</span> <span class="token punctuation">[</span>removeQueryParams<span class="token punctuation">,</span> removeHash<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// å‡½æ•°æ•°ç»„</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ğŸ’¡ è·¯ç”±ç‹¬äº«å®ˆå« <code>beforeEnter</code> åªåœ¨è¿›å…¥è·¯ç”±æ—¶è§¦å‘ï¼Œ<strong>ä¸</strong>ä¼šåœ¨ <code>params</code>ã€<code>query</code> æˆ– <code>hash</code> æ”¹å˜æ—¶è§¦å‘ã€‚</p><h3 id="ç»„ä»¶å†…å®ˆå«" tabindex="-1"><a class="header-anchor" href="#ç»„ä»¶å†…å®ˆå«" aria-hidden="true">#</a> ç»„ä»¶å†…å®ˆå«</h3><p>å¯ä»¥åœ¨<strong>ç»„ä»¶å†…</strong>å®šä¹‰è·¯ç”±å®ˆå«ï¼Œè¿™äº›è·¯ç”±å®ˆå«ä¼šåœ¨è¯¥ç»„ä»¶ç›¸åº”çš„è·¯ç”±ä¿®æ”¹æ—¶ä½œå‡ºååº”ã€‚</p><h4 id="é€‰é¡¹å¼-api" tabindex="-1"><a class="header-anchor" href="#é€‰é¡¹å¼-api" aria-hidden="true">#</a> é€‰é¡¹å¼ API</h4><p>å¯ä»¥åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ä»¥ä¸‹é€‰é¡¹ï¼Œä¸ºè·¯ç”±ç»„ä»¶æ·»åŠ ç»„ä»¶å†…å®ˆå«</p><ul><li><p><code>beforeRouteEnter(to, from) {...}</code> åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢« confirm <strong>å‰</strong>è°ƒç”¨</p><p>âš ï¸ å®ˆå«çš„é’©å­å‡½æ•°å†…<strong>ä¸</strong>èƒ½è®¿é—®ç»„ä»¶å®ä¾‹ <code>this</code>ï¼Œå› ä¸ºè¯¥å®ˆå«åœ¨å¯¼èˆªç¡®è®¤å‰è¢«è°ƒç”¨ï¼Œæ­¤æ—¶å³å°†ç™»åœºçš„æ–°ç»„ä»¶è¿˜æ²¡è¢«åˆ›å»ºã€‚ä¸è¿‡å¯ä»¥é€šè¿‡ï¼ˆå¯é€‰ï¼‰ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œä¼ ä¸€ä¸ªå›è°ƒç»™å…¶ä¸­çš„ <code>next</code> å‡½æ•°æ¥è®¿é—®ç»„ä»¶å®ä¾‹</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">beforeRouteEnter</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// åœ¨å¯¼èˆªè¢«ç¡®è®¤çš„æ—¶å€™æ‰§è¡Œ next çš„å›è°ƒï¼Œå¹¶ä¸”æŠŠç»„ä»¶å®ä¾‹ä½œä¸ºå›è°ƒæ–¹æ³•çš„å‚æ•°</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">vm</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// é€šè¿‡ `vm` è®¿é—®ç»„ä»¶å®ä¾‹</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><p><code>beforeRouteUpdate(to, from) {...}</code> åœ¨å½“å‰è·¯ç”±æ”¹å˜ä½†æ˜¯è¯¥<strong>ç»„ä»¶è¢«å¤ç”¨æ—¶</strong>è°ƒç”¨ï¼Œä¸€èˆ¬ç”¨äºåœ¨è·¯ç”±çš„è·¯å¾„å‚æ•° <code>params</code> æˆ–æŸ¥è¯¢å‚æ•° <code>query</code> æ”¹å˜æ—¶åšå‡ºå“åº”ã€‚</p><p>ä¾‹å¦‚å¯¹äºåŠ¨æ€è·¯å¾„ <code>/users/:id</code>ï¼Œå½“ç”¨æˆ·åœ¨ <code>/users/1</code> å’Œ <code>/users/2</code> ä¹‹é—´è·³è½¬çš„æ—¶å€™ï¼Œè¿™ä¸ªé’©å­ä¼šè¢«è°ƒç”¨ï¼Œç”±äºåœ¨è¿™ç§æƒ…å†µä¸‹ç»„ä»¶å·²ç»æŒ‚è½½å¥½äº†ï¼Œå¯¼èˆªå®ˆå«<strong>å¯ä»¥</strong>è®¿é—®ç»„ä»¶å®ä¾‹ <code>this</code></p></li><li><p><code>beforeRouteLeave(to, from) {...}</code> å¯¼èˆªç¦»å¼€è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨ã€‚</p><p>ç¦»å¼€å®ˆå«é€šå¸¸ç”¨æ¥<strong>ç¦æ­¢ç”¨æˆ·åœ¨è¿˜æœªä¿å­˜ä¿®æ”¹å‰çªç„¶ç¦»å¼€</strong>ï¼Œå¯ä»¥é€šè¿‡è¿”å› <code>false</code> æ¥å–æ¶ˆå¯¼èˆªã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token function">beforeRouteLeave</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> answer <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&#39;Really want to leave? you have unsaved changes!&#39;</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>answer<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul><h4 id="ç»„åˆå¼-api" tabindex="-1"><a class="header-anchor" href="#ç»„åˆå¼-api" aria-hidden="true">#</a> ç»„åˆå¼ API</h4><p><mark>Vue Router å°†<strong>æ›´æ–°</strong>å’Œ<strong>ç¦»å¼€</strong>å®ˆå«ä½œä¸ºç»„åˆå¼ API å‡½æ•°å…¬å¼€</mark>ï¼Œå¯ä»¥åœ¨ç»„ä»¶çš„é€‰é¡¹ <code>setup</code> å‡½æ•°ä¸­ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å®šä¹‰ç»„ä»¶å†…å®ˆå«ï¼š</p><ul><li><code>onBeforeTouteUpdata</code></li><li><code>onBeforeRouteLeave</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> onBeforeRouteLeave<span class="token punctuation">,</span> onBeforeRouteUpdate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¸ beforeRouteLeave ç›¸åŒï¼Œæ— æ³•è®¿é—® `this`</span>
    <span class="token function">onBeforeRouteLeave</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> answer <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>
        <span class="token string">&#39;Do you really want to leave? you have unsaved changes!&#39;</span>
      <span class="token punctuation">)</span>
      <span class="token comment">// å–æ¶ˆå¯¼èˆªå¹¶åœç•™åœ¨åŒä¸€é¡µé¢ä¸Š</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>answer<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> userData <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// ä¸ beforeRouteLeave ç›¸åŒï¼Œæ— æ³•è®¿é—® `this`</span>
    <span class="token function">onBeforeRouteUpdate</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//ä»…å½“ id æ›´æ”¹æ—¶æ‰è·å–ç”¨æˆ·ï¼Œä¾‹å¦‚ä»… query æˆ– hash å€¼å·²æ›´æ”¹</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id <span class="token operator">!==</span> from<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userData<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUser</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>ğŸ’¡ ç»„ä»¶å†…å®ˆå«çš„ç»„åˆå¼ API å¯ä»¥ç”¨åœ¨ä»»ä½•ç”± <code>&lt;router-view&gt;</code> æ¸²æŸ“çš„ç»„ä»¶ä¸­ï¼Œå®ƒä»¬ä¸å¿…åƒé€‰é¡¹å¼ API é‚£æ ·ç›´æ¥ç”¨åœ¨è·¯ç”±ç»„ä»¶ä¸Šã€‚</p><h3 id="æ•°æ®è·å–" tabindex="-1"><a class="header-anchor" href="#æ•°æ®è·å–" aria-hidden="true">#</a> æ•°æ®è·å–</h3><p>åœ¨è®¿é—®ç½‘é¡µéœ€è¦ä»æœåŠ¡å™¨è·å–æ•°æ®ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ—¶æœºå¯ä»¥é€‰æ‹©ï¼š</p><ul><li>åœ¨å¯¼èˆªå®Œæˆä¹‹åï¼šå…ˆå®Œæˆå¯¼èˆªï¼Œç„¶ååœ¨æ¥ä¸‹æ¥çš„<strong>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ä¸­</strong>ï¼Œå¦‚ <code>created</code> é’©å­ï¼Œè·å–æ•°æ®ã€‚åœ¨æ•°æ®è·å–æœŸé—´æ˜¾ç¤º Loading ä¹‹ç±»çš„æŒ‡ç¤ºã€‚è¿™ä¸ªæ—¶æœºä¸€èˆ¬æ˜¯è·å–é¡µé¢æ•°æ®ã€‚</li><li>åœ¨å¯¼èˆªå®Œæˆä¹‹å‰ï¼šå¯¼èˆªå®Œæˆå‰ï¼Œåœ¨è·¯ç”±è¿›å…¥çš„<strong>å®ˆå«é’©å­å‡½æ•°ä¸­</strong>è·å–æ•°æ®ï¼Œåœ¨æ•°æ®è·å–æˆåŠŸåæ‰§è¡Œå¯¼èˆªã€‚åœ¨è·å–æ•°æ®æ—¶ä¼šåœæ­¢è·³è½¬ï¼Œ<strong>ç”¨æˆ·ä¼šåœç•™åœ¨å½“å‰çš„ç•Œé¢ï¼Œæœ‰ç§ã€Œå¡ä½ã€çš„æ„Ÿè§‰</strong>ï¼Œå› æ­¤å»ºè®®åœ¨æ•°æ®è·å–æœŸé—´ï¼Œæ˜¾ç¤ºä¸€äº›è¿›åº¦æ¡æˆ–è€…åˆ«çš„æŒ‡ç¤ºã€‚è¿™ä¸ªæ—¶æœºä¸€èˆ¬æ˜¯<strong>åŸºäºéªŒè¯ã€ä¼šå‘˜</strong>å†…å®¹çš„æ•°æ®è·å–ã€‚</li></ul><p>âš ï¸ ä½¿ç”¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸçš„ hook æˆ–è·¯ç”±å®ˆå«æ—¶åº”è¯¥è€ƒè™‘ Vue å¯¹äº<strong>ç»„ä»¶çš„å¤ç”¨</strong>ï¼Œå¦‚æœä½¿ç”¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°è·å–æ•°æ®æ—¶ï¼Œåº”è¯¥æ·»åŠ  <code>watch</code> ä¾¦å¬è·¯ç”± <code>$route</code> çš„å˜æ¢ï¼Œæ‰‹åŠ¨è§¦å‘é‡æ–°è·å–æ•°æ®ï¼›å¦‚æœä½¿ç”¨è·¯ç”±å®ˆå«çš„é’©å­å‡½æ•°ï¼Œåˆ™å¯ä»¥åœ¨ç»„ä»¶å†…å®ˆå«çš„ <code>beforeRouteUpdate</code> é’©å­å‡½æ•°ä¸­è·å–æ•°æ®ï¼Œè¿™æ ·å³ä½¿ç»„ä»¶å¤ç”¨ä¹Ÿå¯ä»¥é¡ºåˆ©æ›´æ–°æ•°æ®ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// watch è·¯ç”±çš„å‚æ•°ï¼Œä»¥ä¾¿å†æ¬¡è·å–æ•°æ®</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$watch</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>params<span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// ç»„ä»¶åˆ›å»ºå®Œåè·å–æ•°æ®ï¼Œ</span>
      <span class="token punctuation">{</span> immediate<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// åœ¨å¯¼èˆªè½¬å…¥æ–°çš„è·¯ç”±å‰è·å–æ•°æ®</span>
  <span class="token comment">// é€šè¿‡è°ƒç”¨ next æ–¹æ³•è®¿é—®ç»„ä»¶å®ä¾‹ï¼Œå°†è·å–çš„æ•°æ®æ”¾åˆ° data é€‰é¡¹ä¸­ï¼Œä½¿æ•°æ®å…·æœ‰å“åº”æ€§</span>
  <span class="token function">beforeRouteEnter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> from<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">getPost</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> post</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token parameter">vm</span> <span class="token operator">=&gt;</span> vm<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> post<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// é€šè¿‡ beforeRouteUpdate å®ˆå«å¯ä»¥å“åº”è·¯ç”±çš„è·¯å¾„å‚æ•°æˆ–æŸ¥è¯¢å‚æ•°çš„å˜åŒ–</span>
  <span class="token keyword">async</span> <span class="token function">beforeRouteUpdate</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>post <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>post <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getPost</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>error <span class="token operator">=</span> error<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="è¿‡æ¸¡æ•ˆæœ" tabindex="-1"><a class="header-anchor" href="#è¿‡æ¸¡æ•ˆæœ" aria-hidden="true">#</a> è¿‡æ¸¡æ•ˆæœ</h2><p>å¯ä»¥ç”¨ <code>&lt;transition&gt;</code> ç»„ä»¶ç»™æ‰€æœ‰è·¯ç”±ç»„ä»¶ <code>&lt;router-view&gt;</code> æ·»åŠ è¿‡æ¸¡æ•ˆæœï¼Œè¿™æ ·åœ¨è·¯ç”±åˆ‡æ¢æ—¶ï¼Œç»„ä»¶å°±å¯ä»¥æœ‰ç›¸åº”çš„è¿›å…¥/ç¦»å¼€çš„åŠ¨æ•ˆï¼Œ</p><p><mark>ä½†åœ¨ Vue Router Next ä¸­ <code>&lt;transition&gt;</code> ç»„ä»¶éœ€è¦åœ¨ <code>&lt;router-view&gt;</code> çš„æ’æ§½ä¸­ï¼Œé…åˆ <code>&lt;router-view&gt;</code> çš„ä½œç”¨åŸŸæ’æ§½ <a href="https://next.router.vuejs.org/api/index.html#route" target="_blank" rel="noopener noreferrer"><code>v-slot</code> æš´éœ²çš„å‚æ•°</a>ä½¿ç”¨ï¼š</mark></p><ul><li><code>Component</code>: VNodes ä¸€èˆ¬ç”¨ä»¥ä¼ é€’ç»™ç»„ä»¶ <code>&lt;component&gt;</code> çš„ <code>is</code> å±æ€§ï¼Œç”¨ä»¥åŠ¨æ€åˆ‡æ¢è·¯ç”±ç»„ä»¶</li><li><code>route</code>: è§£æå‡ºçš„è·¯ç”±åœ°å€</li></ul><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ Component, route }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>route.meta.transition || <span class="token punctuation">&#39;</span>fade<span class="token punctuation">&#39;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>out-in<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span>
        <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>route.meta.usePathKey ? route.path : undefined<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>keep-alive</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ğŸ’¡ å¦‚æœä½ æƒ³è®©æ¯ä¸ªè·¯ç”±çš„ç»„ä»¶æœ‰ä¸åŒçš„è¿‡æ¸¡ï¼Œå¯ä»¥åœ¨è·¯ç”±çš„å…ƒä¿¡æ¯ä¸­æ·»åŠ ä¸€äº›ä¸è¿‡æ¸¡ç›¸å…³çš„å­—æ®µï¼Œç„¶åé€šè¿‡ <code>&lt;router-view&gt;</code> çš„ä½œç”¨åŸŸæ’æ§½ <code>v-slot</code> æš´éœ²çš„å¯¹è±¡çš„å±æ€§ <code>route.meta</code> è·å–ï¼Œå¹¶åœ¨ <code>&lt;transition&gt;</code> ç»„ä»¶çš„å±æ€§ <code>name</code> ç»‘å®š</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/custom-transition&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> PanelLeft<span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{</span> transition<span class="token operator">:</span> <span class="token string">&#39;slide-left&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/other-transition&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> PanelRight<span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{</span> transition<span class="token operator">:</span> <span class="token string">&#39;slide-right&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ Component, route }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- ä½¿ç”¨ä»»ä½•è‡ªå®šä¹‰è¿‡æ¸¡å’Œå›é€€åˆ° `fade` --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>route.meta.transition || <span class="token punctuation">&#39;</span>fade<span class="token punctuation">&#39;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ä¹Ÿå¯ä»¥åŸºäºè·¯ç”±å±‚çº§å…³ç³»é‡‡ç”¨ä¸åŒçš„è¿‡æ¸¡æ•ˆæœ</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- ä½¿ç”¨åŠ¨æ€è¿‡æ¸¡åç§° --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">v-slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ Component, route }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>route.meta.transition<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ä½¿ç”¨å…¨å±€åç½®é’©å­ï¼Œæ ¹æ®è·¯å¾„çš„æ·±åº¦åŠ¨æ€æ·»åŠ ä¿¡æ¯åˆ° meta å­—æ®µ</span>
router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> toDepth <span class="token operator">=</span> to<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length
  <span class="token keyword">const</span> fromDepth <span class="token operator">=</span> from<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length
  to<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>transitionName <span class="token operator">=</span> toDepth <span class="token operator">&lt;</span> fromDepth <span class="token operator">?</span> <span class="token string">&#39;slide-right&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;slide-left&#39;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ğŸ’¡ å¦‚æœåŠ¨ç”»æ•ˆæœä¸ç”Ÿæ•ˆï¼Œä¸€èˆ¬æ˜¯ç”±äº Vue å¯¹<strong>ç»„ä»¶è¿›è¡Œå¤ç”¨</strong>ï¼Œå¯ä»¥å°† <code>$route</code> ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ <code>$route.path</code> æˆ– <code>$route.fullPath</code> ä½œä¸º <code>&lt;router-view&gt;</code> ç»„ä»¶çš„ <code>key</code> å±æ€§å€¼</p><h2 id="ç»„åˆå¼-api-1" tabindex="-1"><a class="header-anchor" href="#ç»„åˆå¼-api-1" aria-hidden="true">#</a> ç»„åˆå¼ API</h2><h3 id="è®¿é—®è·¯ç”±å’Œå½“å‰è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#è®¿é—®è·¯ç”±å’Œå½“å‰è·¯ç”±" aria-hidden="true">#</a> è®¿é—®è·¯ç”±å’Œå½“å‰è·¯ç”±</h3><p>ä½¿ç”¨ç»„åˆå¼ API å¼€å‘æ—¶ï¼Œåœ¨ç»„ä»¶çš„é€‰é¡¹ <code>setup</code> å‡½æ•°ä¸­æ— æ³•è®¿é—®ç»„ä»¶å®ä¾‹ <code>this</code>ï¼Œ<mark>å› æ­¤ Vue Router æä¾› <code>useRouter()</code> å‡½æ•°å’Œ <code>useRoute()</code> å‡½æ•°</mark>ï¼Œä»¥åˆ†åˆ«æ›¿ä»£ <code>this.$router</code> å’Œ <code>this.$route</code>ï¼Œè®¿é—®è·¯ç”±å®ä¾‹å’Œå½“å‰è·¯ç”±å¯¹è±¡</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRouter<span class="token punctuation">,</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">function</span> <span class="token function">pushWithQuery</span><span class="token punctuation">(</span><span class="token parameter">query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&#39;search&#39;</span><span class="token punctuation">,</span>
        query<span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token operator">...</span>route<span class="token punctuation">.</span>query<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ğŸ’¡ åœ¨æ¨¡æ¿ä¸­ä»ç„¶å¯ä»¥è®¿é—® <code>$router</code> å’Œ <code>$route</code>ï¼Œä¸éœ€è¦åœ¨ <code>setup</code> ä¸­è¿”å› <code>router</code> æˆ– <code>route</code>ã€‚</p><p>è·¯ç”±å¯¹è±¡æ˜¯ä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼Œæ‰€ä»¥å®ƒçš„ä»»ä½•å±æ€§éƒ½å¯ä»¥è¢«ç›‘å¬ï¼Œä½†åº”è¯¥<strong>é¿å…</strong>ç›‘å¬æ•´ä¸ª <code>route</code> å¯¹è±¡</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> userData <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// ç›‘å¬è·¯å¾„å‚æ•°ï¼Œæ›´æ”¹æ—¶è·å–ç”¨æˆ·ä¿¡æ¯</span>
    <span class="token function">watch</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> route<span class="token punctuation">.</span>params<span class="token punctuation">,</span>
      <span class="token keyword">async</span> <span class="token parameter">newParams</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        userData<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUser</span><span class="token punctuation">(</span>newParams<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="å¯¼èˆªå®ˆå«-1" tabindex="-1"><a class="header-anchor" href="#å¯¼èˆªå®ˆå«-1" aria-hidden="true">#</a> å¯¼èˆªå®ˆå«</h3><p>æ­¤å¤–ä¸ºäº†å¯ä»¥åœ¨ç»„åˆå¼ API ä¸­è®¾ç½®ç»„ä»¶å†…å®ˆå«ï¼Œ<mark>Vue Router å°†æ›´æ–°å®ˆå« <code>onBeforeTouteUpdata</code> å’Œç¦»å¼€å®ˆå« <code>onBeforeRouteLeave</code> ä½œä¸ºç»„åˆå¼ API å‡½æ•°å…¬å¼€</mark></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> onBeforeRouteLeave<span class="token punctuation">,</span> onBeforeRouteUpdate <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ä¸ beforeRouteLeave ç›¸åŒï¼Œä½†æ— æ³•è®¿é—® `this`</span>
    <span class="token function">onBeforeRouteLeave</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> answer <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">confirm</span><span class="token punctuation">(</span>
        <span class="token string">&#39;Do you really want to leave? you have unsaved changes!&#39;</span>
      <span class="token punctuation">)</span>
      <span class="token comment">// å–æ¶ˆå¯¼èˆªå¹¶åœç•™åœ¨åŒä¸€é¡µé¢ä¸Š</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>answer<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> userData <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// ä¸ onBeforeRouteUpdate ç›¸åŒï¼Œä½†æ— æ³•è®¿é—® `this`</span>
    <span class="token function">onBeforeRouteUpdate</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//ä»…å½“ id æ›´æ”¹æ—¶æ‰è·å–ç”¨æˆ·ï¼Œä¾‹å¦‚ä»… query æˆ– hash å€¼å·²æ›´æ”¹</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>to<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id <span class="token operator">!==</span> from<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userData<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchUser</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>ğŸ’¡ ç»„åˆå¼ API å®ˆå«ä¹Ÿå¯ä»¥ç”¨åœ¨ä»»ä½•ç”± <code>&lt;router-view&gt;</code> æ¸²æŸ“çš„ç»„ä»¶ä¸­ï¼Œå®ƒä»¬ä¸å¿…åƒç»„ä»¶å†…å®ˆå«é‚£æ ·ç›´æ¥ç”¨åœ¨è·¯ç”±ç»„ä»¶ä¸Šã€‚</p><h3 id="æ‰©å±•-routerlink" tabindex="-1"><a class="header-anchor" href="#æ‰©å±•-routerlink" aria-hidden="true">#</a> æ‰©å±• RouterLink</h3><p>Vue Router æä¾›çš„ç»„ä»¶ <code>&lt;router-link&gt;</code> é€šè¿‡<a href="https://next.router.vuejs.org/api/index.html#router-link-s-v-slot" target="_blank" rel="noopener noreferrer">ä½œç”¨åŸŸæ’æ§½ <code>v-slot</code> æä¾›äº†å¤§é‡çš„ API</a>ï¼ˆ<code>route</code>ã€<code>href</code>ã€<code>isActive</code>ã€<code>isExactActive</code>ã€<code>navigate</code>ï¼‰ï¼Œä½†æœªèƒ½æ¶µç›–æ‰€æœ‰çš„éœ€æ±‚ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå€ŸåŠ©ç»„åˆå¼ API <code>useLink</code> ï¼ˆRouterLink çš„å†…éƒ¨è¡Œä¸ºä½œä¸ºä¸€ä¸ªç»„åˆå¼ API å‡½æ•°å…¬å¼€ï¼‰æ¥æ‰©å±•å®šåˆ¶ä¸€ä¸ª <code>&lt;cutom-router-link&gt;</code> ç»„ä»¶</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> RouterLink<span class="token punctuation">,</span> useLink <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue-router&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;AppLink&#39;</span><span class="token punctuation">,</span>

  props<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¦‚æœä½¿ç”¨ TypeScriptï¼Œè¯·æ·»åŠ  @ts-ignore</span>
    <span class="token operator">...</span>RouterLink<span class="token punctuation">.</span>props<span class="token punctuation">,</span>
    inactiveClass<span class="token operator">:</span> String<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> route<span class="token punctuation">,</span> href<span class="token punctuation">,</span> isActive<span class="token punctuation">,</span> isExactActive<span class="token punctuation">,</span> navigate <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLink</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token comment">// æ·»åŠ  isExternalLink å±æ€§ï¼Œä»¥åˆ¤æ–­é“¾æ¥æ˜¯å¦æŒ‡å‘å¤–éƒ¨ï¼Œç»“åˆ CSS å¯ä»¥åœ¨é¡µé¢å®ç°å¤–éƒ¨é“¾æ¥å’Œå†…éƒ¨é“¾æ¥çš„çš„ä¸åŒæ ·å¼æ˜¾å¼</span>
    <span class="token keyword">const</span> isExternalLink <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">typeof</span> props<span class="token punctuation">.</span>to <span class="token operator">===</span> <span class="token string">&#39;string&#39;</span> <span class="token operator">&amp;&amp;</span> props<span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&#39;http&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span> isExternalLink<span class="token punctuation">,</span> href<span class="token punctuation">,</span> navigate<span class="token punctuation">,</span> isActive <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>ğŸ’¡ åœ¨å¤§å¤šæ•°ä¸­å‹åˆ°å¤§å‹åº”ç”¨ç¨‹åºä¸­ï¼Œå€¼å¾—åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ RouterLink ç»„ä»¶ï¼Œä»¥åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­é‡ç”¨å®ƒä»¬ï¼Œä¾‹å¦‚å¯¼èˆªèœå•ä¸­çš„é“¾æ¥ï¼Œæ·»åŠ å¤–éƒ¨é“¾æ¥æç¤ºå’Œ <code>inactive-class</code> ç­‰ï¼Œå…·ä½“ä¾‹å­å¯ä»¥å‚è€ƒ<a href="https://next.router.vuejs.org/zh/guide/advanced/extending-router-link.html" target="_blank" rel="noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h2 id="è·¯ç”±ç»„ä»¶ä¼ å‚" tabindex="-1"><a class="header-anchor" href="#è·¯ç”±ç»„ä»¶ä¼ å‚" aria-hidden="true">#</a> è·¯ç”±ç»„ä»¶ä¼ å‚</h2><p>ä»¥ props æ–¹å¼å°†è·¯ç”±ä¿¡æ¯ä¼ é€’ç»™ç»„ä»¶ï¼Œ<strong>å°†ç»„ä»¶ä¸è·¯ç”±è§£è€¦åˆ</strong>ï¼Œè®©ç»„ä»¶å¯ä»¥æ›´é€šç”¨ã€‚</p><p>ä¸ºäº†ç»„ä»¶æ›´é€šç”¨ï¼Œä¸åº”è¯¥åœ¨ç»„ä»¶çš„æ¨¡æ¿ä¸­ä½¿ç”¨ <code>$route</code> ç›´æ¥è¯»å–å½“å‰è·¯ç”±ä¿¡æ¯ï¼Œä½†æ˜¯ç»„ä»¶ä¸­åˆç¡®å®éœ€è¦ä½¿ç”¨è·¯ç”±ç›¸å…³çš„æ•°æ®æ—¶ï¼Œå¯ä»¥<strong>å°†è·¯ç”±ä¿¡æ¯ä½œä¸º props ä¼ é€’ç»™ç»„ä»¶ï¼Œè®°å¾—åœ¨ç»„ä»¶å†…è¦è®¾ç½®ç›¸åº”çš„ props æ¥æ”¶ä¼ è¿›æ¥çš„æ•°æ®</strong>ã€‚</p><p>æœ‰ä¸‰ç§æ–¹æ³•å°†è·¯ç”±ä¿¡æ¯ï¼ˆæˆ–å…¶ä»–æ•°æ®ï¼‰ä½œä¸º props ä¼ é€’ç»™ç»„ä»¶</p><ul><li>å¸ƒå°”æ¨¡å¼</li><li>å¯¹è±¡æ¨¡å¼</li><li>å‡½æ•°æ¨¡å¼</li></ul><h3 id="å¸ƒå°”æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å¸ƒå°”æ¨¡å¼" aria-hidden="true">#</a> å¸ƒå°”æ¨¡å¼</h3><p>åœ¨è®¾ç½®è·¯ç”±æ—¶ï¼Œå¦‚æœå°†é€‰é¡¹ <code>props</code> è®¾ç½®ä¸º <code>true</code>ï¼Œåˆ™åŠ¨æ€è·¯ç”±çš„<strong>è·¯å¾„å‚æ•° <code>route.params</code> å°†ä¼šè¢«è®¾ç½®ä¸ºç»„ä»¶ props å±æ€§</strong></p><p>âš ï¸ é€šè¿‡é€‰é¡¹ <code>props</code> ç®€å•åœ°å¼€å¯ä¼ å‚ï¼Œå¹¶ä¸èƒ½ä¼ é€’è·¯å¾„çš„å®Œæ•´ä¿¡æ¯ï¼Œå¦‚æŸ¥è¯¢å‚æ•° <code>route.query</code></p><p>ğŸ’¡ å¯¹äºåŒ…å«å¤šä¸ªç»„ä»¶çš„è·¯ç”±ï¼ˆå¯¹åº”å¤šä¸ªå‘½åè§†å›¾ï¼‰ï¼Œå¦‚æœå¸Œæœ›è¿™äº›ç»„ä»¶éƒ½ä¸è·¯ç”±è§£è€¦ï¼Œè€Œåœ¨ç»„ä»¶ä¸­è¿˜å¯ä»¥ä½¿ç”¨è·¯ç”±ç›¸å…³ä¿¡æ¯ï¼Œå¿…é¡»**åˆ†åˆ«ä¸ºæ¯ä¸ªå‘½åè§†å›¾ã€Œå¼€å¯ã€å±æ€§ <code>props</code> **</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ç»„ä»¶è®¾ç½® props æ¥æ”¶è·¯ç”±ä¼ é€’è¿›æ¥çš„æ•°æ®</span>
  props<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  template<span class="token operator">:</span> <span class="token string">&#39;&lt;div&gt;User {{ id }}&lt;/div&gt;&#39;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VueRouter</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&#39;/user/:id&#39;</span><span class="token punctuation">,</span>
      component<span class="token operator">:</span> User<span class="token punctuation">,</span>
      props<span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// å¯¹äºåŒ…å«å‘½åè§†å›¾çš„è·¯ç”±ï¼Œä½ å¿…é¡»åˆ†åˆ«ä¸ºæ¯ä¸ªå‘½åè§†å›¾æ·»åŠ  `props` é€‰é¡¹</span>
    <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">&#39;/user/:id&#39;</span><span class="token punctuation">,</span>
      components<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">default</span><span class="token operator">:</span> User<span class="token punctuation">,</span>
        sidebar<span class="token operator">:</span> Sidebar
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      props<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        sidebar<span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="å¯¹è±¡æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å¯¹è±¡æ¨¡å¼" aria-hidden="true">#</a> å¯¹è±¡æ¨¡å¼</h3><p>åœ¨è®¾ç½®è·¯ç”±æ—¶ï¼Œå¦‚æœå°†é€‰é¡¹ <code>props</code> è®¾ç½®ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä¼šè¢«ä½œä¸º<strong>é™æ€å€¼</strong>ï¼ŒæŒ‰åŸæ ·ä¼ é€’ç»™ç»„ä»¶ã€‚</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è·¯ç”±è®¾ç½®</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/promotion/from-newsletter&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> Promotion<span class="token punctuation">,</span>
    <span class="token comment">// å¯¹è±¡æ¨¡å¼</span>
    props<span class="token operator">:</span> <span class="token punctuation">{</span> newsletterPopup<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="å‡½æ•°æ¨¡å¼" tabindex="-1"><a class="header-anchor" href="#å‡½æ•°æ¨¡å¼" aria-hidden="true">#</a> å‡½æ•°æ¨¡å¼</h3><p>åœ¨è®¾ç½®è·¯ç”±æ—¶ï¼Œå¦‚æœå°†é€‰é¡¹ <code>props</code> è®¾ç½®ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œåˆ™<strong>ä¼ é€’ç»™ç»„ä»¶çš„æ•°æ®å°±æ˜¯å‡½æ•°çš„è¿”å›å€¼</strong>ã€‚è¯¥å‡½æ•°å¯ä»¥æ¥æ”¶è·¯ç”±å¯¹è±¡ <code>route</code> ä½œä¸ºå‚æ•°ï¼Œè¿™æ ·å°±å¯ä»¥<strong>è·å–ç›¸åº”è·¯ç”±çš„æ•°æ®</strong></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// è·¯ç”±è®¾ç½®</span>
<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">&#39;/search&#39;</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> SearchUser<span class="token punctuation">,</span>
    <span class="token function-variable function">props</span><span class="token operator">:</span> <span class="token parameter">route</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> query<span class="token operator">:</span> route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>q <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä»¥ä¸Šç¤ºä¾‹åœ¨ç”¨æˆ·è®¿é—®è·¯ç”± <code>/search?q=ben</code> æ—¶ï¼Œåˆ™ç›¸å…³çš„æ•°æ®å°±ä¼šä¼ é€’ç»™ç»„ä»¶ <code>SearchUser</code> ï¼Œè¯¥ç»„ä»¶è·å¾—çš„ prop å°±æ˜¯ <code>{query: &#39;ben&#39;}</code>ï¼Œå› æ­¤åœ¨ç»„ä»¶ä¸­éœ€è¦å…ˆé¢„è®¾ prop <code>query</code> ä»¥æ¥æ”¶æ•°æ®ã€‚</p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">æ›´æ–°æ—¶é—´: </span><span class="meta-item-info">2021/12/11 ä¸‹åˆ2:15:08</span></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><div style="width:0px;" class="catalog-container absolute top-0 right-0 h-full hidden lg:block"><div class="headings-container sticky top-36" data-v-c28348e0><ul class="max-w-max m-2 pl-7 xl:pl-16 2xl:pl-20 py-4 opacity-50 hover:opacity-100 transition-all duration-300" data-v-c28348e0><!--[--><!--]--></ul></div></div><div style="display:none;" tabindex="0" class="sidebar-container fixed inset-y-0 left-0 z-20 lg:hidden opacity-10 hover:opacity-95"><div class="headings-container px-2 space-y-2 transition-all duration-300 py-20" data-v-6eed9461><!--[--><!--]--></div></div></div><footer class="bg-gray-200 p-8 grid grid-cols-1 md:grid-cols-3 gap-4 items-center"><div class="flex justify-center md:justify-start items-center"><a class="p-2 hover:bg-gray-300 rounded-md" href="https://benbinbin.github.io/" target="_blank"><img src="/blog-web/images/avatar.png" alt="avatar" class="w-10 h-10 rounded-full"></a></div><div class="text-center space-y-0.5"><p class="text-sm text-gray-600"> Â©2021 <span class="author">Benbinbin</span>. All Right Reserved. </p><p class="text-xs text-center text-gray-400"> é™¤ç‰¹æ®Šè¯´æ˜å¤–ï¼Œæœ¬ç«™çš„æ–‡ç« éµå¾ª <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" target="_blank" class="text-blue-400">CC-BY-SA-4.0</a> åè®® </p><p class="text-xs text-center text-gray-400"> ç½‘ç«™ä¸»é¢˜é‡‡ç”¨ <a href="https://github.com/Benbinbin/two-dishes-one-fish" target="_blank" class="text-blue-400">Two Dishes One Fish</a></p></div><div class="btn-container flex justify-center md:justify-end items-center space-x-0.5"><!--[--><a class="p-2 hover:bg-gray-300 rounded-md" href="mailto:benthomsonbin@gmail.com" target=""><img src="/blog-web/images/icons/email.svg" alt="email" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://github.com/Benbinbin" target="_blank"><img src="/blog-web/images/icons/github.svg" alt="github" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://juejin.cn/user/3175045314389278/posts" target="_blank"><img src="/blog-web/images/icons/juejin.svg" alt="juejin" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://dribbble.com/BinBinDesign" target="_blank"><img src="/blog-web/images/icons/dribbble.svg" alt="dribbble" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://twitter.com/Benbinbin_fun" target="_blank"><img src="/blog-web/images/icons/twitter.svg" alt="twitter" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://weibo.com/binbindesign" target="_blank"><img src="/blog-web/images/icons/weibo.svg" alt="weibo" class="w-auto h-6"></a><!--]--></div></footer></div><!--]--></div>
    <script type="module" src="/blog-web/assets/app.43fe0c63.js" defer></script>
  </body>
</html>

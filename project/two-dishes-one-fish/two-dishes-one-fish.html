<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/blog-web/images/favicon.ico"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.css"><title>一鱼两吃 | Blog</title><meta name="description" content="A blog and knowledge management system about web.">
    <link rel="modulepreload" href="/blog-web/assets/app.43fe0c63.js"><link rel="modulepreload" href="/blog-web/assets/two-dishes-one-fish.html.55323e9f.js"><link rel="modulepreload" href="/blog-web/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/blog-web/assets/two-dishes-one-fish.html.e86fff46.js">
    <link rel="stylesheet" href="/blog-web/assets/style.b42fd117.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="min-h-screen flex flex-col"><nav class="px-4 sm:px-8 py-2 flex justify-between items-center sticky top-0 z-30 bg-white"><div class="left flex items-center space-x-0.5"><!--[--><button class="text-gray-400 hover:bg-gray-100 catelog-btn p-2 select-none text-sm font-bold hover:text-gray-900 rounded-md lg:hidden"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></svg></button><!--]--><a class="avatar p-2 hover:bg-gray-100 rounded-md" href="/blog-web/#"><img src="/blog-web/images/avatar.png" alt="avatar" class="w-10 h-10 rounded-full"></a></div><div class="right hidden sm:flex items-center space-x-0.5"><!--[--><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">All</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Network</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Frontend</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Backend</button><button class="text-gray-400 p-2 select-none text-sm font-bold hover:text-gray-900 hover:bg-gray-100 rounded-md">Project</button><!--]--><!--[--><button class="text-gray-900 bg-gray-100 hover:bg-gray-200 p-2 select-none text-sm font-bold hover:text-gray-900 rounded-md hidden lg:block"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"></path></svg></button><!--]--></div><div class="more-container sm:hidden relative"><button style="" class="p-2 select-none hover:bg-gray-100 rounded-md text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"></path></svg></button><button style="display:none;" class="p-2 select-none hover:bg-gray-100 rounded-md text-red-400 hover:text-red-500"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="currentColor" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path></svg></button><div style="display:none;" class="more-modal p-2 absolute top-10 right-0 z-10 flex flex-col space-y-2 bg-gray-100 rounded-md opacity-90"><!--[--><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">All</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Network</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Frontend</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Backend</button><button class="text-gray-400 px-4 py-2 select-none text-sm text-center font-bold hover:text-gray-900 hover:bg-gray-200 rounded-md">Project</button><!--]--></div></div></nav><div class="relative flex-grow"><div class="theme-container no-navbar no-sidebar"><!--[--><!----><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><!----><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="一鱼两吃" tabindex="-1"><a class="header-anchor" href="#一鱼两吃" aria-hidden="true">#</a> 一鱼两吃</h1><p><img src="/blog-web/assets/logo.60957df2.png" alt="logo"></p><p>部落格和学习笔记管理体系搭建记录</p><p>🔗 <a href="/blog-web/project/two-dishes-one-fish/two-dishes-one-fish-en.html" class="">English Version</a></p><p>「一鱼两吃」是一道很「聪明」的菜品，利用一条鱼的不同部位做出两味，甚至多味菜。我由此获得启发，基于相同的一堆 Markdown 文件作为数据源，搭建一个静态网站，既可以是部落格也可以作为学习笔记管理系统，达到类似「一鱼两吃」的效果。</p><p>由于文章主要是文本，而且网站的交互需求不高，所以选择使用<a href="https://en.wikipedia.org/wiki/Static_web_page" target="_blank" rel="noopener noreferrer">静态网页</a>。现在有很多基于 Markdown 文档生成静态网页的<a href="https://vuepress2.netlify.app/zh/guide/#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E6%98%AF" target="_blank" rel="noopener noreferrer">工具</a>，基于我目前掌握的技能和需求选择以 <a href="https://vuepress2.netlify.app/zh/" target="_blank" rel="noopener noreferrer">VuePress</a> 作为静态网站生成器。</p><p>VuePress 已经内置了默认主题只需要进行<a href="https://v2.vuepress.vuejs.org/reference/default-theme/config.html" target="_blank" rel="noopener noreferrer">简单的参数配置</a>就可以做到开箱即用。我的主要工作是基于默认模板进行拓展，优化在检索、浏览文章和笔记时有更好的体验：</p><ul><li>虽然部落格文章和学习笔记都是以 Markdown 文档为单位，但部落格是面向读者的，一般文章具较完整的前后文内容；而学习笔记则是面向自己，内容较为零碎。所以不能靠一套 UI 来实现两种需求，因此我以主页为统一入口，做了<strong>两套文章分类导航页面</strong>。Markdown 文档可以通过标记的方式分成两种类型，一种是作为部落格文章和学习笔记，另一种是只作为学习笔记。</li><li>添加了部落格文章导航页，有三种方式浏览文章：Grid 网格布局、Masonry 瀑布流式布局、List 列表布局。</li><li>添加了学习笔记导航页，所有的 Markdown 文件都会作为学习笔记展示，可以通过网格嵌套布局来浏览，这些笔记的层级关系和它们在文件存储系统一致，而且通过 <a href="https://d3js.org/" target="_blank" rel="noopener noreferrer">D3.js</a> 对这些笔记文件数据进行可视化构建出树图，方便快速浏览。</li><li>支持给 Markdown 文档加标签，在导航页中可以基于标签对文章进行筛选。</li><li>遵循 RWD 响应式网页设计原则，可以在不同尺寸的屏幕浏览网页。</li></ul><p>⚠️ 这也是作为我学习 Vue3 的一个练手小项目，所以使用的 VuePress 是 V2 版本（也称作 VuePress-next），该版本仍处于不稳定的 <strong>Beta</strong> 状态（后期可能会出现不兼容的版本更新），因此如果你需要将它应用到日常正式的开发中需要谨慎考量。根据 VuePress-next 的<a href="https://github.com/vuepress/vuepress-next/discussions/68" target="_blank" rel="noopener noreferrer">开发计划</a> <strong>Stable</strong> 版本可能会<a href="https://github.com/vuepress/vuepress-next/discussions/68#discussioncomment-782395" target="_blank" rel="noopener noreferrer">在 2021 年 Q2 末推出</a>。由于是练手项目，项目可能有不少 Bugs 导致编译不成功，但静态网站是基于 Markdown 文件构建的，所以<strong>只要保存好 <code>.md</code> 后缀的文档和相关图片等静态资源，数据是不会丢失的，也可以将文档迁移到别处</strong>，使用其他支持 Markdown 文件的笔记软件管理知识体系或静态网站生成器构建博客。</p><h2 id="设计理念" tabindex="-1"><a class="header-anchor" href="#设计理念" aria-hidden="true">#</a> 设计理念</h2><h3 id="工作流程" tabindex="-1"><a class="header-anchor" href="#工作流程" aria-hidden="true">#</a> 工作流程</h3><ul><li>以 Markdown 文件为单位，在本地进行写作、记笔记</li><li>以 VuePress 为引擎，基于 Markdown 生成网页</li><li>通过 Git 进行版本控管，与 Github <a href="https://github.com/Benbinbin/tech-blog" target="_blank" rel="noopener noreferrer">远端仓库</a>同步，并以 <a href="https://benbinbin.github.io/tech-blog/" target="_blank" rel="noopener noreferrer">Github Page</a> 作为网页的托管。</li></ul><p><img src="/blog-web/assets/working-flow.c2ecd056.png" alt="working flow"></p><h3 id="首页" tabindex="-1"><a class="header-anchor" href="#首页" aria-hidden="true">#</a> 首页</h3><p><strong>首页</strong>的卡片按主题进行区分，作为部落格文章导航页和笔记导航页的统一入口：</p><ul><li><strong>直接点击</strong>相应的卡片，可以进入<strong>部落格文章导航页</strong>，其中 URL 路径格式是 <code>/postslist/相应主题</code></li><li><strong>按住 <code>Shift+Ctrl</code> 再点击</strong>相应的卡片，可以进入<strong>笔记导航页</strong>，其中 URL 路径格式是 <code>/folderslist/相应主题</code></li></ul><p>💡 如果触动设备无法配合键盘点击卡片进入笔记导航页，可以先进入相应的部落格文章导航页，再手动更改浏览器地址栏的 URL，将路径中的 <code>postslist</code> 更改为 <code>folderslist</code></p><p><img src="/blog-web/assets/home-to-navigator-page.8ec24393.png" alt="Home"></p><h3 id="部落格文章导航页" tabindex="-1"><a class="header-anchor" href="#部落格文章导航页" aria-hidden="true">#</a> 部落格文章导航页</h3><p><strong>部落格文章导航页</strong>提供 3 种布局，便于浏览和快速检索文章：</p><ul><li>网格布局 Grid：规则的网格布局，卡片可能包含文章概述</li><li>瀑布流式布局 Masonry：与网格布局相比更紧凑些</li><li>列表布局 List：只包括必要的文章信息，不显示文章的概述</li></ul><p>文章可以按照创建日期（默认）或更新日期 <code>Updated</code> ，进行降序 <code>Descend</code>（默认）或升序 <code>Ascend</code> 方式<strong>排序</strong>。</p><p>在顶部的导航栏可以点击主题浏览相关的文章，此外还支持基于标签 <code>#tag</code> 对文章进行<strong>筛选</strong>。</p><p>💡 点击顶部的导航栏按钮可以切换到相应的主题，如果按住 <code>Shift+Ctrl</code> 再点击按钮，则可以直接进入相应主题的<strong>笔记导航页</strong>。</p><p><img src="/blog-web/assets/postlist-layout.c8fac6b4.png" alt="postlist layout"></p><h3 id="笔记导航页" tabindex="-1"><a class="header-anchor" href="#笔记导航页" aria-hidden="true">#</a> 笔记导航页</h3><p><strong>笔记导航页</strong>提供 2 种布局，基于熟悉的文件夹嵌套的层级关系来检索大量琐碎笔记：</p><ul><li>网格布局 Grid：以网格布局展示「当前文件夹」中包含的文件和子文件夹，为了方便子文件夹也展示了（下钻一级）其中的文件</li><li>树状布局 Tree：以树图的形式展示「当前文件夹」及其下钻两级的文件夹包含的文件和子文件夹，支持展开和收起文件夹操作</li></ul><p>在网格布局下支持基于标签 <code>#tag</code> 对「当前文件夹」中的文章进行<strong>高亮</strong>，还提供面板屑 breadcrumb 导航栏，便于从深层嵌套的文件夹快速返回到其上游的文件夹。</p><p>在树状布局下支持对树图进行缩放平移操作，提供 <code>Resize</code> 按钮对树图一键复位。</p><p><img src="/blog-web/assets/folder-layout.a428160d.png" alt="folder layout"></p><h3 id="系列文章" tabindex="-1"><a class="header-anchor" href="#系列文章" aria-hidden="true">#</a> 系列文章</h3><p>除了通过以上展示的各种布局浏览检索文章，还可以基于当前文章查看其所属系列的相关文章。如果一篇文章属于一个系列，则会出现一个集合 <code>Collection</code> 按钮，点击后会弹出一个 modal 展示同属一个系列的所有文章。</p><p><img src="/blog-web/assets/collection.eb56941c.png" alt="collection"></p><h3 id="文章目录" tabindex="-1"><a class="header-anchor" href="#文章目录" aria-hidden="true">#</a> 文章目录</h3><p>在文章内部基于标题生成目录，方便了解文章的纲要和快速定位到所需段落。</p><p><img src="/blog-web/assets/catalog.4f9ab510.png" alt="catalog"></p><h2 id="使用指南" tabindex="-1"><a class="header-anchor" href="#使用指南" aria-hidden="true">#</a> 使用指南</h2><h3 id="搭建本地工作环境" tabindex="-1"><a class="header-anchor" href="#搭建本地工作环境" aria-hidden="true">#</a> 搭建本地工作环境</h3><ol><li><p>安装写作和开发软件：</p><ul><li><a href="https://git-scm.com/downloads" target="_blank" rel="noopener noreferrer">Git</a>：版本控管软件</li><li><a href="https://nodejs.org/zh-cn/download/" target="_blank" rel="noopener noreferrer">node.js</a>：开发依赖 💡 更推荐使用 <a href="https://github.com/nvm-sh/nvm#installing-and-updating" target="_blank" rel="noopener noreferrer">nvm</a> 安装和管理 node.js，它是 node.js 版本管理器。在 macOS 和 Linux 系统中<a href="https://github.com/nvm-sh/nvm#install--update-script" target="_blank" rel="noopener noreferrer">使用命令行进行安装</a>；如果是 Windows 系统可以安装 <a href="https://github.com/coreybutler/nvm-windows#installation--upgrades" target="_blank" rel="noopener noreferrer">nvm-windows</a>。</li><li><a href="https://typora.io/" target="_blank" rel="noopener noreferrer">Typora</a>：一款开源免费的 Markdown 编辑器，用于写作</li><li><a href="https://code.visualstudio.com/Download" target="_blank" rel="noopener noreferrer">VS Code</a>：微软推出的代码编辑器，用于开发</li></ul></li><li><p>下载 VuePress 模板 two-dishes-one-fish，有两种方法：</p><ul><li><p>方法一：在终端通过输入命令并按回车键 <code>Enter</code> 下载</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/Benbinbin/two-dishes-one-fish.git
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li><li><p>方法二：在 <a href="https://github.com/Benbinbin/two-dishes-one-fish" target="_blank" rel="noopener noreferrer">Github 仓库</a>下载代码压缩包</p></li></ul><p><img src="/blog-web/assets/download-template.a52e1797.png" alt="download code zip"></p></li><li><p>安装 VuePress 依赖：</p><ul><li><p>使用 VS Code 代码编辑器打开项目文件夹 📁 <code>two-dishes-one-fish</code></p></li><li><p>点击（菜单栏）<code>查看(V)</code> -&gt; <code>终端</code> 打开终端（或使用快捷键 <code>Ctrl+`</code> 打开终端）</p></li><li><p>在终端输入以下命令并按回车键，安装项目依赖的包</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>💡 如果安装较慢或失败，可以用这条命令替代（使用淘宝提供的资源加速安装） <code>npm install --registry https://registry.npm.taobao.org</code></p></li></ul></li></ol><h3 id="项目结构" tabindex="-1"><a class="header-anchor" href="#项目结构" aria-hidden="true">#</a> 项目结构</h3><p>完成以上步骤后，就获得了一个完整的项目结构：</p><ul><li>📁 <code>two-dishes-one-fish</code>：项目的根文件夹（可进行重命名，不影响后续操作），其中包含项目的相关配置文件，还有一个文件夹 📁 <code>docs</code></li><li>📁 <code>docs</code>：该文件夹中的 Markdown 文件（文件后缀为 <code>.md</code>）会自动编译为网页文件，如图中标注文件夹 📁 <code>folder1</code> 和 📁 <code>folder2</code> 里就存放了文章示例</li><li>📁 <code>.vuepress</code>：该文件夹在 📁 <code>docs</code> 中，但是它不是存放写作文章，而是存放 VuePress 相关的配置文件</li><li>📁 <code>public</code>：该文件夹在 📁 <code>.vuepress</code> 中，它是用于存放一些静态资源 <ul><li>在导航栏和页尾使用的头像图片 <code>avatar.png</code></li><li>在浏览器标签栏显示的图标 <code>favicon.ico</code></li><li>首页的每个卡片的背景图存放在子文件夹 📁 <code>images/home</code> 中</li><li>部落格文章导航页的一些文章卡片的配图存放在子文件夹 📁 <code>images/covers</code> 中</li><li>网页中使用到的图标（如页尾的一些社交媒体图标）存放在子文件夹 📁 <code>images/icons</code> 中</li></ul></li></ul><p><img src="/blog-web/assets/project-structure.fa5461f0.png" alt="project structure"></p><p>一般只需要对文档 📄 <code>config.js</code> 进行一次修改，然后日常就可以在文件夹 📁 <code>docs</code> 中通过创建 Markdown 文件进行写作：</p><ul><li>📄 <code>config.js</code>：在文件夹 📁 <code>.vuepress</code> 下的文档，它是用于配置网站大部分参数</li><li>📁 <code>folder1</code> 和 📁 <code>folder2</code>：在文件夹 📁 <code>docs</code> 下用于存放示例文章的，可以重命名或创建更多的文件夹，也允许创建嵌套文件夹结构，在它们中创建的每一个 Markdown 文件会相应生成一篇文章</li></ul><p>💡 如果要添加首页的主题卡片的背景图，以及部落格文章导航页中一些文章的配图，还有页尾社交媒体图标，记得将这些图片/图标资源放置在文件夹 📁 <code>public</code> 的相应子文件夹中。</p><h3 id="参数设置" tabindex="-1"><a class="header-anchor" href="#参数设置" aria-hidden="true">#</a> 参数设置</h3><p>使用 VS Code 代码编辑器打开文件夹 📁 <code>.vuepress</code> 下的文档 📄 <code>config.js</code> 以对网页参数进行配置（根据 <code>// 中文注释</code> 进行修改）</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> path <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@vuepress/utils&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  open<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  lang<span class="token operator">:</span> <span class="token string">&#39;zh-CN&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// 属性 base 的值 &quot;repo&quot; 是指需要部署到你的 Github 上的仓库名称</span>
  <span class="token comment">// 例如我将网站部署到路径为 https://github.com/Benbinbin/Collection 这个仓库中，那么我的 Github 用户名是 Benbinbin，部署仓库名是 Collection，则属性 base 的值就应该是 &quot;/Collection/&quot;</span>
  <span class="token comment">// 如果部署到 https://github.com/username/username.github.io 这个特殊的 Github 仓库（其中 username 是指你的 Github 用户名），则属性 base 的值应该是 &quot;/&quot;（也可以不设置，因为该属性的默认值为 &quot;/&quot;）</span>
  base<span class="token operator">:</span> <span class="token string">&quot;/repo/&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 属性 title 是站点的标题，会作为所有页面的标题后缀，即显示在浏览器标签页上</span>
  title<span class="token operator">:</span> <span class="token string">&quot;Blog&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// 属性 description 是站点的描述，便于搜索引擎进行识别</span>
  description<span class="token operator">:</span> <span class="token string">&#39;A blog shows some of the notes I took while learning skills.&#39;</span><span class="token punctuation">,</span>
  head<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 以下用于设置网站的图标，即显示在浏览器标签栏左侧的图标</span>
    <span class="token comment">// 下面的 repo 要设置为仓库名，例如我将网站部署到路径为 https://github.com/Benbinbin/Collection 这个仓库中，则属性 href 的值为 &#39;/Collection/images/favicon.ico&#39;</span>
   	<span class="token comment">// 如果要将网站部署在 https://github.com/username/username.github.io 这个特殊的 Github 仓库，则属性 href 的值为 &#39;/images/favicon.ico&#39;</span>
    <span class="token comment">// 模板已内置了图标文件，如果需要修改请见新的图标文件 favicon.ico 放在静态资源文件夹 public 中，覆盖原来的图标文件</span>
    <span class="token punctuation">[</span><span class="token string">&#39;link&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> rel<span class="token operator">:</span> <span class="token string">&#39;icon&#39;</span><span class="token punctuation">,</span> href<span class="token operator">:</span> <span class="token string">&#39;/repo/images/favicon.ico&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token string">&#39;link&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> rel<span class="token operator">:</span> <span class="token string">&#39;stylesheet&#39;</span><span class="token punctuation">,</span> href<span class="token operator">:</span> <span class="token string">&#39;https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.css&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  bundler<span class="token operator">:</span> <span class="token string">&#39;@vuepress/vite&#39;</span><span class="token punctuation">,</span>
  bundlerConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
    viteOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      css<span class="token operator">:</span> <span class="token punctuation">{</span>
        postcss<span class="token operator">:</span> <span class="token punctuation">{</span>
            plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;tailwindcss&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;autoprefixer&#39;</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./plugins/addTime.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./plugins/createHomePage.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 属性 cards 是用于设置首页主题卡片</span>
      <span class="token comment">// 它的值是一个数组，其中每一个元素对应的是一个主题，也就文件夹 docs 中包含的下一级子文件夹。</span>
      <span class="token comment">// 每一个元素都有两个属性 name 和 image，分别表示卡片主题名称（和文件夹名称相同），和卡片背景图片文件</span>
      <span class="token comment">// 例如模板中就有文件夹 folder1 和 folder2，卡片背景图片分别是 folder1-cover.svg 和 folder2-cover.svg</span>
      <span class="token comment">// 记得将卡片背景图文件放在静态资源文件夹 public 的子文件夹 images/home 中</span>
      cards<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&quot;Folder1&quot;</span><span class="token punctuation">,</span>
          image<span class="token operator">:</span> <span class="token string">&quot;folder1-cover.svg&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&quot;Folder2&quot;</span><span class="token punctuation">,</span>
          image<span class="token operator">:</span> <span class="token string">&quot;folder2-cover.svg&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./plugins/generateListPages.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 属性 postClassification 是指部落格文章的主题，用于部落格文章导航页</span>
      <span class="token comment">// 它的值是一个数组，其中每一个元素对应的是一个主题，也就是文件夹 docs 中所包含的下一级子文件夹</span>
      <span class="token comment">// 例如模板中就有文件夹 folder1 和 folder2，这些文件夹中就是用户写作生成的许多 markdown 文件</span>
      postClassifications<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;folder1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;folder2&#39;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./plugins/generateFolderPages.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// 属性 postFolders 是指笔记的主题，它类似于属性 postClassification，一般两个属性的值是一样的，因为共用一个文件系统（一鱼两吃）</span>
      <span class="token comment">// 它的值是一个数组，其中每一个元素对应的是一个主题，也就是文件夹 docs 中所包含的子文件夹</span>
      <span class="token comment">// 例如刚下载的模板中就就有文件夹 folder1 和 folder2，这些文件夹中就是包含了许多 markdown 文件</span>
      postFolders<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;folder1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;folder2&#39;</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  theme<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./theme/index.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  themeConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
    navbar<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    sidebar<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    contributors<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    lastUpdatedText<span class="token operator">:</span> <span class="token string">&#39;更新时间&#39;</span><span class="token punctuation">,</span>
    themePlugins<span class="token operator">:</span> <span class="token punctuation">{</span>
      backToTop<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      nprogress<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  markdown<span class="token operator">:</span> <span class="token punctuation">{</span>
    links<span class="token operator">:</span> <span class="token punctuation">{</span>
      externalIcon<span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">extendsMarkdown</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">md</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    md<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@neilsustc/markdown-it-katex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>output<span class="token operator">:</span> <span class="token string">&#39;html&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 属性 define 中的有不少属性和前面设置相关，这是为了开发方便设置的全局变量，请对照着进行修改</span>
  define<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 属性 _<wbr>_BASE__ 和前面的属性 base 一致，如果是部署到 https://github.com/username/username.github.io 这个特殊的 Github 仓库，该属性值请设置为 &quot;/&quot;（不可省略）</span>
    _<wbr>_BASE__<span class="token operator">:</span> <span class="token string">&quot;/repo/&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 属性 _<wbr>_HOME_PAGE_TITLE__ 的值是指首页的标题</span>
    _<wbr>_HOME_PAGE_TITLE__<span class="token operator">:</span> <span class="token string">&quot;Blog&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 属性 _<wbr>_HOME_PAGE_ICON__ 的值是指首页的标题和下方分割线中的图标文件，记得将图标文件放置在静态资源文件 public 的子文件夹 images/home 中</span>
    _<wbr>_HOME_PAGE_ICON__<span class="token operator">:</span> <span class="token string">&quot;home_icon.svg&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 属性 _<wbr>_HOME_DESCRIPTION__ 的值是指首页的标题下方的描述，支持纯文本和 HTML</span>
    _<wbr>_HOME_DESCRIPTION__<span class="token operator">:</span> <span class="token string">&quot;我是 Ben，这是我的部落格和知识管理系统。&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 属性 _<wbr>_HOME_PAGE_COLOR__ 的值是指首页的颜色</span>
    _<wbr>_HOME_PAGE_COLOR__<span class="token operator">:</span> <span class="token string">&#39;#9CA3AF&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 属性 _<wbr>_AVATAR__ 的值是指展示在导航栏和页尾的头像的图像文件名称，请记得将这个图像文件放在静态资源文件夹 public 中</span>
    _<wbr>_AVATAR__<span class="token operator">:</span> <span class="token string">&#39;avatar.png&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 属性 _<wbr>_CLASSIFICATIONS__ 用于生成部落格文章导航页的顶部导航栏</span>
    <span class="token comment">// 它的值是一个数组，和前面的属性 postClassifications 类似，但是在添加一个元素 &#39;All&#39;，这样可以添加一个导航页面显示所有部落格文章</span>
    _<wbr>_CLASSIFICATIONS__<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;All&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Folder1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Folder2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 属性 _<wbr>_FOLDERS__ 用于生成笔记导航页的顶部导航栏</span>
    <span class="token comment">// 它的值是一个数组，和前面的属性 postFolders 类似</span>
    _<wbr>_FOLDERS__<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;Folder1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Folder2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 属性 _<wbr>_FOOTER_AVATAR_LINK__ 的值是指页尾的头像点击后跳转的链接，可以设置为自己 portfolio 页面</span>
    _<wbr>_FOOTER_AVATAR_LINK__<span class="token operator">:</span> <span class="token string">&#39;https://www.google.com/&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 属性 _<wbr>_AUTHOR__ 的值是指页尾标注的该网站文章作品的许可权利所属者</span>
    _<wbr>_AUTHOR__<span class="token operator">:</span> <span class="token string">&#39;Benbinbin&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 属性 _<wbr>_FOOTER_LICENSE__ 的值是指页尾标注的该网站文章遵循的许可协议，默认遵循 CC-BY-SA-4.0 署名-相同方式共享 4.0 国际 方式进行共享</span>
    _<wbr>_FOOTER_LICENSE__<span class="token operator">:</span> <span class="token string">&#39;CC-BY-SA-4.0&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 属性 _<wbr>_FOOTER_LICENSE_LINK__ 的值是指页尾标注的该网站文章准许的许可协议具体内容的链接</span>
    _<wbr>_FOOTER_LICENSE_LINK__<span class="token operator">:</span> <span class="token string">&#39;https://creativecommons.org/licenses/by-sa/4.0/deed.en&#39;</span><span class="token punctuation">,</span>
    <span class="token comment">// 属性 _<wbr>_SOCIAL_MEDIA__ 用于生成页尾社交媒体图标</span>
    <span class="token comment">// 它的值是一个数组，每一个元素都是一个社交媒体账号相关信息，你可以根据进行需要增删</span>
    <span class="token comment">// 每一个元素都包含 3 个属性：</span>
    <span class="token comment">// 属性 name 表示社交媒体的名称，它值应该是唯一且不重复的</span>
    <span class="token comment">// 属性 logo 是指显示在页尾的图标的文件，请记得将这个图标文件放在静态资源文件夹 public 的子文件夹 images/icons 中，当前已预设了 6 种社交媒体图标</span>
    <span class="token comment">// 属性 url 是指社交媒体的链接，以用点击图标进行访问</span>
    <span class="token comment">// 如果社交媒体是邮件账号，则属性 url 格式是 mailto: 作为前缀，再接着写邮箱地址</span>
    _<wbr>_SOCIAL_MEDIA__<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&#39;email&#39;</span><span class="token punctuation">,</span>
        logo<span class="token operator">:</span> <span class="token string">&#39;email.svg&#39;</span><span class="token punctuation">,</span>
        url<span class="token operator">:</span> <span class="token string">&#39;mailto:[example]@gmail.com&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&#39;github&#39;</span><span class="token punctuation">,</span>
        logo<span class="token operator">:</span> <span class="token string">&#39;github.svg&#39;</span><span class="token punctuation">,</span>
        url<span class="token operator">:</span> <span class="token string">&#39;https://github.com/[username]&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&#39;juejin&#39;</span><span class="token punctuation">,</span>
        logo<span class="token operator">:</span> <span class="token string">&#39;juejin.svg&#39;</span><span class="token punctuation">,</span>
        url<span class="token operator">:</span> <span class="token string">&#39;https://juejin.cn/user/[userid]/posts&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&#39;dribbble&#39;</span><span class="token punctuation">,</span>
        logo<span class="token operator">:</span> <span class="token string">&#39;dribbble.svg&#39;</span><span class="token punctuation">,</span>
        url<span class="token operator">:</span> <span class="token string">&#39;https://dribbble.com/[username]&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&#39;twitter&#39;</span><span class="token punctuation">,</span>
        logo<span class="token operator">:</span> <span class="token string">&#39;twitter.svg&#39;</span><span class="token punctuation">,</span>
        url<span class="token operator">:</span> <span class="token string">&#39;https://twitter.com/[username]&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">&#39;weibo&#39;</span><span class="token punctuation">,</span>
        logo<span class="token operator">:</span> <span class="token string">&#39;weibo.svg&#39;</span><span class="token punctuation">,</span>
        url<span class="token operator">:</span> <span class="token string">&#39;https://weibo.com/[username]&#39;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br></div></div><p>💡 除了上述中文注释标注的修改以外，由于该模板基于 VuePress-next 的默认主题进行修改，因此<a href="https://vuepress2.netlify.app/zh/reference/default-theme/config.html" target="_blank" rel="noopener noreferrer">默认主题的其他配置</a>也同样适用。</p><p>💡 如果需要进行深度定制，对其他文档进行修改，可以参考 VuePress-next 的<a href="https://vuepress2.netlify.app/zh/" target="_blank" rel="noopener noreferrer">官方文档</a>和本文的<a href="#%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97">开发日志</a>部分。</p><h3 id="写作创作" tabindex="-1"><a class="header-anchor" href="#写作创作" aria-hidden="true">#</a> 写作创作</h3><p>在文件夹 📁 <code>docs</code> 下依照主题创建文件夹（允许创建嵌套文件夹结构，方便进行文章的分类管理），在这些文件夹内创建 Markdown 文件，然后使用 Typora 进行写作创作了。</p><p>每一个后缀为 <code>.md</code> 文档都是一篇文章，通过 VuePress 引擎<a href="#%E5%BC%80%E5%8F%91%E4%B8%8E%E9%A2%84%E8%A7%88%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89">编译</a>会生成一个网页。</p><h4 id="markdown-语法" tabindex="-1"><a class="header-anchor" href="#markdown-语法" aria-hidden="true">#</a> Markdown 语法</h4><p>以下是示例文章，左边是一个 Markdown 文档，列出了常见的语法，右边是编译出来的相应文章。更多关于 markdown 语法的介绍可以查看这一篇文章 <a href="https://guides.github.com/features/mastering-markdown/" target="_blank" rel="noopener noreferrer">Mastering Markdown</a>。</p><p>💡 该模板还支持插入 <a href="https://katex.org/docs/supported.html" target="_blank" rel="noopener noreferrer">katex 数学公式</a></p><p><img src="/blog-web/assets/markdown-post.605737e4.png" alt="markdown-post"></p><p>💡 如果插入本地图片，推荐在与当前 Markdown 文档同级的目录下创建一个文件夹 📁 <code>images</code> 存放图片文件，然后就可以在该 Markdown 文件中使用相对路径插入相应的图片。如在 Markdown 文件中插入图片 <code>img1.png</code></p><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token url"><span class="token operator">!</span>[<span class="token content">image title</span>](<span class="token url">./images/img1.png</span>)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>💡 可以通过 <code>&lt;iframe&gt;</code> 的形式插入视频，为了解决视频的高宽比例和网页响应式适配问题，可以调整元素 <code>style</code> 属性的 <code>width</code> 和 <code>aspect-ratio</code> 选项值</p><p>通过以下代码嵌入一个 Youtube <a href="https://www.youtube.com/watch?v=Y50_RSWpWkA" target="_blank" rel="noopener noreferrer">视频</a></p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span>
  <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token property">aspect-ratio</span><span class="token punctuation">:</span> 16/9<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://www.youtube.com/embed/Y50_RSWpWkA?start=3403&amp;end=3441&amp;modestbranding=1&amp;rel=0<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">allowfullscreen</span>
  <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>更多关于 YouTube 嵌入式播放器及播放器参数可以参考<a href="https://developers.google.com/youtube/player_parameters" target="_blank" rel="noopener noreferrer">官方文档</a></p><ul><li><code>start</code> 参数设置播放的开始时间，单位为秒</li><li><code>end</code> 参数设置播放的结束时间，单位为秒</li><li><code>modestbranding</code> 参数设置为 1 可以阻止 YouTube 徽标显示在控制栏中</li><li><code>rel</code> 参数设置为 0 在播放结束显示的相关视频来自于相同的频道</li><li><code>allowfullscreen</code> 属性允许播放器全屏显示</li><li><code>loading</code> 属性设置为 <code>lazy</code> 可以实现<a href="http://www.deathghost.cn/article/html/80" target="_blank" rel="noopener noreferrer">懒加载</a></li></ul><p>通过以下代码嵌入一个 Bilibili <a href="https://www.bilibili.com/video/BV1W64y1X7ok" target="_blank" rel="noopener noreferrer">视频</a></p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>iframe</span>
  <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token property">aspect-ratio</span><span class="token punctuation">:</span> 16/9<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//player.bilibili.com/player.html?aid=759111032&amp;bvid=BV1W64y1X7ok&amp;cid=366423332&amp;page=1&amp;high_quality=1&amp;t=60<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">allowfullscreen</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">loading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lazy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>iframe</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>由于 Bilibili 官方未给出关于嵌入式播放器的参数，参考相关文章尝试进行以下设置</p><ul><li><code>high_quality</code> 参数设置为 <code>1</code> 是为了<a href="https://www.zhihu.com/question/363423550/answer/1357554124" target="_blank" rel="noopener noreferrer">将视频设置为片源可用的最高清晰度</a></li><li><code>src</code> 属性里面有很多参数，可以只保留 <code>bvid</code> 这个参数</li><li><code>page</code> 参数指定选集里第几个视频</li><li><code>t</code> 参数设置视频开始播放的时间，单位为秒</li><li><code>loading</code> 属性设置为 <code>lazy</code> 可以实现懒加载</li></ul><p>更多可能的参数设置可以参考 <a href="https://sunete.github.io/tutorial/bilibili-video-adapts-to-the-width/" target="_blank" rel="noopener noreferrer">Bilibili 视频适应页面宽度</a> 这一篇文章。</p><h4 id="frontmatter" tabindex="-1"><a class="header-anchor" href="#frontmatter" aria-hidden="true">#</a> Frontmatter</h4><p>在 Markdown 文件中除了正文内容，还可以在文章的顶部添加一些额外的信息，称为 <a href="https://yaml.org/" target="_blank" rel="noopener noreferrer">YAML Frontmatter</a>，作为参数传递给 VuePress 控制引擎如何编译生成相应网页。</p><p>在 Frontmatter 中可以设置的字段（注意大小写，采用驼峰式命名法）：</p><ul><li><code>show</code>：设置当前 Markdown 文档是否作为部落格文章。如果其值为 <code>true</code> 就显示在<strong>部落格文章导航页</strong>和<strong>笔记导航页</strong>中；如果其值为 <code>false</code> 文章就不会显示在部落格文章导航页中。</li><li><code>cover</code>：设置文章的封面图，该图片是显示在部落导航页的相应的文章卡片上（因此文章的 Frontmatter 字段 <code>show</code> 需要设置为 <code>true</code>），记得将图片文件放置在静态资源文件夹 📁 <code>public</code> 的子文件夹 📁 <code>images/covers</code> 中</li><li><code>collection</code>：设置文章所属系列</li><li><code>collectionOrder</code>：设置当前文章在所属系列中的排序（因此需要先设置文章的 Frontmatter 字段 <code>collection</code>）</li><li><code>tags</code>：设置文章的标签，其值是一个数组，每个元素以 <code>-</code> 开始</li><li><code>summary</code>: 设置当文章的概述，它会显示在部落格导航页的相应文章卡片上（因此文章的 Frontmatter 字段 <code>show</code> 需要设置为 <code>true</code>）</li></ul><p>Frontmatter 写在文章的顶部，被包裹在一对<strong>三短划线</strong>中，以下是一个示例：</p><ul><li>该 Markdown 文档是一篇部落格文章</li><li>文章封面图是 <code>img1.png</code>（文件放置在 📁 <code>public/images/covers</code> 中）</li><li>文章属于 <code>linear algebra</code> 这个系列，在系列中排序为 <code>5</code></li><li>文章打上的标签是 <code>math</code> 和 <code>linear algebra</code></li></ul><div class="language-markdown ext-md line-numbers-mode"><pre class="language-markdown"><code><span class="token front-matter-block"><span class="token punctuation">---</span>
<span class="token font-matter yaml language-yaml"><span class="token key atrule">show</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">cover</span><span class="token punctuation">:</span> img1.png
<span class="token key atrule">collection</span><span class="token punctuation">:</span> linear algebra
<span class="token key atrule">collection</span><span class="token punctuation">:</span> <span class="token number">5</span>
<span class="token key atrule">summary</span><span class="token punctuation">:</span> A summary of this article will show on navigator page
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> math
  <span class="token punctuation">-</span> linear algebra</span>
<span class="token punctuation">---</span></span>

<span class="token title important"><span class="token punctuation">#</span> 正文标题一</span>
以下是正文内容

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>💡 除了以上提到的字段，VuePress 默认主题还支持设置其他 Frontmatter 字段，具体参考<a href="https://vuepress2.netlify.app/zh/reference/frontmatter.html#lang" target="_blank" rel="noopener noreferrer">官方文档</a>。</p><p>⚠️ 由于 Frontmatter 设置的参数优先级更高，当 Frontmatter 中的字段（针对当前文章） 与 VuePress 配置文件 📄 <code>config.js</code> 中的字段（针对整个网页）一致时，Frontmatter 的字段值会覆盖 <code>config.js</code> 相应的字段值，对当前文章起作用。</p><h3 id="开发与预览-可选" tabindex="-1"><a class="header-anchor" href="#开发与预览-可选" aria-hidden="true">#</a> 开发与预览（可选）</h3><p>设置好参数后，或每次写作完成后，<strong>推荐通过启动本地服务器，预览生成的网站</strong>，在本地编译成功后再<a href="#%E4%B8%8E%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E5%90%8C%E6%AD%A5">将代码推送到 Github 远程仓库</a>可以提高部署的成功率。</p><p>在终端输入以下命令启动本地服务器，编译完成后，会自动打开浏览器加载生成的网页，可以进行实时的开发调试</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> run docs:dev
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>💡 如果未自动打开网页，可以按住 <code>Ctrl</code> 键点击终端输出的 URL 中任意一条链接，即可使用系统默认的浏览器预览网页；也可以复制其中一条链接，输入到浏览器地址栏中进行访问</p><p><img src="/blog-web/assets/terminal.8fd7b875.png" alt="terminal"></p><p>如果需要停止本地服务器，点击终端面板以便激活响应输入，然后按下快捷键 <code>Ctrl+C</code>，终端会弹出「终止批处理操作」提示，按下 <code>y</code> 后再按回车键 <code>Enter</code> 确定即可</p><p><img src="/blog-web/assets/shut-down-server.47420661.png" alt="shut down server"></p><p>💡 如果编译没有错误提示，但是无法正常预览，可以尝试停止本地服务器后再<strong>重启</strong>服务器。</p><h3 id="版本控管" tabindex="-1"><a class="header-anchor" href="#版本控管" aria-hidden="true">#</a> 版本控管</h3><p>当写作完成保存了 Markdown 文件后（推荐进一步通过启动本地服务器，预览生成的网页查看效果），还需要通过 Git 对项目进行版本控管。保存 Markdown 文件是对当前文章的保存，而版本控管就可以理解为对当前整个项目的状态的保存，只有保存了这个状态才可以将本地项目的增删同步到远程仓库。</p><p>使用 VS Code 代码编辑器打开本地项目文件夹 📁 <code>two-dishes-one-fish</code>，点击编辑器左侧的 <code>源代码管理</code> 按钮，然后按照下图提示操作，保存项目当前的状态。</p><p>![git commit](./images/git commit.png)</p><p>💡 如果项目模板是通过在 <a href="https://github.com/Benbinbin/two-dishes-one-fish" target="_blank" rel="noopener noreferrer">Github 仓库</a>下载代码压缩包得到的，那么项目可能并未进行版本控管的初始化，可以按照图中提示，点击 <code>初始化存储库</code> 按钮实现初始化，然后就可以对项目的状态变动进行追踪。</p><p>![git init](./images/git init.png)</p><h3 id="与远程仓库同步" tabindex="-1"><a class="header-anchor" href="#与远程仓库同步" aria-hidden="true">#</a> 与远程仓库同步</h3><p>为了使用 Github 托管项目，并利用 Github Page 展示生成的网页，需要将本地项目与远程的 Github 仓库进行同步：</p><ol><li><p>根据下图操作提示，在 Github 上创建一个仓库</p><p><img src="/blog-web/assets/create-new-github-repo.f3bc5c01.png" alt="create new github repo"></p></li><li><p>为本地项目添加远程仓库。在 Github 上新建一个仓库后，页面会跳转到仓库的主页，其中 <code>…or push an existing repository from the command line</code> 下的代码，就是将本地仓库与该 Github 仓库相连接的命令。</p><p><img src="/blog-web/assets/add-remote-repo.801a5bbc.png" alt="add remote repo"></p><ul><li><p>使用 VS Code 代码编辑器打开本地的项目文件夹 📁 <code>two-dishes-one-fish</code></p></li><li><p>点击（菜单栏）<code>查看(V)</code> -&gt; <code>终端</code> 打开终端（或使用快捷键 <code>Ctrl+`</code>）</p></li><li><p>在终端输入以下命令为本地项目添加远程仓库（其中 [username] 是你的 Github 用户名称，[repo] 是新建的仓库名称）</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> remote <span class="token function">add</span> origin https://github.com/<span class="token punctuation">[</span>username<span class="token punctuation">]</span>/<span class="token punctuation">[</span>repo<span class="token punctuation">]</span>.git
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>⚠️ 由于本地的项目是基于从 Github 下载的<a href="https://github.com/Benbinbin/two-dishes-one-fish" target="_blank" rel="noopener noreferrer">模板 <code>two-dishes-on-fish</code></a> 而创建的，因此本地项目原本就已经与这个模板的 Github 远程仓库现连。如果直接输入以上命令是无法成功执行的，会输出错误提示 <code>fatal: remote origin already exists.</code> 表示名为 <code>origin</code> 的远程仓库已存在，因此需要<strong>先在终端输入以下命令移除这个已存在的远程仓库</strong> <code>git remote remove origin</code>，然后再输入以上的命令才能够执行成功。</p><p>💡 可以在终端输入命令 <code>git remote -v</code> 来查看本地项目已连接的远程仓库，更多的 Git 命令可以参考<a href="https://git-scm.com/book/zh/v2" target="_blank" rel="noopener noreferrer">官方指南</a>。</p></li><li><p>在终端输入以下命令为本地项目创建一个名为 <code>main</code> 的分支</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> branch -M main
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ul></li><li><p>与远程仓库同步。在终端输入以下命令，将本地项目代码同步到远端仓库</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">git</span> push -u origin main
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div></li></ol><p>💡 前面的两个步骤只需要配置一次即可，<strong>而这一步是本地项目与远程仓库同步，应该在每次<a href="#%E7%89%88%E6%9C%AC%E6%8E%A7%E7%AE%A1">版本控管</a>，即每次保存完项目的状态后都执行一次</strong>。而且这一次已经设置了同步的分支，下一次同步就可以使用更简洁的命令 <code>git push</code> 即可。</p><h3 id="部署网页" tabindex="-1"><a class="header-anchor" href="#部署网页" aria-hidden="true">#</a> 部署网页</h3><p>项目模板已经内置了<a href="https://vuepress2.netlify.app/zh/guide/deployment.html#github-pages" target="_blank" rel="noopener noreferrer">部署脚本 <code>.github/workflows/docs.yml</code></a>，每当将本地项目代码同步到远程仓库时，Github 监听到仓库的变化就会自动执行脚本，将 Markdown 文件编译为的静态网页，并将网页部署到仓库的分支 <code>gh-pages</code>。</p><p>只需要进入仓库的 Github Pages 设置页，指定一次网页的数据源为分支 <code>gh-pages</code> 即可。</p><p><img src="/blog-web/assets/github-page.2ede3373.png" alt="Github Page"></p><p>💡 首次指定网页数据源后，可能要等待一段短时间，待上图的 <code>这个就是该仓库的 Github Page</code> 方框变绿，才能成功浏览到网页。</p><p>💡 每次将本地项目代码<a href="#%E4%B8%8E%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E5%90%8C%E6%AD%A5">同步到 Github 远程仓库</a>后，都要等待 Github Action 执行部署脚本，成功后才能够浏览到新页面，可以到仓库主页的 <code>Actions</code> 标签栏内查看执行情况。如果部署成功但网页并不更改，可以按快捷键 <code>Shift + Ctrl + R</code> 或 <code>Shift + F5</code> 清除网页缓存强制刷新。</p><p><img src="/blog-web/assets/github-action.64493312.png" alt="Github Action"></p><p>💡 如果希望优化网页的访问速度，可以注册一个 <a href="https://gitee.com/" target="_blank" rel="noopener noreferrer">Gitee</a> 账号，并创建一个 Github 远程仓库的<a href="https://gitee.com/help/articles/4336" target="_blank" rel="noopener noreferrer">仓库镜像</a>，然后开启 <a href="https://gitee.com/help/articles/4136" target="_blank" rel="noopener noreferrer">Gitee Page</a>。</p><p>💡 VuePress 提供了更多部署选项，请参考<a href="https://vuepress2.netlify.app/zh/guide/deployment.html" target="_blank" rel="noopener noreferrer">官方文档</a>。</p><h2 id="开发日志" tabindex="-1"><a class="header-anchor" href="#开发日志" aria-hidden="true">#</a> 开发日志</h2><p>以下部分是我基于 VuePress 的默认主题进行二次开发的踩坑笔记。</p><p>⚠️ 使用 VuePress 的版本是 <a href="https://github.com/vuepress/vuepress-next/releases/tag/v2.0.0-beta.20" target="_blank" rel="noopener noreferrer">v2.0.0-beta.20</a>，该版本仍处于不稳定的 <strong>Beta</strong> 状态（后期可能会出现不兼容的版本更新），因此如果你需要将它应用到日常正式的开发中需要谨慎考量。</p><h3 id="项目结构-1" tabindex="-1"><a class="header-anchor" href="#项目结构-1" aria-hidden="true">#</a> 项目结构</h3><p><img src="/blog-web/assets/project-structure.fa5461f0.png" alt="project-structure"></p><h3 id="注意要点" tabindex="-1"><a class="header-anchor" href="#注意要点" aria-hidden="true">#</a> 注意要点</h3><ul><li><p>插件或者主题的入口文件会在 Node App 中被加载，因此它们需要使用 CommonJS 格式。</p></li><li><p>客户端文件会在 Client App 中被加载，它们最好使用 ESM 格式。</p></li><li><p>VuePress 会在构建过程中生成一个 SSR 应用，用以对页面进行预渲染。</p></li><li><p>如果一个组件在 <code>setup()</code> 中直接使用浏览器 / DOM API ，它会导致构建过程报错，因为这些 API 在 Node.js 的环境中是无法使用的。在这种情况下，你可以选择一种方式：</p><ul><li><p>将需要访问浏览器 / DOM API 的代码部分写在 <code>onBeforeMount()</code> 或 <code>onMounted()</code> Hook 中。</p></li><li><p>使用 <code>&lt;ClientOnly&gt;</code> 包裹这个组件。</p></li><li><p>如果在组件中导入的模块会立即执行访问 DOM API 操作，使用 <code>&lt;ClientOnly&gt;</code> 包裹这个组件也可能会在构建过程报错，可以使用动态导入的方式引入模块。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// dynamic import masonry</span>
      <span class="token keyword">const</span> module <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;masonry-layout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> Masonry <span class="token operator">=</span> module<span class="token punctuation">.</span>default<span class="token punctuation">;</span>
      <span class="token comment">// do something</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul></li><li><p>布局组件 <code>Layout</code> 应该包含 <a href="https://v2.vuepress.vuejs.org/zh/reference/components.html#content" target="_blank" rel="noopener noreferrer">Content</a> 组件来展示 Markdown 内容</p></li></ul><h3 id="tailwindcss-整合" tabindex="-1"><a class="header-anchor" href="#tailwindcss-整合" aria-hidden="true">#</a> tailwindcss 整合</h3><p>项目的打包工具使用 <a href="https://v2.vuepress.vuejs.org/zh/guide/bundler.html#vite" target="_blank" rel="noopener noreferrer">Vite</a></p><ul><li><p>按照 Tailwind CSS 官方文档安装依赖并生成配置文件</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -D tailwindcss@latest postcss@latest autoprefixer@latest
npx tailwindcss init -p
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>💡 执行完以上命令后，会在项目的根文件夹下生成配置文件 <code>tailwind.config.js</code> ，可以配置其中的属性 <code>purge</code>，以在生产环境下优化 Tailwind CSS 文件大小。但是由于项目中存在通过拼接字符串构成的类名，如果执行优化会出现样式丢失的情况，因此没有配置 <code>purge</code> 属性。</p></li><li><p>在文件 <code>.vuepress/config.js</code> 中为打包工具配置 postcss 参数</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  bundlerConfig<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// vite 打包工具的选项</span>
    viteOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      css<span class="token operator">:</span> <span class="token punctuation">{</span>
        postcss<span class="token operator">:</span> <span class="token punctuation">{</span>
            plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;tailwindcss&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;autoprefixer&#39;</span><span class="token punctuation">)</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li><li><p>在文件 <code>.vuepress/styles/index.scss</code> 的开头中引入 Tailwind</p><div class="language-scss ext-scss line-numbers-mode"><pre class="language-scss"><code>@tailwind base<span class="token punctuation">;</span>
@tailwind components<span class="token punctuation">;</span>
@tailwind utilities<span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>⚠️ 由于引入了 <code>@tailwind base</code> 可能会会造成默认主题样式的重置，可以手动添加相应的 CSS 样式修正。</p></li></ul><h3 id="markdown-it-插件" tabindex="-1"><a class="header-anchor" href="#markdown-it-插件" aria-hidden="true">#</a> markdown-it 插件</h3><p>VuePress 使用 <a href="https://github.com/markdown-it/markdown-it" target="_blank" rel="noopener noreferrer">markdown-it</a> 来解析 Markdown 内容，支持通过安装插件来实现语法扩展，还可以对插件进行参数配置。</p><p>安装插件的方法参考：</p><ul><li><a href="https://v2.vuepress.vuejs.org/zh/reference/plugin-api.html#extendsmarkdown" target="_blank" rel="noopener noreferrer">extendsMarkdown</a></li><li><a href="https://github.com/markdown-it/markdown-it#plugins-load" target="_blank" rel="noopener noreferrer">Plugins load</a></li></ul><h4 id="markdown-it-katex" tabindex="-1"><a class="header-anchor" href="#markdown-it-katex" aria-hidden="true">#</a> markdown-it-katex</h4><p>添加 <a href="https://github.com/yzhang-gh/markdown-it-katex" target="_blank" rel="noopener noreferrer"><code>@neilsustc/markdown-it-katex</code> 插件</a>为 Markdown 添加数学公式的支持。</p><ul><li><p>安装依赖 <code>npm i @neilsustc/markdown-it-katex</code></p><p>💡 <a href="https://www.npmjs.com/package/markdown-it-katex" target="_blank" rel="noopener noreferrer"><code>markdown-it-katex</code></a> 这个包在 npm 里下载量最多，但是它依赖的 <a href="https://github.com/waylonflinn/markdown-it-katex/blob/81b84a7d91d74a1ba3d4769b847a5bf1947256cb/package.json#L25" target="_blank" rel="noopener noreferrer">katex 版本</a>很低，已经没有维护了，所以换成 <a href="https://github.com/yzhang-gh/markdown-it-katex" target="_blank" rel="noopener noreferrer"><code>@neilsustc/markdown-it-katex</code></a></p></li><li><p>在文件 <code>.vuepress/config.js</code> 中配置 markdown-it 插件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function-variable function">extendsMarkdown</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">md</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    md<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@neilsustc/markdown-it-katex&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>output<span class="token operator">:</span> <span class="token string">&#39;html&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>⚠️ 根据 KaTex <a href="https://katex.org/docs/options.html" target="_blank" rel="noopener noreferrer">官方文档</a>可以通过属性 <code>output</code> 来设置数学公式的渲染模式，应该设置为 <code>html</code>，因为默认值 <code>ouput: htmlAndMathml</code> 会将一些 mathml 格式的非标准标签插入到 HTML，导致构建过程报错</p></li><li><p>除了安装插件，还需要引入 katex 的样式表，在文件 <code>.vuepress/config.js</code> 中配置 <a href="https://v2.vuepress.vuejs.org/zh/reference/config.html#head" target="_blank" rel="noopener noreferrer">head 参数</a></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  head<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&#39;link&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> rel<span class="token operator">:</span> <span class="token string">&#39;stylesheet&#39;</span><span class="token punctuation">,</span> href<span class="token operator">:</span> <span class="token string">&#39;https://cdn.jsdelivr.net/npm/katex@0.13.5/dist/katex.min.css&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul><h3 id="插件开发" tabindex="-1"><a class="header-anchor" href="#插件开发" aria-hidden="true">#</a> 插件开发</h3><p>借助 VuePress 提供的<a href="https://v2.vuepress.vuejs.org/zh/reference/plugin-api.html" target="_blank" rel="noopener noreferrer">插件 API</a> 可以为网站新增页面（不依赖 Markdown 文件），还可以为指定的页面提供额外的数据。</p><p>💡 VuePress 插件是一个符合插件 API 的 JS 对象或返回值为 JS 对象的函数，具体参考官方文档<a href="https://v2.vuepress.vuejs.org/zh/advanced/plugin.html" target="_blank" rel="noopener noreferrer">开发插件</a>一章。</p><p>VuePress 提供的插件 API 有多种 Hooks，它们的执行顺序和时间点都不同，可以参考官方文档的<a href="https://v2.vuepress.vuejs.org/zh/advanced/architecture.html#%E6%A0%B8%E5%BF%83%E6%B5%81%E7%A8%8B%E4%B8%8E-hooks" target="_blank" rel="noopener noreferrer">核心流程与 Hooks 一节</a>，代码需要在合适 Hooks 下执行才不会报错。</p><p><img src="/blog-web/assets/vuepress-core-process.94bc9ed8.png" alt="vuepress-core-process"></p><h4 id="添加时间" tabindex="-1"><a class="header-anchor" href="#添加时间" aria-hidden="true">#</a> 添加时间</h4><p>参考<a href="https://v2.vuepress.vuejs.org/zh/reference/plugin/git.html#git" target="_blank" rel="noopener noreferrer">官方插件 Git</a> 的<a href="https://github.com/vuepress/vuepress-next/tree/main/packages/%40vuepress/plugin-git" target="_blank" rel="noopener noreferrer">代码</a>，通过插件 <code>.vuepress/plugins/addTime.js</code> 为 Markdown 文件添加时间修改的信息。</p><p>使用 <a href="https://v2.vuepress.vuejs.org/zh/reference/plugin-api.html#extendspageoptions" target="_blank" rel="noopener noreferrer">extendsPageOptions</a> Hook 将 Markdown 文件的创建时间 <code>createdTime</code> 和更新时间 <code>updatedTime</code> 作为 Frontmatter 字段添加到相应文件中。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token doc-comment comment">/**
 * refer to @vuepress/plugin-git: https://www.npmjs.com/package/@vuepress/plugin-git
 */</span>
 <span class="token keyword">const</span> execa <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;execa&#39;</span><span class="token punctuation">)</span>

 <span class="token doc-comment comment">/**
  * Check if the git repo is valid
  */</span>
 <span class="token keyword">const</span> <span class="token function-variable function">checkGitRepo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">cwd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token keyword">try</span> <span class="token punctuation">{</span>
     execa<span class="token punctuation">.</span><span class="token function">commandSync</span><span class="token punctuation">(</span><span class="token string">&#39;git log&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> cwd <span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token keyword">return</span> <span class="token boolean">true</span>
   <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token boolean">false</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

 <span class="token keyword">const</span> <span class="token function-variable function">getUpdatedTime</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">filePath<span class="token punctuation">,</span> cwd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token keyword">const</span> <span class="token punctuation">{</span> stdout <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">execa</span><span class="token punctuation">(</span>
     <span class="token string">&#39;git&#39;</span><span class="token punctuation">,</span>
     <span class="token punctuation">[</span><span class="token string">&#39;--no-pager&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;log&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;-1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;--format=%at&#39;</span><span class="token punctuation">,</span> filePath<span class="token punctuation">]</span><span class="token punctuation">,</span>
     <span class="token punctuation">{</span>
       cwd<span class="token punctuation">,</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">)</span>

   <span class="token keyword">return</span> Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>stdout<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span>
 <span class="token punctuation">}</span>

 <span class="token keyword">const</span> <span class="token function-variable function">getCreatedTime</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">filePath<span class="token punctuation">,</span> cwd</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token keyword">const</span> <span class="token punctuation">{</span> stdout <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">execa</span><span class="token punctuation">(</span>
     <span class="token string">&#39;git&#39;</span><span class="token punctuation">,</span>
     <span class="token punctuation">[</span><span class="token string">&#39;--no-pager&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;log&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;--diff-filter=A&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;--format=%at&#39;</span><span class="token punctuation">,</span> filePath<span class="token punctuation">]</span><span class="token punctuation">,</span>
     <span class="token punctuation">{</span>
       cwd<span class="token punctuation">,</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">)</span>

   <span class="token keyword">return</span> Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>stdout<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span>
 <span class="token punctuation">}</span>

 <span class="token keyword">const</span> addTime <span class="token operator">=</span> <span class="token punctuation">{</span>
   name<span class="token operator">:</span> <span class="token string">&#39;vuepress-plugin-addTime&#39;</span><span class="token punctuation">,</span>
   <span class="token keyword">async</span> <span class="token function">extendsPageOptions</span><span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">,</span> app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>filePath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       filePath <span class="token operator">=</span> options<span class="token punctuation">.</span>filePath<span class="token punctuation">;</span>
       <span class="token keyword">const</span> cwd <span class="token operator">=</span> app<span class="token punctuation">.</span>dir<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
       <span class="token keyword">const</span> isGitRepoValid <span class="token operator">=</span> <span class="token function">checkGitRepo</span><span class="token punctuation">(</span>cwd<span class="token punctuation">)</span>

       <span class="token keyword">let</span> createdTime <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
       <span class="token keyword">let</span> updatedTime <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

       <span class="token keyword">if</span> <span class="token punctuation">(</span>isGitRepoValid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         createdTime <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getCreatedTime</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> cwd<span class="token punctuation">)</span>
         updatedTime <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getUpdatedTime</span><span class="token punctuation">(</span>filePath<span class="token punctuation">,</span> cwd<span class="token punctuation">)</span>
       <span class="token punctuation">}</span>

       <span class="token keyword">return</span> <span class="token punctuation">{</span>
         frontmatter<span class="token operator">:</span> <span class="token punctuation">{</span>
           createdTime<span class="token punctuation">,</span>
           updatedTime
         <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token punctuation">}</span>
     <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
     <span class="token punctuation">}</span>

   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>

 module<span class="token punctuation">.</span>exports <span class="token operator">=</span> addTime
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br></div></div><h4 id="创建页面" tabindex="-1"><a class="header-anchor" href="#创建页面" aria-hidden="true">#</a> 创建页面</h4><p>参考官方文档<a href="https://v2.vuepress.vuejs.org/zh/advanced/cookbook/adding-extra-pages.html" target="_blank" rel="noopener noreferrer">添加额外页面</a>一章，通过插件 <code>.vuepress/plugins/createHomePage.js</code> 为网站添加主页，通过插件 <code>.vuepress/plugins/generateFolderPages.js</code> 和 <code>.vuepress/plugins/generateListPages.js</code> 创建一些导航页。</p><p>主要使用 <code>createPage </code> 方法异步创建页面，由于导航页需要基于所有 Markdown 文件的数据，代码所以需要在 <a href="https://v2.vuepress.vuejs.org/zh/reference/plugin-api.html#oninitialized" target="_blank" rel="noopener noreferrer">onInitialized</a> Hook 下执行，此时页面已经加载完毕。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 创建首页</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> createPage <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@vuepress/core&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">createHomePage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">,</span> app</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#39;vuepress-plugin-createHomePage&#39;</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token function">onInitialized</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// if homepage doesn&#39;t exist</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>app<span class="token punctuation">.</span>pages<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> page<span class="token punctuation">.</span>path <span class="token operator">!==</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// async create a homepage</span>
        <span class="token keyword">const</span> homepage <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createPage</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          path<span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span>
          <span class="token comment">// set frontmatter</span>
          frontmatter<span class="token operator">:</span> <span class="token punctuation">{</span>
            layout<span class="token operator">:</span> <span class="token string">&#39;HomeLayout&#39;</span><span class="token punctuation">,</span>
            cards<span class="token operator">:</span> options<span class="token punctuation">.</span>cards <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token comment">// push the homepage to app.pages</span>
        app<span class="token punctuation">.</span>pages<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>homepage<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> createHomePage
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="继承主题" tabindex="-1"><a class="header-anchor" href="#继承主题" aria-hidden="true">#</a> 继承主题</h3><p>参考官方文档<a href="https://v2.vuepress.vuejs.org/zh/advanced/cookbook/extending-a-theme.html" target="_blank" rel="noopener noreferrer">继承一个主题</a>一章。</p><p>由于我继承的主题并没有发布到 NPM 上而是作为本地主题，因此在文件 <code>.vuepress/config.js</code> 中配置 theme 参数时<a href="https://v2.vuepress.vuejs.org/zh/guide/theme.html#%E6%9C%AC%E5%9C%B0%E4%B8%BB%E9%A2%98" target="_blank" rel="noopener noreferrer">通过绝对路径来使用它</a></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// ...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  theme<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./theme/index.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="添加布局组件" tabindex="-1"><a class="header-anchor" href="#添加布局组件" aria-hidden="true">#</a> 添加布局组件</h3><p>有两种方式新增布局，然后就可以直接在 Markdown 文件的顶部 Frontmatter <a href="https://v2.vuepress.vuejs.org/zh/reference/frontmatter.html#layout" target="_blank" rel="noopener noreferrer">字段 layout</a> 中使用它们：</p><ul><li><p>方法一：如果布局组件放置在主题的 <code>.vuepress/theme/layouts/</code> 目录下，需要在主题的入口文件 <code>.vuepress/theme/index.js</code> 中通过配置属性 <code>layouts</code> 来显式指定</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> path <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@vuepress/utils&#39;</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">&#39;vuepress-theme-two-dish-cat-fish&#39;</span><span class="token punctuation">,</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token string">&#39;@vuepress/theme-default&#39;</span><span class="token punctuation">,</span>
  <span class="token comment">// registe 4 layouts</span>
  layouts<span class="token operator">:</span> <span class="token punctuation">{</span>
    HomeLayout<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;layouts/HomeLayout.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    ClassificationLayout<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;layouts/ClassificationLayout.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    FolderLayout<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;layouts/FolderLayout.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Layout<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;layouts/Layout.vue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li><li><p>方法二：如果使用默认主题（不进行继承拓展），可以通过插件 API 的 <a href="https://v2.vuepress.vuejs.org/zh/reference/plugin-api.html#clientappenhancefiles" target="_blank" rel="noopener noreferrer">clientAppEnhanceFiles Hook</a> 来<a href="https://v2.vuepress.vuejs.org/zh/reference/frontmatter.html#layout" target="_blank" rel="noopener noreferrer">注册自定义的布局组件</a>。</p><ul><li><p>创建 <code>.vuepress/clientAppEnhance.js</code> 文件</p></li><li><p>在文件中使用 <code>clientAppEnhanceFile</code> 方法注册组件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineClientAppEnhance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vuepress/client&#39;</span>
<span class="token keyword">import</span> CustomLayout <span class="token keyword">from</span> <span class="token string">&#39;./CustomLayout.vue&#39;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineClientAppEnhance</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> app <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;CustomLayout&#39;</span><span class="token punctuation">,</span> CustomLayout<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul></li></ul><p>💡 如果布局是基于<a href="https://github.com/vuepress/vuepress-next/blob/main/packages/%40vuepress/theme-default/src/client/layouts/Layout.vue" target="_blank" rel="noopener noreferrer">默认主题的布局组件 <code>Layout</code></a> 进行二次开发，可以使用该组件提供的的插槽</p><ul><li><code>navbar-before</code></li><li><code>navbar-after</code></li><li><code>sidebar-top</code></li><li><code>sidebar-bottom</code></li><li><code>page-top</code></li><li><code>page-bottom</code></li></ul><h3 id="树图导航" tabindex="-1"><a class="header-anchor" href="#树图导航" aria-hidden="true">#</a> 树图导航</h3><p>基于 Markdown 文件在存储系统的位置，使用 <a href="https://d3js.org/" target="_blank" rel="noopener noreferrer">D3.js</a> 构建<a href="https://github.com/d3/d3-hierarchy/#tree" target="_blank" rel="noopener noreferrer">树形图</a>来可视化文件夹的嵌套层级关系。</p><ul><li><p>安装 D3.js 依赖 <code>npm install d3@6.5.0</code></p></li><li><p>在插件 <code>.vuepress/plugins/generateFolderPages.js</code> 中通过遍历所有 Markdown 文件（生成的页面），使用 <a href="https://v2.vuepress.vuejs.org/zh/reference/plugin-api.html#extendspagedata" target="_blank" rel="noopener noreferrer">extendsPageData</a> Hook 为笔记导航页添加额外的数据。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> createPage <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@vuepress/core&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">generateFolderPages</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">options<span class="token punctuation">,</span> app</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> postFolders <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  options<span class="token punctuation">.</span>postFolders<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">folder</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    postFolders<span class="token punctuation">[</span>folder<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      posts<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      tags<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&#39;vuepress-plugin-generateFolderPages&#39;</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token function">onInitialized</span><span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// rearrange posts to different folder</span>
      app<span class="token punctuation">.</span>pages<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> folder <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>page<span class="token punctuation">.</span>filePathRelative<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          folder <span class="token operator">=</span> page<span class="token punctuation">.</span>filePathRelative<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>folder <span class="token keyword">in</span> postFolders<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token punctuation">{</span>
          key<span class="token operator">:</span> page<span class="token punctuation">.</span>key<span class="token punctuation">,</span>
          title<span class="token operator">:</span> page<span class="token punctuation">.</span>title<span class="token punctuation">,</span>
          path<span class="token operator">:</span> page<span class="token punctuation">.</span>path<span class="token punctuation">,</span>
          pathRelative<span class="token operator">:</span> page<span class="token punctuation">.</span>htmlFilePathRelative<span class="token punctuation">,</span>
          filePathRelative<span class="token operator">:</span> page<span class="token punctuation">.</span>filePathRelative<span class="token punctuation">,</span>
          tags<span class="token operator">:</span> page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>tags <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          createdTime<span class="token operator">:</span> page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>createdTime <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
          updatedTime<span class="token operator">:</span> page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>updatedTime <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
          date<span class="token operator">:</span> page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
          collection<span class="token operator">:</span> page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>collection <span class="token operator">||</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
          collectionOrder<span class="token operator">:</span> page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>collectionOrder <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>

        postFolders<span class="token punctuation">[</span>folder<span class="token punctuation">]</span><span class="token punctuation">.</span>posts<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>post<span class="token punctuation">)</span><span class="token punctuation">;</span>
        postFolders<span class="token punctuation">[</span>folder<span class="token punctuation">]</span><span class="token punctuation">.</span>tags <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>postFolders<span class="token punctuation">[</span>folder<span class="token punctuation">]</span><span class="token punctuation">.</span>tags<span class="token punctuation">,</span> <span class="token operator">...</span>post<span class="token punctuation">.</span>tags<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">//...</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">extendsPageData</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">page<span class="token punctuation">,</span> app</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// add data to each folder navigation pages</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>folder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          postsData<span class="token operator">:</span> postFolders<span class="token punctuation">[</span>page<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>folder<span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> generateFolderPages
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br></div></div></li><li><p>为笔记导航页添加的额外数据是一个数组，在布局组件 <code>.vuepress/theme/layouts/FolderLayout.vue</code> 中将这个扁平的数据结构转换为一个 JS 对象，使它符合 D3.js 用于<a href="https://github.com/d3/d3-hierarchy/#hierarchy" target="_blank" rel="noopener noreferrer">计算层次布局的数据结构要求</a>。</p><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">//...</span>
<span class="token keyword">function</span> <span class="token function">buildPostsTreeData</span><span class="token punctuation">(</span><span class="token parameter">rootName<span class="token punctuation">,</span> postsList</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> tree <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> rootName<span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span>
    parent<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> mdReg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.md$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>

  postsList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> paths <span class="token operator">=</span> post<span class="token punctuation">.</span>filePathRelative<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> folder <span class="token operator">=</span> tree<span class="token punctuation">;</span>
    <span class="token keyword">let</span> currentContent <span class="token operator">=</span> tree<span class="token punctuation">.</span>children<span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> index <span class="token operator">&lt;</span> paths<span class="token punctuation">.</span>length<span class="token punctuation">;</span> index<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> path <span class="token operator">=</span> paths<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token comment">// let existingPath = getLocation(currentLevel, &quot;name&quot;, path);</span>
      <span class="token keyword">let</span> existingPath <span class="token operator">=</span> currentContent<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> item<span class="token punctuation">.</span>name <span class="token operator">===</span> path<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>existingPath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        folder <span class="token operator">=</span> existingPath<span class="token punctuation">;</span>
        currentContent <span class="token operator">=</span> existingPath<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mdReg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> newPath <span class="token operator">=</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> path<span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
          parent<span class="token operator">:</span> folder<span class="token punctuation">,</span>
          data<span class="token operator">:</span> post<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        currentContent<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> newPath <span class="token operator">=</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> path<span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">&quot;folder&quot;</span><span class="token punctuation">,</span>
          parent<span class="token operator">:</span> folder<span class="token punctuation">,</span>
          children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        currentContent<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
        folder <span class="token operator">=</span> newPath<span class="token punctuation">;</span>
        currentContent <span class="token operator">=</span> newPath<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> tree<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// data</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">//...</span>
      folder<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
      posts<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      postsTreeData<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token comment">//...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//...</span>
    data<span class="token punctuation">.</span>folder <span class="token operator">=</span> page<span class="token punctuation">.</span>value<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>folder<span class="token punctuation">;</span>
    data<span class="token punctuation">.</span>posts <span class="token operator">=</span> page<span class="token punctuation">.</span>value<span class="token punctuation">.</span>postsData<span class="token punctuation">.</span>posts<span class="token punctuation">;</span>
    data<span class="token punctuation">.</span>postsTreeData <span class="token operator">=</span> <span class="token function">buildPostsTreeData</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>folder<span class="token punctuation">,</span> data<span class="token punctuation">.</span>posts<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div></li><li><p>在组件 <code>.vuepress/components/PostsTree.vue</code> 中构建树形图，使用 D3.js 计算树图节点的定位等数据，再使用 Vue3 将数据绑定到 DOM 上控制 svg 的生成。</p></li></ul><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">更新时间: </span><span class="meta-item-info">2021/7/15 下午2:42:03</span></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><div style="width:0px;" class="catalog-container absolute top-0 right-0 h-full hidden lg:block"><div class="headings-container sticky top-36" data-v-c28348e0><ul class="max-w-max m-2 pl-7 xl:pl-16 2xl:pl-20 py-4 opacity-50 hover:opacity-100 transition-all duration-300" data-v-c28348e0><!--[--><!--]--></ul></div></div><div style="display:none;" tabindex="0" class="sidebar-container fixed inset-y-0 left-0 z-20 lg:hidden opacity-10 hover:opacity-95"><div class="headings-container px-2 space-y-2 transition-all duration-300 py-20" data-v-6eed9461><!--[--><!--]--></div></div></div><footer class="bg-gray-200 p-8 grid grid-cols-1 md:grid-cols-3 gap-4 items-center"><div class="flex justify-center md:justify-start items-center"><a class="p-2 hover:bg-gray-300 rounded-md" href="https://benbinbin.github.io/" target="_blank"><img src="/blog-web/images/avatar.png" alt="avatar" class="w-10 h-10 rounded-full"></a></div><div class="text-center space-y-0.5"><p class="text-sm text-gray-600"> ©2021 <span class="author">Benbinbin</span>. All Right Reserved. </p><p class="text-xs text-center text-gray-400"> 除特殊说明外，本站的文章遵循 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.en" target="_blank" class="text-blue-400">CC-BY-SA-4.0</a> 协议 </p><p class="text-xs text-center text-gray-400"> 网站主题采用 <a href="https://github.com/Benbinbin/two-dishes-one-fish" target="_blank" class="text-blue-400">Two Dishes One Fish</a></p></div><div class="btn-container flex justify-center md:justify-end items-center space-x-0.5"><!--[--><a class="p-2 hover:bg-gray-300 rounded-md" href="mailto:benthomsonbin@gmail.com" target=""><img src="/blog-web/images/icons/email.svg" alt="email" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://github.com/Benbinbin" target="_blank"><img src="/blog-web/images/icons/github.svg" alt="github" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://juejin.cn/user/3175045314389278/posts" target="_blank"><img src="/blog-web/images/icons/juejin.svg" alt="juejin" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://dribbble.com/BinBinDesign" target="_blank"><img src="/blog-web/images/icons/dribbble.svg" alt="dribbble" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://twitter.com/Benbinbin_fun" target="_blank"><img src="/blog-web/images/icons/twitter.svg" alt="twitter" class="w-auto h-6"></a><a class="p-2 hover:bg-gray-300 rounded-md" href="https://weibo.com/binbindesign" target="_blank"><img src="/blog-web/images/icons/weibo.svg" alt="weibo" class="w-auto h-6"></a><!--]--></div></footer></div><!--]--></div>
    <script type="module" src="/blog-web/assets/app.43fe0c63.js" defer></script>
  </body>
</html>

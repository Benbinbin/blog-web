---
show: true
cover: tailwindcss.png
collection: TailwindCSS
collectionOrder: 5
summary: TailwindCSS 支持多种方式的自定义样式，让该 UI 框架更灵活，可以设计出高度定制的网页
tags:
  - CSS
  - TailwindCSS
---

# 配置
Tailwind 是一个支持定制化的 UI 框架，可以将它进行配置「改造」，以适用于开发更具个性化的用户交互界面。一般在项目的根目录下的 `tailwind.config.js` 文档对 Tailwind 进行配置操作

```js
// 📄 tailwind.config.js
// 一个配置文件示例
module.exports = {
  content: ['./src/**/*.{html,js}'],
  theme: {
    colors: {
      'blue': '#1fb6ff',
      'purple': '#7e5bef',
      'pink': '#ff49db',
      'orange': '#ff7849',
      'green': '#13ce66',
      'yellow': '#ffc82c',
      'gray-dark': '#273444',
      'gray': '#8492a6',
      'gray-light': '#d3dce6',
    },
    fontFamily: {
      sans: ['Graphik', 'sans-serif'],
      serif: ['Merriweather', 'serif'],
    },
    extend: {
      spacing: {
        '8xl': '96rem',
        '9xl': '128rem',
      },
      borderRadius: {
        '4xl': '2rem',
      }
    }
  },
}
```

:bulb: 以上的每一个配置项都是**可选的**，如果某个选项为空，则该选项就会（回退 fallback）采用[默认配置](https://github.com/tailwindlabs/tailwindcss/blob/master/stubs/defaultConfig.stub.js)

## 生成配置文件
可以在终端输入命令来生成 Tailwind 的配置文档 `tailwind.config.js`，不同的命令生成不同的预设内容的配置文档：

```bash
npx tailwindcss init
```

然后就会在项目的根目录下生成一个 `tailwind.config.js` 文档，它十分简单，各选项都没有配置值（使用空对象或空数组）

```js
// 📄 tailwind.config.js
module.exports = {
  content: [],
  theme: {
    extend: {},
  },
  plugins: [],
}
```

:bulb: 如果希望生成一个[具有所有默认参数的 `tailwind.config.js` 文档](https://github.com/tailwindlabs/tailwindcss/blob/master/stubs/defaultConfig.stub.js)（相当于 eject 所有默认设置，便于基于默认值进行修改，这也是 Tailwind 在内部调用的默认配置。），可以在命令中添加 `--full` 参数

```bash
npx tailwindcss init --full
```

:bulb: 如果将 Tailwind 作为 PostCSS 的一个插件，需要在根目录生成 PostCSS 配置文档，则可以在初始化命令中添加 `-p` 参数

```bash
npx tailwindcss init -p
```

这会在根目录中同时生成 Tailwind 的配置文档 `tailwind.config.js` 和 PostCSS 的配置文档 `postcss.config.js`

而且在 PostCSS 配置文档中，已经预设将 `tailwindcss` 和 `autoprefixer` 作为 PostCSS 插件

```js
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
```

:bulb: 如果希望使用其他文件名作为 Tailwind 的配置文件，可以在初始化命令中添加 `-c` 参数

```bash
# 生成名为 tailwindcss-config.js 的文档作为配置文档
npx tailwindcss init tailwindcss-config.js
```

如果使用 Tailwind CLI 编译，同样记得在需要使用参数 `-c` 显式地指明所使用配置文件

```bash
npx tailwindcss -c ./tailwindcss-config.js -i input.css -o output.css
```

如果将 Tailwind 作为 PostCSS 的一个插件，同样记得需要在配置文档 `postcss.config.js` 中进行相应的设置

```js
// 📄 postcss.config.js
module.exports = {
  plugins: {
    tailwindcss: { config: './tailwindcss-config.js' },
  },
}
```

## 配置选项

### content
`content` 选项的值是一个数组，用于指定编译器需要扫描/监听的 HTML 模板文件、JS 组件文件等使用了 Tailwind 基础类的文档。

:bulb: 其中支持使用正则表达式来匹配多个文件，例如 `*` 匹配任意值（除了转义符 `/` 以及隐藏文件），`**` 匹配任意多个目录（也包括零个目录），使用 `{jpg, png}` 形式来匹配多个值，如文件的类型/拓展名。在 Tailwind 内部使用 [fast-glob](https://github.com/mrmlnc/fast-glob) 库来匹配文件。

```js
// 📄 tailwind.config.js
module.exports = {
  content: [
    './pages/**/*.{html,js}',
    './components/**/*.{html,js}',
    './index.html',
  ],
  // ...
}
```

:bulb: 应该尽可能地提供详细的信息，避免由于使用大量通配符而导致 Tailwind 扫描 `node_modules` 里的文件。

有的框架会将项目的 HTML 入口文件放在 `public` 目录下，如果在该 HTML 文件中使用了 Tailwind 的基础类，记得将其也包含在 `content` 选项中。

```js
// 📄 tailwind.config.js
module.exports = {
  content: [
    './public/index.html',
    './src/**/*.{html,js}',
  ],
  // ...
}
```

如果在 JS 文档中对 HTML 元素操作添加了 Tailwind 的基础类，该文档也应该包含在 `content` 选项中。

```js
// ...
menuButton.addEventListener('click', function () {
  let classList = document.getElementById('nav').classList
  classList.toggle('hidden')
  classList.toggle('block')
})
// ...
```

```js
// 📄 tailwind.config.js
module.exports = {
  content: [
    // ...
    './src/**/*.js',
  ],
  // ...
}
```

:warning: Tailwind 扫描 `content` 特定所包含的文件，不仅仅会在 `class="..."` 字符串中进行搜索，而是进行全局文本的搜索我们使用了哪些基础类，因为我们可能会使用 JS 来操作 HTML 元素的类名。基于其扫描的工作流程，在使用基础类时有一点值得注意，即**不可通过拼接的方式构成基础类**，否则 Tailwind 无法在编译时识别抽取它们

```html
<!-- 无法在编译生成样式表中含有 text-red-600 和 text-green-600 基础类所对应的样式 -->
<div class="text-{{ error ? 'red' : 'green' }}-600"></div>
```

```html
<!-- 应该使用完整而非拼接的方式构成的基础类 -->
<div class="{{ error ? 'text-red-600' : 'text-green-600' }}"></div>
```

:bulb: 如果希望自定义 Tailwind 的扫描抽取所用基础类的规则，可以通过 `content.extract` 属性进行设置，`content` 选项是一个对象，其中 `files` 属性是一个数组，包含需要扫描的原文件；`extract` 属性是一个对象，其中指定了哪些类型的文件（其拓展名作为属性名）需要使用自定义的抽取规则，属性值为抽取的方法，其中入参是原文件的内容 `content`。

但是一般情况下 Tailwind 的默认抽取规则就足以应对大部分项目。

```js
module.exports = {
  content: {
    files: ['./src/**/*.{html,wtf}'],
    extract: {
      wtf: (content) => {
        return content.match(/[^<>"'`\s]*/)
      }
    }
  },
  // ...
}
```

:bulb: 如果 `content` 数组中所包含的元素并不是需要扫描/监听的文件（路径），而是原始内容（如一段 HTML 代码），则需要以对象的形式来指明

```js
// 📄 tailwind.config.js
module.exports = {
  content: [
    './pages/**/*.{html,js}'
    './components/**/*.{html,js}',
    { raw: '<div class="font-bold">', extension: 'html' },
  ],
  // ...
}
```

:bulb: 有时候我们需要扫描的原文件并非为 HTML 类型，如 Markdown 文档，可以先将它们转换为 HTML 格式，再让 Tailwind 扫描所使用的基础类更合适。

此时 `content` 选项是一个对象，其中 `files` 属性是一个数组，包含需要扫描的原文件；`transform` 属性是一个对象，其中指定了哪些类型的文件（其拓展名作为属性名）需要进行转换，属性值为转换的方法，其中入参是原文件的内容 `content`

```js
// 📄 tailwind.config.js
const remark = require('remark')

module.exports = {
  content: {
    files: ['./src/**/*.{html,md}'],
    transform: {
      md: (content) => {
        return remark().process(content)
      }
    }
  },
  // ...
}
```

### safelist
`safelist` 选项可以看作是 `content` 选项的替代，它设置了一系列「安全」的基础类，这样 Tailwind 在编译时不管项目中是否有使用这些基础类，它们所对应的样式都会被编译到样式表中。

```js
// 📄 tailwind.config.js
module.exports = {
  content: [
    './pages/**/*.{html,js}'
    './components/**/*.{html,js}',
  ],
  safelist: [
    'bg-red-500',
    'text-3xl',
    'lg:text-4xl',
  ]
  // ...
}
```

:warning: 一般不推荐使用该选项，仅在无法通过扫描文件获取所使用的基础类时，例如一个 UGC 网站，其大部分内容需要由使用者来生成，开发者预先无法得知用户会使用哪些基础类（所对应的样式）。因为该方法可能产生无用的样式代码，使得网页文件变大。而 `content` 选项则不同，Tailwind 会扫描这些文件，提取出其中所使用过的基础类，再按需编译出样式表，可以保持网页的样式表文件大小最小化。

:bulb: `safelist` 选项的元素支持使用正则表达式，以含有属性 `pattern` 的对象，来指定需要匹配的基础类的模式。如果希望匹配使用了特定状态变量，如 `hover:` 的任意基础类，则使用含有 `variant` 的对象来指定。

```js
// 📄 tailwind.config.js
module.exports = {
  content: [
    './pages/**/*.{html,js}',
    './components/**/*.{html,js}',
  ],
  safelist: [
    'text-2xl',
    'text-3xl',
    {
      pattern: /bg-(red|green|blue)-(100|200|300)/,
      variants: ['lg', 'hover', 'focus', 'lg:hover'],
    },
  ],
  // ...
}
```

### theme
`theme` 选项用以定义颜色 `colors`、字体 `fontFamily`、间隔尺度 `spacing`、边框圆角大小 `borderRadius`、断点 `screens` 等**与视觉相关的基础类**。

可以通过**覆盖**[原有值](https://github.com/tailwindlabs/tailwindcss/blob/master/stubs/defaultConfig.stub.js)和**扩展**添加新值的两种方式来自定义基础类

:bulb: 在 `theme` 选项中所有可选/可配置的属性可以查看官方的[参考列表](https://tailwindcss.com/docs/theme#configuration-reference)，它们即可以直接在 `theme` 选项下作为一级属性，覆盖原有的基础类；也可以在 `theme.extend` 下作为二级属性进行基础类的扩展

```js
// 📄 tailwind.config.js
module.exports = {
  // ...
  theme: {
    // 直接在 theme 属性中设置的基础类会完全覆盖原有的 colors 的预设基础类
    colors: {
      'blue': '#1fb6ff',
      'purple': '#7e5bef',
      'pink': '#ff49db',
      'orange': '#ff7849',
      'green': '#13ce66',
      'yellow': '#ffc82c',
      'gray-dark': '#273444',
      'gray': '#8492a6',
      'gray-light': '#d3dce6',
    },
    fontFamily: {
      sans: ['Graphik', 'sans-serif'],
      serif: ['Merriweather', 'serif'],
    },
    extend: {
      // 在 theme 属性的 extend 属性下添加的基础类会以扩展添加新值的方式来添加自定义基础类（仍保留默认的 spacing 和 borderRadius 基础类）
      spacing: {
        '8xl': '96rem',
        '9xl': '128rem',
      },
      borderRadius: {
        '4xl': '2rem',
      }
    }
  }
}
```

:bulb: 如果在定制 `theme` 选项中的某个属性时，希望访问当前 `theme` 选项的其他属性的基础类，可以使用函数的方式（最后返回表示基础类的对象）。

该函数的入参是一个对象，其中包含一个 `theme` 函数，可以调用它从而获取主题特性下的其他属性的值

```js
// 📄 tailwind.config.js
module.exports = {
  theme: {
    spacing: {
      // 可以获取这里定制的基础类
      // ...
    },
    // 以函数的方式定义 backgroundSize 核心插件的基础类
    // 函数的入参对象可以解构出一个 theme() 方法
    backgroundSize: ({ theme }) => ({
      // background-size 样式值有多种形式
      // 可以是长度尺寸、百分比、`cover`/`contain`/`auto` 之一
      auto: 'auto',
      cover: 'cover',
      contain: 'contain',
      ...theme('spacing') // 通过调用 theme('spacing') 方法可以获取其他主题选项的属性的属性值
    })
  }
}
```

但是该函数只能用于 `theme` 选项下的一级属性，而不能直接用于设置次级属性（一般通过核心插件定制的基础类），如果需要在次级属性中使用该函数，在一级属性就需要以函数的形式表示

```js
// 📄 tailwind.config.js
module.exports = {
  theme: {
    fill: ({ theme }) => ({
      gray: theme('colors.gray')
    })
  }
}
```

:bulb: 如果希望获取默认基础类的值，可以通过导入 `tailwindcss/defaultTheme` 来获取

```js
// 📄 tailwind.config.js
const defaultTheme = require('tailwindcss/defaultTheme')

module.exports = {
  theme: {
    extend: {
      fontFamily: {
        sans: [
          'Lato',
          ...defaultTheme.fontFamily.sans,
        ]
      }
    }
  }
}
```

#### screen
`screen` 属性用以定制断点，与响应式布局相关的基础类，Tailwind 默认预设五个断点

```js
// 📄 tailwind.config.js
module.exports = {
  theme: {
    screens: {
      'sm': '640px',
      'md': '768px',
      'lg': '1024px',
      'xl': '1280px',
      '2xl': '1536px',
    }
  }
}
```

#### colors
`colors` 属性用以定制与颜色相关的基础类。这些颜色基础类都会被颜色相关的[核心插件](https://tailwindcss.com/docs/configuration#:~:text=reference) ，如 `backgroundColor`、`borderColor`、`textColor` 等，所继承（以连字符 `-` 组合使用）

```js
// 📄 tailwind.config.js
module.exports = {
  theme: {
    colors: {
      transparent: 'transparent',
      black: '#000',
      white: '#fff',
      gray: {
        100: '#f7fafc',
        // ...
        900: '#1a202c',
      },

      // ...
    }
  }
}
```

#### spacing
`spacing` 属性用以定制间隔和尺寸相关的基础类。这些基础类都会被 `padding`、`margin`、`width`、`height`、`maxHeight`、`flex-basis`、`gap`、`inset`、`space`、`translate`、`scrollMargin`、`scrollPadding` 和 `textIndent` [核心插件](https://tailwindcss.com/docs/configuration#:~:text=reference) 继承（以连字符 `-` 组合使用）

```js
// 📄 tailwind.config.js
module.exports = {
  theme: {
    spacing: {
      px: '1px',
      0: '0',
      0.5: '0.125rem',
      1: '0.25rem',
      1.5: '0.375rem',
      2: '0.5rem',
      2.5: '0.625rem',
      3: '0.75rem',
      3.5: '0.875rem',
      4: '1rem',
      5: '1.25rem',
      // ...
      96: '24rem',
    },
  }
}
```

#### core plugins
除了以上的 `screens`、`colors` 和 `spacing` 属性，其他的属性就是用于配置各个[核心插件](https://tailwindcss.com/docs/configuration#:~:text=reference)的基础类。

**其中子属性名是作为后缀 suffix 使用，而其属性值就是相应的样式**，一般有一个名为 `DEFAULT` 的属性，它是基础类**不带有后缀时**，其默认的样式。

例如 `borderRadius` 属性就是相对于核心插件 `borderRadius`，它用以配置圆角 border radius 基础类。

```js
// 📄 tailwind.config.js
module.exports = {
  theme: {
    borderRadius: {
      'none': '0',
      'sm': '.125rem',
      DEFAULT: '.25rem',
      'lg': '.5rem',
      'full': '9999px',
    },
  }
}
```

```css
/* 编译得到的相应样式 */
.rounded-none { border-radius: 0 }
.rounded-sm   { border-radius: .125rem }
.rounded      { border-radius: .25rem }
.rounded-lg   { border-radius: .5rem }
.rounded-full { border-radius: 9999px }
```

:bulb: 完整的核心插件[列表](https://tailwindcss.com/docs/configuration#:~:text=reference)

:bulb: 如果希望禁止对某些核心插件的基础类进行编译，可以在 `corePlugins` 选项中将其核心插件设置为 `false`（而不是在 `theme` 选项中为核心插件相应的属性赋予空对象，[由于有的核心插件并没有在 `theme` 选项中暴露相应的属性](https://tailwindcss.com/docs/theme#configuration-reference)，例如[核心插件 `float`](https://tailwindcss.com/docs/configuration#:~:text=reference)，在 `theme` 选项中**没有**相应的属性可进行配置，它们只能在 `corePlugins` 选项中进行设置）

```js
// 📄 tailwind.config.js
// 禁止编译生成 opacity 基础类相应的样式
module.exports = {
  // 不推荐的方式
  theme: {
    opacity: {},
  }
  // ...
  // 推荐的方式
  corePlugins: {
     opacity: false,
  }
}
```

### plugins
`plugins` 选项通过创建插件的方式来新增基础类、状态变量等。

[官方提供了一些实用的插件](https://tailwindcss.com/docs/plugins#official-plugins)。

```js
// 📄 tailwind.config.js
module.exports = {
  // ...
  plugins: [
    require('@tailwindcss/typography'),
    require('@tailwindcss/forms'),
    require('@tailwindcss/line-clamp'),
    require('@tailwindcss/aspect-ratio'),
  ]
}
```

### presets
`presets` 选项用以指定自定义的重置样式 preflight 而不使用 Tailwind 的 `base` 模块对网页进行样式的初始化。

```js
// 📄 tailwind.config.js
module.exports = {
  // ...
  presets: [
    require('@acmecorp/base-tailwind-config')
  ],
}
```

### prefix
`prefix` 选项指定一个字符串作为前缀，然后在 HTML 元素中使用基础类时可以添加上这个前缀，**避免与项目的其他类名发生冲突**。然后编译器扫描文档时会识别带有这些前缀的类名，生成相应的样式

```js
// 📄 tailwind.config.js
module.exports = {
  // ...
  prefix: 'tw-',
}
```

:bulb: 这些前缀**不要**添加到状态变量上

```html
<div class="tw-text-lg md:tw-text-xl tw-bg-red-500 hover:tw-bg-blue-500">
  <!-- -->
</div>
```

然后编译的样式表中，所有 Tailwind 生成的类名都包含前缀 `tw-`

```css
.tw-text-left {
  text-align: left;
}
.tw-text-center {
  text-align: center;
}
.tw-text-right {
  text-align: right;
}
/* etc. */
```

:bulb: 自定义的基础类编译时不会加上该前缀

```css
/* 📄 main.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .bg-brand-gradient { /* ... */ }
}
```

```css
/* 编译结果 */
.bg-brand-gradient { /* ... */ }
.hover\:bg-brand-gradient:hover { /* ... */ }
```

如果希望自定义基础类编译后也带有相应的前缀，以便自定义的基础类在 HTML 元素上使用体验一样，可以在定义这些自定义基础类时就带有前缀

```css
/* 📄 main.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .tw-bg-brand-gradient { /* ... */ }
}
```

### important
`important` 选项可以控制是否给由 Tailwind 基础类所编译生成的样式添加 `!important` 声明，以获得最高的优先级

```js
// 📄 tailwind.config.js
module.exports = {
  // ...
  important: true,
}
```

```css
/* 编译结果 */
.leading-none {
  line-height: 1 !important;
}
.leading-tight {
  line-height: 1.25 !important;
}
.leading-snug {
  line-height: 1.375 !important;
}
/* etc. */
```

:bulb: 但是自定义基础类并不会受此选项的影响，如果希望自定义的基础类也有 `!important` 声明，应该在声明时就添加该声明

```css
/* 📄 main.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .bg-brand-gradient {
    background-image: linear-gradient(#3490dc, #6574cd) !important;
  }
}
```

:warning: `important` 选项直接设置为 `true` 则 Tailwind 基础类所编译得到的样式会具有最高优先级，这会覆盖 HTML 元素的行内样式（很多第三方 JS 库会使用行内样式给页面添加特定的样式）。为了避免这种冲突，该选项的值可以使用表示 CSS ID 选择器的字符串，然后在网页的根元素或 `<body>` 元素上添加该 ID 名，这样 Tailwind 的基础类所编译得到的样式具有较高的优先级（可以覆盖其他使用类名指定的样式），但是**同时保留了行内样式更高的优先级**。

```js
// 📄 tailwind.config.js
module.exports = {
  // ...
  important: '#app',
}
```

```html
<html>
<!-- ... -->
<style>
  .high-specificity .nested .selector {
    color: blue;
  }
</style>
<!-- 需要在根节点添加 id 为 app -->
<body id="app">
  <div class="high-specificity">
    <div class="nested">
      <!-- 样式为 red-500 而不是 selector 类所指定的样式-->
      <div class="selector text-red-500"><!-- ... --></div>
    </div>
  </div>

  <!-- 样式是 #bada55 行内样式优先级更高-->
  <div class="text-red-500" style="color: #bada55;"><!-- ... --></div>
</body>
</html>
```

### separator
`separator` 选项用以定制**状态变量**与**基础类**组合时所使用的连接符，默认使用冒号 `:`

因为如果你在项目中使用一些模板语法，例如 [pug](https://pugjs.org/)（而不是 HTML），有些字符是不支持作为类名的，则需要对连接符进行定制

```js
// 📄 tailwind.config.js
module.exports = {
  separator: '_',
}
```

### corePlugins
`corePlugins` 选项用以控制 Tailwind 可以对哪些基础类进行编译。

:bulb: 可以在官方文档中查看有哪些[核心插件](https://tailwindcss.com/docs/configuration#:~:text=reference)。

* 如果希望**禁止**对某些基础类进行编译为相应的样式，可以将其核心插件设置为 `false`

  ```js
  // 📄 tailwind.config.js
  module.exports = {
    // ...
    corePlugins: {
      float: false,
      objectFit: false,
      objectPosition: false,
    }
  }
  ```

* 相对地，可以用数组的方式列出 **「安全」** 的基础类，Tailwind 会对这些基础类进行编译

  ```js
  // 📄 tailwind.config.js
  module.exports = {
    // ...
    corePlugins: [
      'margin',
      'padding',
      'backgroundColor',
      // ...
    ]
  }
  ```

* 如果想**禁止所有**基础类的编译（而仅使用自定义的插件），可以将该选项值设置为空数组

    ```js
  // 📄 tailwind.config.js
  module.exports = {
    // ...
    corePlugins: []
  }
  ```

## 访问配置文件
可以使用 `resolveConfig()` 方法访问到 Tailwind 的配置文档，以获取 Tailwind 的相关的信息，例如可以获取到配置文档中 `theme` 属性下的一些预设值

```js
import resolveConfig from 'tailwindcss/resolveConfig'
import tailwindConfig from './tailwind.config.js'

// 通过方法 resolveConfig() 返回一个包含 Tailwind 配置信息的对象
const fullConfig = resolveConfig(tailwindConfig)

// 读取其中属性 theme 的一些预设值
fullConfig.theme.width[4]
// => '1rem'

fullConfig.theme.screens.md
// => '768px'

fullConfig.theme.boxShadow['2xl']
// => '0 25px 50px -12px rgba(0, 0, 0, 0.25)'
```
